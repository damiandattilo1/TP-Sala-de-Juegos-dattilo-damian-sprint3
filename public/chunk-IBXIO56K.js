import{F as wf,O as Ie,P as Hr,S as sn,T as oc,U as jo,V as G_,W as W_,X as er,Y as lt,a as M,b as ce,c as mf,d as y,e as j_,f as ic,g as U_,h as B_,k as $_,n as yf,o as q_,p as Lo,t as vf,u as sc,v as H_,w as z_}from"./chunk-K3XG54ZU.js";var K_=null;var _f=1,Ef=Symbol("SIGNAL");function oe(t){let e=K_;return K_=t,e}var Q_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mx(t){if(!(Cf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===_f)){if(!t.producerMustRecompute(t)&&!If(t)){t.dirty=!1,t.lastCleanEpoch=_f;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=_f}}function Y_(t){return t&&(t.nextProducerIndex=0),oe(t)}function Z_(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Cf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Df(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function If(t){ac(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mx(n),r!==n.version))return!0}return!1}function J_(t){if(ac(t),Cf(t))for(let e=0;e<t.producerNode.length;e++)Df(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Df(t,e){if(yx(t),ac(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Df(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ac(i),i.producerIndexOfThis[r]=e}}function Cf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ac(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function yx(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function vx(){throw new Error}var wx=vx;function X_(t){wx=t}function q(t){return typeof t=="function"}function Qi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var uc=Qi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function zr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof uc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{eE(s)}catch(o){e=e??[],o instanceof uc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new uc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)eE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&zr(n,e)}remove(e){let{_finalizers:n}=this;n&&zr(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var Tf=Se.EMPTY;function cc(t){return t instanceof Se||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function eE(t){q(t)?t():t.unsubscribe()}var $t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yi={setTimeout(t,e,...n){let{delegate:r}=Yi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Yi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function lc(t){Yi.setTimeout(()=>{let{onUnhandledError:e}=$t;if(e)e(t);else throw t})}function Gr(){}var tE=bf("C",void 0,void 0);function nE(t){return bf("E",void 0,t)}function rE(t){return bf("N",t,void 0)}function bf(t,e,n){return{kind:t,value:e,error:n}}var Wr=null;function Zi(t){if($t.useDeprecatedSynchronousErrorHandling){let e=!Wr;if(e&&(Wr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Wr;if(Wr=null,n)throw r}}else t()}function iE(t){$t.useDeprecatedSynchronousErrorHandling&&Wr&&(Wr.errorThrown=!0,Wr.error=t)}var Kr=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cc(e)&&e.add(this)):this.destination=Ix}static create(e,n,r){return new Rn(e,n,r)}next(e){this.isStopped?Sf(rE(e),this):this._next(e)}error(e){this.isStopped?Sf(nE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sf(tE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_x=Function.prototype.bind;function Af(t,e){return _x.call(t,e)}var Mf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){dc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){dc(r)}else dc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){dc(n)}}},Rn=class extends Kr{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&$t.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Af(e.next,s),error:e.error&&Af(e.error,s),complete:e.complete&&Af(e.complete,s)}):i=e}this.destination=new Mf(i)}};function dc(t){$t.useDeprecatedSynchronousErrorHandling?iE(t):lc(t)}function Ex(t){throw t}function Sf(t,e){let{onStoppedNotification:n}=$t;n&&Yi.setTimeout(()=>n(t,e))}var Ix={closed:!0,next:Gr,error:Ex,complete:Gr};var Ji=typeof Symbol=="function"&&Symbol.observable||"@@observable";function We(t){return t}function xf(...t){return Rf(t)}function Rf(t){return t.length===0?We:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=Cx(n)?n:new Rn(n,r,i);return Zi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=sE(r),new r((i,s)=>{let o=new Rn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ji](){return this}pipe(...n){return Rf(n)(this)}toPromise(n){return n=sE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function sE(t){var e;return(e=t??$t.Promise)!==null&&e!==void 0?e:Promise}function Dx(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function Cx(t){return t&&t instanceof Kr||Dx(t)&&cc(t)}function Nf(t){return q(t?.lift)}function G(t){return e=>{if(Nf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function H(t,e,n,r,i){return new Pf(t,e,n,r,i)}var Pf=class extends Kr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xi(){return G((t,e)=>{let n=null;t._refCount++;let r=H(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var es=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Nf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(H(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return Xi()(this)}};var oE=Qi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new hc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new oE}next(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Zi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Tf:(this.currentObservers=null,s.push(n),new Se(()=>{this.currentObservers=null,zr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new hc(e,n),t})(),hc=class extends Ce{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tf}};var Ke=class extends Ce{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Uo={now(){return(Uo.delegate||Date).now()},delegate:void 0};var fc=class extends Ce{constructor(e=1/0,n=1/0,r=Uo){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}};var pc=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var Bo={setInterval(t,e,...n){let{delegate:r}=Bo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Bo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ts=class extends pc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Bo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Bo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,zr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ns=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ns.now=Uo.now;var rs=class extends ns{constructor(e,n=ns.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var $o=new rs(ts);var gc=class extends ts{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var mc=class extends rs{};var Of=new mc(gc);var dt=new Y(t=>t.complete());function aE(t){return t&&q(t.schedule)}function kf(t){return t[t.length-1]}function is(t){return q(kf(t))?t.pop():void 0}function on(t){return aE(kf(t))?t.pop():void 0}function uE(t,e){return typeof kf(t)=="number"?t.pop():e}var yc=t=>t&&typeof t.length=="number"&&typeof t!="function";function vc(t){return q(t?.then)}function wc(t){return q(t[Ji])}function _c(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function Ec(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Tx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ic=Tx();function Dc(t){return q(t?.[Ic])}function Cc(t){return U_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ic(n.read());if(i)return yield ic(void 0);yield yield ic(r)}}finally{n.releaseLock()}})}function Tc(t){return q(t?.getReader)}function fe(t){if(t instanceof Y)return t;if(t!=null){if(wc(t))return bx(t);if(yc(t))return Ax(t);if(vc(t))return Sx(t);if(_c(t))return cE(t);if(Dc(t))return Mx(t);if(Tc(t))return xx(t)}throw Ec(t)}function bx(t){return new Y(e=>{let n=t[Ji]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ax(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Sx(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,lc)})}function Mx(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cE(t){return new Y(e=>{Rx(t,e).catch(n=>e.error(n))})}function xx(t){return cE(Cc(t))}function Rx(t,e){var n,r,i,s;return j_(this,void 0,void 0,function*(){try{for(n=B_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function _t(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function xt(t,e=0){return G((n,r)=>{n.subscribe(H(r,i=>_t(r,t,()=>r.next(i),e),()=>_t(r,t,()=>r.complete(),e),i=>_t(r,t,()=>r.error(i),e)))})}function qt(t,e=0){return G((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function lE(t,e){return fe(t).pipe(qt(e),xt(e))}function dE(t,e){return fe(t).pipe(qt(e),xt(e))}function hE(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function fE(t,e){return new Y(n=>{let r;return _t(n,e,()=>{r=t[Ic](),_t(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function bc(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{_t(n,e,()=>{let r=t[Symbol.asyncIterator]();_t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function pE(t,e){return bc(Cc(t),e)}function gE(t,e){if(t!=null){if(wc(t))return lE(t,e);if(yc(t))return hE(t,e);if(vc(t))return dE(t,e);if(_c(t))return bc(t,e);if(Dc(t))return fE(t,e);if(Tc(t))return pE(t,e)}throw Ec(t)}function ee(t,e){return e?gE(t,e):fe(t)}function F(...t){let e=on(t);return ee(t,e)}function ss(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function Ff(t){return!!t&&(t instanceof Y||q(t.lift)&&q(t.subscribe))}var Nn=Qi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function V(t,e){return G((n,r)=>{let i=0;n.subscribe(H(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:Nx}=Array;function Px(t,e){return Nx(e)?t(...e):t(e)}function Ac(t){return V(e=>Px(t,e))}var{isArray:Ox}=Array,{getPrototypeOf:kx,prototype:Fx,keys:Vx}=Object;function Sc(t){if(t.length===1){let e=t[0];if(Ox(e))return{args:e,keys:null};if(Lx(e)){let n=Vx(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Lx(t){return t&&typeof t=="object"&&kx(t)===Fx}function Mc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qo(...t){let e=on(t),n=is(t),{args:r,keys:i}=Sc(t);if(r.length===0)return ee([],e);let s=new Y(jx(r,e,i?o=>Mc(i,o):We));return n?s.pipe(Ac(n)):s}function jx(t,e,n=We){return r=>{mE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)mE(e,()=>{let c=ee(t[u],e),l=!1;c.subscribe(H(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function mE(t,e,n){t?_t(n,t,e):e()}function yE(t,e,n,r,i,s,o,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=w=>c<r?v(w):u.push(w),v=w=>{s&&e.next(w),c++;let m=!1;fe(n(w,l++)).subscribe(H(e,E=>{i?.(E),s?f(E):e.next(E)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){let E=u.shift();o?_t(e,o,()=>v(E)):v(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(H(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ne(t,e,n=1/0){return q(e)?Ne((r,i)=>V((s,o)=>e(r,s,i,o))(fe(t(r,i))),n):(typeof e=="number"&&(n=e),G((r,i)=>yE(r,i,t,n)))}function tr(t=1/0){return Ne(We,t)}function vE(){return tr(1)}function os(...t){return vE()(ee(t,on(t)))}function xc(t){return new Y(e=>{fe(t()).subscribe(e)})}function Vf(...t){let e=is(t),{args:n,keys:r}=Sc(t),i=new Y(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,c=o;for(let l=0;l<o;l++){let d=!1;fe(n[l]).subscribe(H(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?Mc(r,a):a),s.complete())}))}});return e?i.pipe(Ac(e)):i}function Lf(...t){let e=on(t),n=uE(t,1/0),r=t;return r.length?r.length===1?fe(r[0]):tr(n)(ee(r,e)):dt}function Ue(t,e){return G((n,r)=>{let i=0;n.subscribe(H(r,s=>t.call(e,s,i++)&&r.next(s)))})}function nr(t){return G((e,n)=>{let r=null,i=!1,s;r=e.subscribe(H(n,void 0,void 0,o=>{s=fe(t(o,nr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function wE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(H(o,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Pn(t,e){return q(e)?Ne(t,e,1):Ne(t,1)}function rr(t){return G((e,n)=>{let r=!1;e.subscribe(H(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function an(t){return t<=0?()=>dt:G((e,n)=>{let r=0;e.subscribe(H(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function jf(t){return V(()=>t)}function Uf(t,e=We){return t=t??Ux,G((n,r)=>{let i,s=!0;n.subscribe(H(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function Ux(t,e){return t===e}function Rc(t=Bx){return G((e,n)=>{let r=!1;e.subscribe(H(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Bx(){return new Nn}function ir(t){return G((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Rt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,s)=>t(i,s,r)):We,an(1),n?rr(e):Rc(()=>new Nn))}function as(t){return t<=0?()=>dt:G((e,n)=>{let r=[];e.subscribe(H(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Bf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,s)=>t(i,s,r)):We,as(1),n?rr(e):Rc(()=>new Nn))}function Ho(){return G((t,e)=>{let n,r=!1;t.subscribe(H(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Qr(t,e){return G(wE(t,e,arguments.length>=2,!0))}function qf(t={}){let{connector:e=()=>new Ce,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},v=()=>{let w=o;f(),w?.unsubscribe()};return G((w,m)=>{c++,!d&&!l&&h();let E=u=u??e();m.add(()=>{c--,c===0&&!d&&!l&&(a=$f(v,i))}),E.subscribe(m),!o&&c>0&&(o=new Rn({next:P=>E.next(P),error:P=>{d=!0,h(),a=$f(f,n,P),E.error(P)},complete:()=>{l=!0,h(),a=$f(f,r),E.complete()}}),fe(w).subscribe(o))})(s)}}function $f(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Rn({next:()=>{r.unsubscribe(),t()}});return fe(e(...n)).subscribe(r)}function Nc(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,qf({connector:()=>new fc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function $x(t){return G((e,n)=>{let r=!1,i=0;e.subscribe(H(n,s=>(r||(r=!t(s,i++)))&&n.next(s)))})}function Yr(...t){let e=on(t);return G((n,r)=>{(e?os(t,n,e):os(t,n)).subscribe(r)})}function ve(t,e){return G((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(H(r,u=>{i?.unsubscribe();let c=0,l=s++;fe(t(u,l)).subscribe(i=H(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Pc(t,e){return q(e)?ve(()=>t,e):ve(()=>t)}function Hf(t){return G((e,n)=>{fe(t).subscribe(H(n,()=>n.complete(),Gr)),!n.closed&&e.subscribe(n)})}function Pe(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?G((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(H(s,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),s.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):We}function qx(...t){let e=is(t);return G((n,r)=>{let i=t.length,s=new Array(i),o=t.map(()=>!1),a=!1;for(let u=0;u<i;u++)fe(t[u]).subscribe(H(r,c=>{s[u]=c,!a&&!o[u]&&(o[u]=!0,(a=o.every(We))&&(o=null))},Gr));n.subscribe(H(r,u=>{if(a){let c=[u,...s];r.next(e?e(...c):c)}}))})}var nI="https://g.co/ng/security#xss",j=class extends Error{constructor(e,n){super(cl(e,n)),this.code=e}};function cl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function na(t){return{toString:t}.toString()}var Oc="__parameters__";function Hx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function rI(t,e,n){return na(()=>{let r=Hx(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,c,l){let d=u.hasOwnProperty(Oc)?u[Oc]:Object.defineProperty(u,Oc,{value:[]})[Oc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Zr=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("Could not find renamed property on target object.")}function zx(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function _E(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Gx=pe({__forward_ref__:pe});function ai(t){return t.__forward_ref__=ai,t.toString=function(){return ft(this())},t}function ht(t){return iI(t)?t():t}function iI(t){return typeof t=="function"&&t.hasOwnProperty(Gx)&&t.__forward_ref__===ai}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ll(t){return EE(t,oI)||EE(t,aI)}function sI(t){return ll(t)!==null}function EE(t,e){return t.hasOwnProperty(e)?t[e]:null}function Wx(t){let e=t&&(t[oI]||t[aI]);return e||null}function IE(t){return t&&(t.hasOwnProperty(DE)||t.hasOwnProperty(Kx))?t[DE]:null}var oI=pe({\u0275prov:pe}),DE=pe({\u0275inj:pe}),aI=pe({ngInjectableDef:pe}),Kx=pe({ngInjectorDef:pe}),x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function uI(t){return t&&!!t.\u0275providers}var Qx=pe({\u0275cmp:pe}),Yx=pe({\u0275dir:pe}),Zx=pe({\u0275pipe:pe}),Jx=pe({\u0275mod:pe}),qc=pe({\u0275fac:pe}),zo=pe({__NG_ELEMENT_ID__:pe}),CE=pe({__NG_ENV_ID__:pe});function dl(t){return typeof t=="string"?t:t==null?"":String(t)}function Xx(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():dl(t)}function eR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,t)}function qp(t,e){throw new j(-201,!1)}var Z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Z||{}),op;function cI(){return op}function Nt(t){let e=op;return op=t,e}function lI(t,e,n){let r=ll(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Z.Optional)return null;if(e!==void 0)return e;qp(t,"Injector")}var tR={},Go=tR,ap="__NG_DI_FLAG__",Hc="ngTempTokenPath",nR="ngTokenPath",rR=/\n/gm,iR="\u0275",TE="__source",hs;function sR(){return hs}function sr(t){let e=hs;return hs=t,e}function oR(t,e=Z.Default){if(hs===void 0)throw new j(-203,!1);return hs===null?lI(t,void 0,e):hs.get(t,e&Z.Optional?null:void 0,e)}function D(t,e=Z.Default){return(cI()||oR)(ht(t),e)}function T(t,e=Z.Default){return D(t,hl(e))}function hl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function up(t){let e=[];for(let n=0;n<t.length;n++){let r=ht(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=Z.Default;for(let o=0;o<r.length;o++){let a=r[o],u=aR(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(D(i,s))}else e.push(D(r))}return e}function dI(t,e){return t[ap]=e,t.prototype[ap]=e,t}function aR(t){return t[ap]}function uR(t,e,n,r){let i=t[Hc];throw e[TE]&&i.unshift(e[TE]),t.message=cR(`
`+t.message,i,n,r),t[nR]=i,t[Hc]=null,t}function cR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==iR?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(rR,`
  `)}`}var ra=dI(rI("Optional"),8);var hI=dI(rI("SkipSelf"),4);function ps(t,e){let n=t.hasOwnProperty(qc);return n?t[qc]:null}function Hp(t,e){t.forEach(n=>Array.isArray(n)?Hp(n,e):e(n))}function fI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function zc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function lR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function dR(t,e,n){let r=ia(t,e);return r>=0?t[r|1]=n:(r=~r,lR(t,r,e,n)),r}function zf(t,e){let n=ia(t,e);if(n>=0)return t[n|1]}function ia(t,e){return hR(t,e,1)}function hR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var gs={},Pt=[],ms=new x(""),pI=new x("",-1),gI=new x(""),Gc=class{get(e,n=Go){if(n===Go){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}},mI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(mI||{}),ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ln||{}),Xe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Xe||{});function fR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function cp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];pR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function yI(t){return t===3||t===4||t===6}function pR(t){return t.charCodeAt(0)===64}function Wo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?bE(t,n,i,null,e[++r]):bE(t,n,i,null,null))}}return t}function bE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var vI="ng-template";function gR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(zp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function zp(t){return t.type===4&&t.value!==vI}function mR(t,e,n){let r=t.type===4&&!n?vI:t.value;return e===r}function yR(t,e,n){let r=4,i=t.attrs,s=i!==null?_R(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Ht(r)&&!Ht(u))return!1;if(o&&Ht(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!mR(t,u,n)||u===""&&e.length===1){if(Ht(r))return!1;o=!0}}else if(r&8){if(i===null||!gR(t,i,u,n)){if(Ht(r))return!1;o=!0}}else{let c=e[++a],l=vR(u,i,zp(t),n);if(l===-1){if(Ht(r))return!1;o=!0;continue}if(c!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&c!==d){if(Ht(r))return!1;o=!0}}}}return Ht(r)||o}function Ht(t){return(t&1)===0}function vR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return ER(e,t)}function wR(t,e,n=!1){for(let r=0;r<e.length;r++)if(yR(t,e[r],n))return!0;return!1}function _R(t){for(let e=0;e<t.length;e++){let n=t[e];if(yI(n))return e}return t.length}function ER(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function AE(t,e){return t?":not("+e.trim()+")":e}function IR(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ht(o)&&(e+=AE(s,i),i=""),r=o,s=s||!Ht(r);n++}return i!==""&&(e+=AE(s,i)),e}function DR(t){return t.map(IR).join(",")}function CR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ht(i))break;i=s}r++}return{attrs:e,classes:n}}function wI(t){return na(()=>{let e=CI(t),n=ce(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===mI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,styles:t.styles||Pt,_:null,schemas:t.schemas||null,tView:null,id:""});TI(n);let r=t.dependencies;return n.directiveDefs=ME(r,!1),n.pipeDefs=ME(r,!0),n.id=AR(n),n})}function TR(t){return ar(t)||_I(t)}function bR(t){return t!==null}function nt(t){return na(()=>({type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function SE(t,e){if(t==null)return gs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Xe.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Xe.None?[r,a]:r,e[s]=o):n[s]=r}return n}function rt(t){return na(()=>{let e=CI(t);return TI(e),e})}function ar(t){return t[Qx]||null}function _I(t){return t[Yx]||null}function EI(t){return t[Zx]||null}function II(t){let e=ar(t)||_I(t)||EI(t);return e!==null?e.standalone:!1}function DI(t,e){let n=t[Jx]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function CI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||gs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:SE(t.inputs,e),outputs:SE(t.outputs),debugInfo:null}}function TI(t){t.features?.forEach(e=>e(t))}function ME(t,e){if(!t)return null;let n=e?EI:TR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(bR)}function AR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ds(t){return{\u0275providers:t}}function SR(...t){return{\u0275providers:bI(!0,t),\u0275fromNgModule:!0}}function bI(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Hp(e,o=>{let a=o;lp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&AI(i,s),n}function AI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Gp(i,s=>{e(s,r)})}}function lp(t,e,n,r){if(t=ht(t),!t)return!1;let i=null,s=IE(t),o=!s&&ar(t);if(!s&&!o){let u=t.ngModule;if(s=IE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of u)lp(c,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Hp(s.imports,l=>{lp(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&AI(c,e)}if(!a){let c=ps(i)||(()=>new i);e({provide:i,useFactory:c,deps:Pt},i),e({provide:gI,useValue:i,multi:!0},i),e({provide:ms,useValue:()=>D(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let c=t;Gp(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Gp(t,e){for(let n of t)uI(n)&&(n=n.\u0275providers),Array.isArray(n)?Gp(n,e):e(n)}var MR=pe({provide:String,useValue:pe});function SI(t){return t!==null&&typeof t=="object"&&MR in t}function xR(t){return!!(t&&t.useExisting)}function RR(t){return!!(t&&t.useFactory)}function ys(t){return typeof t=="function"}function NR(t){return!!t.useClass}var fl=new x(""),Lc={},PR={},Gf;function Wp(){return Gf===void 0&&(Gf=new Gc),Gf}var pt=class{},Ko=class extends pt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hp(e,o=>this.processProvider(o)),this.records.set(pI,us(void 0,this)),i.has("environment")&&this.records.set(pt,us(void 0,this));let s=this.records.get(fl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(gI,Pt,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=sr(this),r=Nt(void 0),i;try{return e()}finally{sr(n),Nt(r)}}get(e,n=Go,r=Z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CE))return e[CE](this);r=hl(r);let i,s=sr(this),o=Nt(void 0);try{if(!(r&Z.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=LR(e)&&ll(e);c&&this.injectableDefInScope(c)?u=us(dp(e),Lc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&Z.Self?Wp():this.parent;return n=r&Z.Optional&&n===Go?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Hc]=a[Hc]||[]).unshift(ft(e)),s)throw a;return uR(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(o),sr(s)}}resolveInjectorInitializers(){let e=oe(null),n=sr(this),r=Nt(void 0),i;try{let s=this.get(ms,Pt,Z.Self);for(let o of s)o()}finally{sr(n),Nt(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=ht(e);let n=ys(e)?e:ht(e&&e.provide),r=kR(e);if(!ys(e)&&e.multi===!0){let i=this.records.get(n);i||(i=us(void 0,Lc,!0),i.factory=()=>up(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===Lc&&(n.value=PR,n.value=n.factory()),typeof n.value=="object"&&n.value&&VR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ht(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function dp(t){let e=ll(t),n=e!==null?e.factory:ps(t);if(n!==null)return n;if(t instanceof x)throw new j(204,!1);if(t instanceof Function)return OR(t);throw new j(204,!1)}function OR(t){if(t.length>0)throw new j(204,!1);let n=Wx(t);return n!==null?()=>n.factory(t):()=>new t}function kR(t){if(SI(t))return us(void 0,t.useValue);{let e=MI(t);return us(e,Lc)}}function MI(t,e,n){let r;if(ys(t)){let i=ht(t);return ps(i)||dp(i)}else if(SI(t))r=()=>ht(t.useValue);else if(RR(t))r=()=>t.useFactory(...up(t.deps||[]));else if(xR(t))r=()=>D(ht(t.useExisting));else{let i=ht(t&&(t.useClass||t.provide));if(FR(t))r=()=>new i(...up(t.deps));else return ps(i)||dp(i)}return r}function us(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function FR(t){return!!t.deps}function VR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function LR(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function hp(t,e){for(let n of t)Array.isArray(n)?hp(n,e):n&&uI(n)?hp(n.\u0275providers,e):e(n)}function Kt(t,e){t instanceof Ko&&t.assertNotDestroyed();let n,r=sr(t),i=Nt(void 0);try{return e()}finally{sr(r),Nt(i)}}function xI(){return cI()!==void 0||sR()!=null}function jR(t){if(!xI())throw new j(-203,!1)}function UR(t){return typeof t=="function"}var Fn=0,te=1,$=2,et=3,zt=4,Qt=5,Wc=6,Qo=7,Gt=8,vs=9,Wt=10,Oe=11,Yo=12,xE=13,Cs=14,dn=15,pl=16,cs=17,ws=18,gl=19,RI=20,or=21,Wf=22,ei=23,ur=25,NI=1;var ti=7,Kc=8,Qc=9,Ot=10,Kp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Kp||{});function Jr(t){return Array.isArray(t)&&typeof t[NI]=="object"}function Vn(t){return Array.isArray(t)&&t[NI]===!0}function PI(t){return(t.flags&4)!==0}function ml(t){return t.componentOffset>-1}function Qp(t){return(t.flags&1)===1}function cr(t){return!!t.template}function BR(t){return(t[$]&512)!==0}var fp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function OI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function dr(){return kI}function kI(t){return t.type.prototype.ngOnChanges&&(t.setInput=qR),$R}dr.ngInherit=!0;function $R(){let t=VI(this),e=t?.current;if(e){let n=t.previous;if(n===gs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qR(t,e,n,r,i){let s=this.declaredInputs[r],o=VI(t)||HR(t,{previous:gs,current:null}),a=o.current||(o.current={}),u=o.previous,c=u[s];a[s]=new fp(c&&c.currentValue,n,u===gs),OI(t,e,i,n)}var FI="__ngSimpleChanges__";function VI(t){return t[FI]||null}function HR(t,e){return t[FI]=e}var RE=null;var un=function(t,e,n){RE?.(t,e,n)},zR="svg",GR="math",WR=!1;function KR(){return WR}function hn(t){for(;Array.isArray(t);)t=t[Fn];return t}function LI(t,e){return hn(e[t])}function kt(t,e){return hn(e[t.index])}function jI(t,e){return t.data[e]}function hr(t,e){let n=e[t];return Jr(n)?n:n[Fn]}function Yp(t){return(t[$]&128)===128}function QR(t){return Vn(t[et])}function Yc(t,e){return e==null?null:t[e]}function UI(t){t[cs]=0}function YR(t){t[$]&1024||(t[$]|=1024,Yp(t)&&Zo(t))}function ZR(t,e){for(;t>0;)e=e[Cs],t--;return e}function Zp(t){return!!(t[$]&9216||t[ei]?.dirty)}function pp(t){t[Wt].changeDetectionScheduler?.notify(1),Zp(t)?Zo(t):t[$]&64&&(KR()?(t[$]|=1024,Zo(t)):t[Wt].changeDetectionScheduler?.notify())}function Zo(t){t[Wt].changeDetectionScheduler?.notify();let e=Jo(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Yp(e)));)e=Jo(e)}function BI(t,e){if((t[$]&256)===256)throw new j(911,!1);t[or]===null&&(t[or]=[]),t[or].push(e)}function JR(t,e){if(t[or]===null)return;let n=t[or].indexOf(e);n!==-1&&t[or].splice(n,1)}function Jo(t){let e=t[et];return Vn(e)?e[et]:e}var J={lFrame:KI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function XR(){return J.lFrame.elementDepthCount}function eN(){J.lFrame.elementDepthCount++}function tN(){J.lFrame.elementDepthCount--}function $I(){return J.bindingsEnabled}function nN(){return J.skipHydrationRootTNode!==null}function rN(t){return J.skipHydrationRootTNode===t}function iN(){J.skipHydrationRootTNode=null}function me(){return J.lFrame.lView}function Et(){return J.lFrame.tView}function R9(t){return J.lFrame.contextLView=t,t[Gt]}function N9(t){return J.lFrame.contextLView=null,t}function It(){let t=qI();for(;t!==null&&t.type===64;)t=t.parent;return t}function qI(){return J.lFrame.currentTNode}function sN(){let t=J.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function sa(t,e){let n=J.lFrame;n.currentTNode=t,n.isParent=e}function HI(){return J.lFrame.isParent}function oN(){J.lFrame.isParent=!1}function aN(t){return J.lFrame.bindingIndex=t}function yl(){return J.lFrame.bindingIndex++}function uN(t){let e=J.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function cN(){return J.lFrame.inI18n}function lN(t,e){let n=J.lFrame;n.bindingIndex=n.bindingRootIndex=t,gp(e)}function dN(){return J.lFrame.currentDirectiveIndex}function gp(t){J.lFrame.currentDirectiveIndex=t}function hN(t){let e=J.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function zI(t){J.lFrame.currentQueryIndex=t}function fN(t){let e=t[te];return e.type===2?e.declTNode:e.type===1?t[Qt]:null}function GI(t,e,n){if(n&Z.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&Z.Host);)if(i=fN(s),i===null||(s=s[Cs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=J.lFrame=WI();return r.currentTNode=e,r.lView=t,!0}function Jp(t){let e=WI(),n=t[te];J.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function WI(){let t=J.lFrame,e=t===null?null:t.child;return e===null?KI(t):e}function KI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function QI(){let t=J.lFrame;return J.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var YI=QI;function Xp(){let t=QI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pN(t){return(J.lFrame.contextLView=ZR(t,J.lFrame.contextLView))[Gt]}function Ts(){return J.lFrame.selectedIndex}function ni(t){J.lFrame.selectedIndex=t}function vl(){let t=J.lFrame;return jI(t.tView,t.selectedIndex)}function gN(){return J.lFrame.currentNamespace}var ZI=!0;function eg(){return ZI}function tg(t){ZI=t}function mN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=kI(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ng(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function jc(t,e,n){JI(t,e,3,n)}function Uc(t,e,n,r){(t[$]&3)===n&&JI(t,e,n,r)}function Kf(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function JI(t,e,n,r){let i=r!==void 0?t[cs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[cs]+=65536),(a<s||s==-1)&&(yN(t,n,e,u),t[cs]=(t[cs]&4294901760)+u+2),u++}function NE(t,e){un(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),un(5,t,e)}}function yN(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[$]>>14<t[cs]>>16&&(t[$]&3)===e&&(t[$]+=16384,NE(a,s)):NE(a,s)}var fs=-1,ri=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function vN(t){return t instanceof ri}function wN(t){return(t.flags&8)!==0}function _N(t){return(t.flags&16)!==0}function XI(t){return t!==fs}function Zc(t){return t&32767}function EN(t){return t>>16}function Jc(t,e){let n=EN(t),r=e;for(;n>0;)r=r[Cs],n--;return r}var mp=!0;function PE(t){let e=mp;return mp=t,e}var IN=256,eD=IN-1,tD=5,DN=0,cn={};function CN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zo)&&(r=n[zo]),r==null&&(r=n[zo]=DN++);let i=r&eD,s=1<<i;e.data[t+(i>>tD)]|=s}function Xc(t,e){let n=nD(t,e);if(n!==-1)return n;let r=e[te];r.firstCreatePass&&(t.injectorIndex=e.length,Qf(r.data,t),Qf(e,null),Qf(r.blueprint,null));let i=rg(t,e),s=t.injectorIndex;if(XI(i)){let o=Zc(i),a=Jc(i,e),u=a[te].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function Qf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function nD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function rg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=aD(i),r===null)return fs;if(n++,i=i[Cs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return fs}function yp(t,e,n){CN(t,e,n)}function TN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(yI(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function rD(t,e,n){if(n&Z.Optional||t!==void 0)return t;qp(e,"NodeInjector")}function iD(t,e,n,r){if(n&Z.Optional&&r===void 0&&(r=null),!(n&(Z.Self|Z.Host))){let i=t[vs],s=Nt(void 0);try{return i?i.get(e,r,n&Z.Optional):lI(e,r,n&Z.Optional)}finally{Nt(s)}}return rD(r,e,n)}function sD(t,e,n,r=Z.Default,i){if(t!==null){if(e[$]&2048&&!(r&Z.Self)){let o=xN(t,e,n,r,cn);if(o!==cn)return o}let s=oD(t,e,n,r,cn);if(s!==cn)return s}return iD(e,n,r,i)}function oD(t,e,n,r,i){let s=SN(n);if(typeof s=="function"){if(!GI(e,t,r))return r&Z.Host?rD(i,n,r):iD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&Z.Optional))qp(n);else return o}finally{YI()}}else if(typeof s=="number"){let o=null,a=nD(t,e),u=fs,c=r&Z.Host?e[dn][Qt]:null;for((a===-1||r&Z.SkipSelf)&&(u=a===-1?rg(t,e):e[a+8],u===fs||!kE(r,!1)?a=-1:(o=e[te],a=Zc(u),e=Jc(u,e)));a!==-1;){let l=e[te];if(OE(s,a,l.data)){let d=bN(a,e,n,o,r,c);if(d!==cn)return d}u=e[a+8],u!==fs&&kE(r,e[te].data[a+8]===c)&&OE(s,a,e)?(o=l,a=Zc(u),e=Jc(u,e)):a=-1}}return i}function bN(t,e,n,r,i,s){let o=e[te],a=o.data[t+8],u=r==null?ml(a)&&mp:r!=o&&(a.type&3)!==0,c=i&Z.Host&&s===a,l=AN(a,o,n,u,c);return l!==null?_s(e,o,l,a):cn}function AN(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,c=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let v=o[f];if(f<u&&n===v||f>=u&&v.type===n)return f}if(i){let f=o[u];if(f&&cr(f)&&f.type===n)return u}return null}function _s(t,e,n,r){let i=t[n],s=e.data;if(vN(i)){let o=i;o.resolving&&eR(Xx(s[n]));let a=PE(o.canSeeViewProviders);o.resolving=!0;let u,c=o.injectImpl?Nt(o.injectImpl):null,l=GI(t,r,Z.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&mN(n,s[n],e)}finally{c!==null&&Nt(c),PE(a),o.resolving=!1,YI()}}return i}function SN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(zo)?t[zo]:void 0;return typeof e=="number"?e>=0?e&eD:MN:e}function OE(t,e,n){let r=1<<t;return!!(n[e+(t>>tD)]&r)}function kE(t,e){return!(t&Z.Self)&&!(t&Z.Host&&e)}var Xr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return sD(this._tNode,this._lView,e,hl(r),n)}};function MN(){return new Xr(It(),me())}function bs(t){return na(()=>{let e=t.prototype.constructor,n=e[qc]||vp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[qc]||vp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function vp(t){return iI(t)?()=>{let e=vp(ht(t));return e&&e()}:ps(t)}function xN(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[$]&2048&&!(o[$]&512);){let a=oD(s,o,n,r|Z.Self,cn);if(a!==cn)return a;let u=s.parent;if(!u){let c=o[RI];if(c){let l=c.get(n,cn,r);if(l!==cn)return l}u=aD(o),o=o[Cs]}s=u}return i}function aD(t){let e=t[te],n=e.type;return n===2?e.declTNode:n===1?t[Qt]:null}function ig(t){return TN(It(),t)}function FE(t,e=null,n=null,r){let i=uD(t,e,n,r);return i.resolveInjectorInitializers(),i}function uD(t,e=null,n=null,r,i=new Set){let s=[n||Pt,SR(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new Ko(s,e||Wp(),r||null,i)}var Ln=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return FE({name:""},i,r,"");{let s=r.name??"";return FE({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Go,e.NULL=new Gc,e.\u0275prov=O({token:e,providedIn:"any",factory:()=>D(pI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var RN="ngOriginalError";function Yf(t){return t[RN]}var fn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Yf(e);for(;n&&Yf(n);)n=Yf(n);return n||null}},cD=new x("",{providedIn:"root",factory:()=>T(fn).handleError.bind(void 0)}),sg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),wp=class extends sg{constructor(e){super(),this._lView=e}onDestroy(e){return BI(this._lView,e),()=>JR(this._lView,e)}};function NN(){return new wp(me())}function PN(){return wl(It(),me())}function wl(t,e){return new fr(kt(t,e))}var fr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=PN;let t=e;return t})();var _p=class extends Ce{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,xI()&&(this.destroyRef=T(sg,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Zf(s),i&&(i=Zf(i)),o&&(o=Zf(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Se&&e.add(a),a}};function Zf(t){return e=>{setTimeout(t,void 0,e)}}var Je=_p;function lD(t){return(t.flags&128)===128}var dD=new Map,ON=0;function kN(){return ON++}function FN(t){dD.set(t[gl],t)}function VN(t){dD.delete(t[gl])}var VE="__ngContext__";function ii(t,e){Jr(e)?(t[VE]=e[gl],FN(e)):t[VE]=e}function hD(t){return pD(t[Yo])}function fD(t){return pD(t[zt])}function pD(t){for(;t!==null&&!Vn(t);)t=t[zt];return t}var Ep;function gD(t){Ep=t}function LN(){if(Ep!==void 0)return Ep;if(typeof document<"u")return document;throw new j(210,!1)}var og=new x("",{providedIn:"root",factory:()=>jN}),jN="ng",ag=new x(""),it=new x("",{providedIn:"platform",factory:()=>"unknown"});var ug=new x("",{providedIn:"root",factory:()=>LN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var UN="h",BN="b";var $N=()=>null;function cg(t,e,n=!1){return $N(t,e,n)}var mD=!1,qN=new x("",{providedIn:"root",factory:()=>mD});var kc;function HN(){if(kc===void 0&&(kc=null,Zr.trustedTypes))try{kc=Zr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kc}function LE(t){return HN()?.createScriptURL(t)||t}var el=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nI})`}};function oa(t){return t instanceof el?t.changingThisBreaksApplicationSecurity:t}function lg(t,e){let n=zN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nI})`)}return n===e}function zN(t){return t instanceof el&&t.getTypeName()||null}var GN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yD(t){return t=String(t),t.match(GN)?t:"unsafe:"+t}var _l=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(_l||{});function WN(t){let e=wD();return e?e.sanitize(_l.URL,t)||"":lg(t,"URL")?oa(t):yD(dl(t))}function KN(t){let e=wD();if(e)return LE(e.sanitize(_l.RESOURCE_URL,t)||"");if(lg(t,"ResourceURL"))return LE(oa(t));throw new j(904,!1)}function QN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?KN:WN}function vD(t,e,n){return QN(e,n)(t)}function wD(){let t=me();return t&&t[Wt].sanitizer}function _D(t){return t instanceof Function?t():t}function YN(t){return(t??T(Ln)).get(it)==="browser"}var On=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(On||{}),ZN;function dg(t,e){return ZN(t,e)}function ls(t,e,n,r,i){if(r!=null){let s,o=!1;Vn(r)?s=r:Jr(r)&&(o=!0,r=r[Fn]);let a=hn(r);t===0&&n!==null?i==null?TD(e,n,a):tl(e,n,a,i||null,!0):t===1&&n!==null?tl(e,n,a,i||null,!0):t===2?pP(e,a,o):t===3&&e.destroyNode(a),s!=null&&mP(e,t,s,n,i)}}function JN(t,e){return t.createText(e)}function XN(t,e,n){t.setValue(e,n)}function ED(t,e,n){return t.createElement(e,n)}function eP(t,e){ID(t,e),e[Fn]=null,e[Qt]=null}function tP(t,e,n,r,i,s){r[Fn]=i,r[Qt]=e,El(t,r,n,1,i,s)}function ID(t,e){e[Wt].changeDetectionScheduler?.notify(1),El(t,e,e[Oe],2,null,null)}function nP(t){let e=t[Yo];if(!e)return Jf(t[te],t);for(;e;){let n=null;if(Jr(e))n=e[Yo];else{let r=e[Ot];r&&(n=r)}if(!n){for(;e&&!e[zt]&&e!==t;)Jr(e)&&Jf(e[te],e),e=e[et];e===null&&(e=t),Jr(e)&&Jf(e[te],e),n=e&&e[zt]}e=n}}function rP(t,e,n,r){let i=Ot+r,s=n.length;r>0&&(n[i-1][zt]=e),r<s-Ot?(e[zt]=n[i],fI(n,Ot+r,e)):(n.push(e),e[zt]=null),e[et]=n;let o=e[pl];o!==null&&n!==o&&iP(o,e);let a=e[ws];a!==null&&a.insertView(t),pp(e),e[$]|=128}function iP(t,e){let n=t[Qc],i=e[et][et][dn];e[dn]!==i&&(t[$]|=Kp.HasTransplantedViews),n===null?t[Qc]=[e]:n.push(e)}function DD(t,e){let n=t[Qc],r=n.indexOf(e);n.splice(r,1)}function Ip(t,e){if(t.length<=Ot)return;let n=Ot+e,r=t[n];if(r){let i=r[pl];i!==null&&i!==t&&DD(i,r),e>0&&(t[n-1][zt]=r[zt]);let s=zc(t,Ot+e);eP(r[te],r);let o=s[ws];o!==null&&o.detachView(s[te]),r[et]=null,r[zt]=null,r[$]&=-129}return r}function CD(t,e){if(!(e[$]&256)){let n=e[Oe];n.destroyNode&&El(t,e,n,3,null,null),nP(e)}}function Jf(t,e){if(e[$]&256)return;let n=oe(null);try{e[$]&=-129,e[$]|=256,e[ei]&&J_(e[ei]),oP(t,e),sP(t,e),e[te].type===1&&e[Oe].destroy();let r=e[pl];if(r!==null&&Vn(e[et])){r!==e[et]&&DD(r,e);let i=e[ws];i!==null&&i.detachView(t)}VN(e)}finally{oe(n)}}function sP(t,e){let n=t.cleanup,r=e[Qo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Qo]=null);let i=e[or];if(i!==null){e[or]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function oP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ri)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];un(4,a,u);try{u.call(a)}finally{un(5,a,u)}}else{un(4,i,s);try{s.call(i)}finally{un(5,i,s)}}}}}function aP(t,e,n){return uP(t,e.parent,n)}function uP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===ln.None||s===ln.Emulated)return null}return kt(r,n)}}function tl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function TD(t,e,n){t.appendChild(e,n)}function jE(t,e,n,r,i){r!==null?tl(t,e,n,r,i):TD(t,e,n)}function cP(t,e,n,r){t.removeChild(e,n,r)}function hg(t,e){return t.parentNode(e)}function lP(t,e){return t.nextSibling(e)}function dP(t,e,n){return fP(t,e,n)}function hP(t,e,n){return t.type&40?kt(t,n):null}var fP=hP,UE;function fg(t,e,n,r){let i=aP(t,r,e),s=e[Oe],o=r.parent||e[Qt],a=dP(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)jE(s,i,n[u],a,!1);else jE(s,i,n,a,!1);UE!==void 0&&UE(s,r,e,n,i)}function Bc(t,e){if(e!==null){let n=e.type;if(n&3)return kt(e,t);if(n&4)return Dp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Bc(t,r);{let i=t[e.index];return Vn(i)?Dp(-1,i):hn(i)}}else{if(n&32)return dg(e,t)()||hn(t[e.index]);{let r=bD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Jo(t[dn]);return Bc(i,r)}else return Bc(t,e.next)}}}return null}function bD(t,e){if(e!==null){let r=t[dn][Qt],i=e.projection;return r.projection[i]}return null}function Dp(t,e){let n=Ot+t+1;if(n<e.length){let r=e[n],i=r[te].firstChild;if(i!==null)return Bc(r,i)}return e[ti]}function pP(t,e,n){let r=hg(t,e);r&&cP(t,r,e,n)}function pg(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&ii(hn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)pg(t,e,n.child,r,i,s,!1),ls(e,t,i,a,s);else if(u&32){let c=dg(n,r),l;for(;l=c();)ls(e,t,i,l,s);ls(e,t,i,a,s)}else u&16?gP(t,e,r,n,i,s):ls(e,t,i,a,s);n=o?n.projectionNext:n.next}}function El(t,e,n,r,i,s){pg(n,r,t.firstChild,e,i,s,!1)}function gP(t,e,n,r,i,s){let o=n[dn],u=o[Qt].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];ls(e,t,i,l,s)}else{let c=u,l=o[et];lD(r)&&(c.flags|=128),pg(t,e,c,l,i,s,!0)}}function mP(t,e,n,r,i){let s=n[ti],o=hn(n);s!==o&&ls(e,t,r,s,i);for(let a=Ot;a<n.length;a++){let u=n[a];El(u[te],u,t,e,r,s)}}function yP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:On.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=On.Important),t.setStyle(n,r,i,s))}}function vP(t,e,n){t.setAttribute(e,"style",n)}function AD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function SD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&cp(t,e,r),i!==null&&AD(t,e,i),s!==null&&vP(t,e,s)}var ui={};function P9(t=1){MD(Et(),me(),Ts()+t,!1)}function MD(t,e,n,r){if(!r)if((e[$]&3)===3){let s=t.preOrderCheckHooks;s!==null&&jc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Uc(e,s,0,n)}ni(n)}function le(t,e=Z.Default){let n=me();if(n===null)return D(t,e);let r=It();return sD(r,n,ht(t),e)}function xD(){let t="invalid";throw new Error(t)}function RD(t,e,n,r,i,s){let o=oe(null);try{let a=null;i&Xe.SignalBased&&(a=e[r][Ef]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Xe.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):OI(e,a,r,s)}finally{oe(o)}}function wP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ni(~i);else{let s=i,o=n[++r],a=n[++r];lN(o,s);let u=e[s];a(2,u)}}}finally{ni(-1)}}function Il(t,e,n,r,i,s,o,a,u,c,l){let d=e.blueprint.slice();return d[Fn]=i,d[$]=r|4|128|8|64,(c!==null||t&&t[$]&2048)&&(d[$]|=2048),UI(d),d[et]=d[Cs]=t,d[Gt]=n,d[Wt]=o||t&&t[Wt],d[Oe]=a||t&&t[Oe],d[vs]=u||t&&t[vs]||null,d[Qt]=s,d[gl]=kN(),d[Wc]=l,d[RI]=c,d[dn]=e.type==2?t[dn]:d,d}function Dl(t,e,n,r,i){let s=t.data[e];if(s===null)s=_P(t,e,n,r,i),cN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=sN();s.injectorIndex=o===null?-1:o.injectorIndex}return sa(s,!0),s}function _P(t,e,n,r,i){let s=qI(),o=HI(),a=o?s:s&&s.parent,u=t.data[e]=TP(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function ND(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function PD(t,e,n,r,i){let s=Ts(),o=r&2;try{ni(-1),o&&e.length>ur&&MD(t,e,ur,!1),un(o?2:0,i),n(r,i)}finally{ni(s),un(o?3:1,i)}}function OD(t,e,n){if(PI(e)){let r=oe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{oe(r)}}}function kD(t,e,n){$I()&&(RP(t,e,n,kt(n,e)),(n.flags&64)===64&&UD(t,e,n))}function FD(t,e,n=kt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function VD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=gg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gg(t,e,n,r,i,s,o,a,u,c,l){let d=ur+r,h=d+i,f=EP(d,h),v=typeof c=="function"?c():c;return f[te]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1,ssrId:l}}function EP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ui);return n}function IP(t,e,n,r){let s=r.get(qN,mD)||n===ln.ShadowDom,o=t.selectRootElement(e,s);return DP(o),o}function DP(t){CP(t)}var CP=()=>null;function TP(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return nN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function BE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Xe.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let c=s;if(i!==null){if(!i.hasOwnProperty(s))continue;c=i[s]}t===0?$E(r,n,c,a,u):$E(r,n,c,a)}return r}function $E(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function bP(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,v=h?h.outputs:null;u=BE(0,d.inputs,l,u,f),c=BE(1,d.outputs,l,c,v);let w=u!==null&&o!==null&&!zp(e)?$P(u,l,o):null;a.push(w)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function AP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function mg(t,e,n,r,i,s,o,a){let u=kt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(yg(t,n,l,r,i),ml(e)&&SP(n,e.index)):e.type&3?(r=AP(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function SP(t,e){let n=hr(e,t);n[$]&16||(n[$]|=64)}function LD(t,e,n,r){if($I()){let i=r===null?null:{"":-1},s=PP(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&jD(t,e,n,o,i,a),i&&OP(n,r,i)}n.mergedAttrs=Wo(n.mergedAttrs,n.attrs)}function jD(t,e,n,r,i,s){for(let c=0;c<r.length;c++)yp(Xc(n,e),t,r[c].type);FP(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=ND(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=Wo(n.mergedAttrs,l.hostAttrs),VP(t,n,e,u,l),kP(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}bP(t,n,s)}function MP(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;xP(o)!=a&&o.push(a),o.push(n,r,s)}}function xP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function RP(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ml(n)&&LP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Xc(n,e),ii(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],c=_s(e,t,a,n);if(ii(c,e),o!==null&&BP(e,a-i,c,u,n,o),cr(u)){let l=hr(n.index,e);l[Gt]=_s(e,t,a,n)}}}function UD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=dN();try{ni(s);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];gp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&NP(u,c)}}finally{ni(-1),gp(o)}}function NP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function PP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(wR(e,o.selectors,!1))if(r||(r=[]),cr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Cp(t,e,u)}else r.unshift(o),Cp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Cp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function OP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function kP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;cr(e)&&(n[""]=t)}}function FP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function VP(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ps(i.type,!0)),o=new ri(s,cr(i),le);t.blueprint[r]=o,n[r]=o,MP(t,e,r,ND(t,n,i.hostVars,ui),i)}function LP(t,e,n){let r=kt(e,t),i=VD(n),s=t[Wt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Cl(t,Il(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function jP(t,e,n,r,i,s){let o=kt(t,e);UP(e[Oe],o,s,t.value,n,r,i)}function UP(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?dl(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function BP(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],c=o[a++],l=o[a++],d=o[a++];RD(r,n,u,c,l,d)}}function $P(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function BD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function $D(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];zI(s),a.contentQueries(2,e[o],o)}}}finally{oe(r)}}}function Cl(t,e){return t[Yo]?t[xE][zt]=e:t[Yo]=e,t[xE]=e,e}function Tp(t,e,n){zI(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function qP(t){return t[Qo]||(t[Qo]=[])}function HP(t){return t.cleanup||(t.cleanup=[])}function qD(t,e){let n=t[vs],r=n?n.get(fn,null):null;r&&r.handleError(e)}function yg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],c=e[o],l=t.data[o];RD(l,c,r,a,u,i)}}function zP(t,e,n){let r=LI(e,t);XN(t[Oe],r,n)}function GP(t,e){let n=hr(e,t),r=n[te];WP(r,n);let i=n[Fn];i!==null&&n[Wc]===null&&(n[Wc]=cg(i,n[vs])),vg(r,n,n[Gt])}function WP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function vg(t,e,n){Jp(e);try{let r=t.viewQuery;r!==null&&Tp(1,r,n);let i=t.template;i!==null&&PD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ws]?.finishViewCreation(t),t.staticContentQueries&&$D(t,e),t.staticViewQueries&&Tp(2,t.viewQuery,n);let s=t.components;s!==null&&KP(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,Xp()}}function KP(t,e){for(let n=0;n<e.length;n++)GP(t,e[n])}function QP(t,e,n,r){let i=oe(null);try{let s=e.tView,a=t[$]&4096?4096:16,u=Il(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];u[pl]=c;let l=t[ws];return l!==null&&(u[ws]=l.createEmbeddedView(s)),vg(s,u,n),u}finally{oe(i)}}function qE(t,e){return!e||e.firstChild===null||lD(t)}function YP(t,e,n,r=!0){let i=e[te];if(rP(i,e,t,n),r){let o=Dp(n,t),a=e[Oe],u=hg(a,t[ti]);u!==null&&tP(i,t[Qt],a,e,u,o)}let s=e[Wc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function nl(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(hn(s)),Vn(s)&&ZP(s,r);let o=n.type;if(o&8)nl(t,e,n.child,r);else if(o&32){let a=dg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=bD(e,n);if(Array.isArray(a))r.push(...a);else{let u=Jo(e[dn]);nl(u[te],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ZP(t,e){for(let n=Ot;n<t.length;n++){let r=t[n],i=r[te].firstChild;i!==null&&nl(r[te],r,i,e)}t[ti]!==t[Fn]&&e.push(t[ti])}var HD=[];function JP(t){return t[ei]??XP(t)}function XP(t){let e=HD.pop()??Object.create(tO);return e.lView=t,e}function eO(t){t.lView[ei]!==t&&(t.lView=null,HD.push(t))}var tO=ce(M({},Q_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Zo(t.lView)},consumerOnSignalRead(){this.lView[ei]=this}}),zD=100;function GD(t,e=!0,n=0){let r=t[Wt],i=r.rendererFactory,s=!1;s||i.begin?.();try{nO(t,n)}catch(o){throw e&&qD(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function nO(t,e){bp(t,e);let n=0;for(;Zp(t);){if(n===zD)throw new j(103,!1);n++,bp(t,1)}}function rO(t,e,n,r){let i=e[$];if((i&256)===256)return;let s=!1;!s&&e[Wt].inlineEffectRunner?.flush(),Jp(e);let o=null,a=null;!s&&iO(t)&&(a=JP(e),o=Y_(a));try{UI(e),aN(t.bindingStartIndex),n!==null&&PD(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let d=t.preOrderCheckHooks;d!==null&&jc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Uc(e,d,0,null),Kf(e,0)}if(sO(e),WD(e,0),t.contentQueries!==null&&$D(t,e),!s)if(u){let d=t.contentCheckHooks;d!==null&&jc(e,d)}else{let d=t.contentHooks;d!==null&&Uc(e,d,1),Kf(e,1)}wP(t,e);let c=t.components;c!==null&&QD(e,c,0);let l=t.viewQuery;if(l!==null&&Tp(2,l,r),!s)if(u){let d=t.viewCheckHooks;d!==null&&jc(e,d)}else{let d=t.viewHooks;d!==null&&Uc(e,d,2),Kf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Wf]){for(let d of e[Wf])d();e[Wf]=null}s||(e[$]&=-73)}catch(u){throw Zo(e),u}finally{a!==null&&(Z_(a,o),eO(a)),Xp()}}function iO(t){return t.type!==2}function WD(t,e){for(let n=hD(t);n!==null;n=fD(n))for(let r=Ot;r<n.length;r++){let i=n[r];KD(i,e)}}function sO(t){for(let e=hD(t);e!==null;e=fD(e)){if(!(e[$]&Kp.HasTransplantedViews))continue;let n=e[Qc];for(let r=0;r<n.length;r++){let i=n[r],s=i[et];YR(i)}}}function oO(t,e,n){let r=hr(e,t);KD(r,n)}function KD(t,e){Yp(t)&&bp(t,e)}function bp(t,e){let r=t[te],i=t[$],s=t[ei],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&If(s)),s&&(s.dirty=!1),t[$]&=-9217,o)rO(r,t,r.template,t[Gt]);else if(i&8192){WD(t,1);let a=r.components;a!==null&&QD(t,a,1)}}function QD(t,e,n){for(let r=0;r<e.length;r++)oO(t,e[r],n)}function wg(t){for(t[Wt].changeDetectionScheduler?.notify();t;){t[$]|=64;let e=Jo(t);if(BR(t)&&!e)return t;t=e}return null}var si=class{get rootNodes(){let e=this._lView,n=e[te];return nl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gt]}set context(e){this._lView[Gt]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[et];if(Vn(e)){let n=e[Kc],r=n?n.indexOf(this):-1;r>-1&&(Ip(e,r),zc(n,r))}this._attachedToViewContainer=!1}CD(this._lView[te],this._lView)}onDestroy(e){BI(this._lView,e)}markForCheck(){wg(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){pp(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,GD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ID(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e,pp(this._lView)}},_g=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cO;let t=e;return t})(),aO=_g,uO=class extends aO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=QP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new si(i)}};function cO(){return lO(It(),me())}function lO(t,e){return t.type&4?new uO(e,t,wl(t,e)):null}var k9=new RegExp(`^(\\d+)*(${BN}|${UN})*(.*)`);var dO=()=>null;function HE(t,e){return dO(t,e)}var rl=class{},Ap=class{},il=class{};function hO(t){let e=Error(`No component factory found for ${ft(t)}.`);return e[fO]=t,e}var fO="ngComponent";var Sp=class{resolveComponentFactory(e){throw hO(e)}},Tl=(()=>{let e=class e{};e.NULL=new Sp;let t=e;return t})(),Xo=class{},ci=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>pO();let t=e;return t})();function pO(){let t=me(),e=It(),n=hr(e.index,t);return(Jr(n)?n:t)[Oe]}var gO=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Xf={};var zE=new Set;function bl(t){zE.has(t)||(zE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function GE(...t){}function mO(){let t=typeof Zr.requestAnimationFrame=="function",e=Zr[t?"requestAnimationFrame":"setTimeout"],n=Zr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var se=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=mO().nativeRequestAnimationFrame,wO(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,yO,GE,GE);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},yO={};function Eg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vO(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Zr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Mp(t),t.isCheckStableRunning=!0,Eg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Mp(t))}function wO(t){let e=()=>{vO(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(_O(a))return n.invokeTask(i,s,o,a);try{return WE(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),KE(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return WE(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),KE(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Mp(t),Eg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Mp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function WE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function KE(t){t._nesting--,Eg(t)}function _O(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var ds=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ds||{}),EO={destroy(){}};function Ig(t,e){!e&&jR(Ig);let n=e?.injector??T(Ln);if(!YN(n))return EO;bl("NgAfterNextRender");let r=n.get(Dg),i=r.handler??=new Rp,s=e?.phase??ds.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(sg).onDestroy(o),u=Kt(n,()=>new xp(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var xp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=T(se),this.errorHandler=T(fn,{optional:!0}),T(rl,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Rp=class{constructor(){this.executingCallbacks=!1,this.buckets={[ds.EarlyRead]:new Set,[ds.Write]:new Set,[ds.MixedReadWrite]:new Set,[ds.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Dg=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Np(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=_E(i,a);else if(s==2){let u=a,c=e[++o];r=_E(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var sl=class extends Tl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ar(e);return new Es(n,this.ngModule)}};function QE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function IO(t){let e=t.toLowerCase();return e==="svg"?zR:e==="math"?GR:null}var Pp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=hl(r);let i=this.injector.get(e,Xf,r);return i!==Xf||n===Xf?i:this.parentInjector.get(e,n,r)}},Es=class extends il{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=QE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return QE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=DR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=oe(null);try{i=i||this.ngModule;let o=i instanceof pt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Pp(e,o):e,u=a.get(Xo,null);if(u===null)throw new j(407,!1);let c=a.get(gO,null),l=a.get(Dg,null),d=a.get(rl,null),h={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?IP(f,r,this.componentDef.encapsulation,a):ED(f,v,IO(v)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let E=null;w!==null&&(E=cg(w,a,!0));let P=gg(0,null,null,1,0,null,null,null,null,null,null),C=Il(null,P,null,m,null,null,h,f,a,null,E);Jp(C);let N,U;try{let B=this.componentDef,ue,wt=null;B.findHostDirectiveDefs?(ue=[],wt=new Map,B.findHostDirectiveDefs(B,ue,wt),ue.push(B)):ue=[B];let gf=DO(C,w),rc=CO(gf,w,B,ue,C,h,f);U=jI(P,ur),w&&AO(f,B,w,r),n!==void 0&&SO(U,this.ngContentSelectors,n),N=bO(rc,B,ue,wt,C,[MO]),vg(P,C,null)}finally{Xp()}return new Op(this.componentType,N,wl(U,C),C,U)}finally{oe(s)}}},Op=class extends Ap{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new si(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;yg(s[te],s,i,e,n),this.previousInputValues.set(e,n);let o=hr(this._tNode.index,s);wg(o)}}get injector(){return new Xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function DO(t,e){let n=t[te],r=ur;return t[r]=e,Dl(n,r,2,"#host",null)}function CO(t,e,n,r,i,s,o){let a=i[te];TO(r,t,e,o);let u=null;e!==null&&(u=cg(e,i[vs]));let c=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Il(i,VD(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&Cp(a,t,r.length-1),Cl(i,d),i[t.index]=d}function TO(t,e,n,r){for(let i of t)e.mergedAttrs=Wo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Np(e,e.mergedAttrs,!0),n!==null&&SD(r,n,e))}function bO(t,e,n,r,i,s){let o=It(),a=i[te],u=kt(o,i);jD(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=_s(i,a,d,o);ii(h,i)}UD(a,i,o),u&&ii(u,i);let c=_s(i,a,o.directiveStart+o.componentOffset,o);if(t[Gt]=i[Gt]=c,s!==null)for(let l of s)l(c,e);return OD(a,o,i),c}function AO(t,e,n,r){if(r)cp(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:s}=CR(e.selectors[0]);i&&cp(t,n,i),s&&s.length>0&&AD(t,n,s.join(" "))}}function SO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function MO(){let t=It();ng(me()[te],t)}var aa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xO;let t=e;return t})();function xO(){let t=It();return NO(t,me())}var RO=aa,YD=class extends RO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return wl(this._hostTNode,this._hostLView)}get injector(){return new Xr(this._hostTNode,this._hostLView)}get parentInjector(){let e=rg(this._hostTNode,this._hostLView);if(XI(e)){let n=Jc(e,this._hostLView),r=Zc(e),i=n[te].data[r+8];return new Xr(i,n)}else return new Xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=YE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=HE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,qE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!UR(e),a;if(o)a=n;else{let v=n||{};a=v.index,r=v.injector,i=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef}let u=o?e:new Es(ar(e)),c=r||this.parentInjector;if(!s&&u.ngModule==null){let w=(o?c:this.parentInjector).get(pt,null);w&&(s=w)}let l=ar(u.componentType??{}),d=HE(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,s);return this.insertImpl(f.hostView,a,qE(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(QR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[et],c=new YD(u,u[Qt],u[et]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return YP(o,i,s,r),e.attachToViewContainerRef(),fI(ep(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=YE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ip(this._lContainer,n);r&&(zc(ep(this._lContainer),n),CD(r[te],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ip(this._lContainer,n);return r&&zc(ep(this._lContainer),n)!=null?new si(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function YE(t){return t[Kc]}function ep(t){return t[Kc]||(t[Kc]=[])}function NO(t,e){let n,r=e[t.index];return Vn(r)?n=r:(n=BD(r,e,null,t),e[t.index]=n,Cl(e,n)),OO(n,e,t,r),new YD(n,t,e)}function PO(t,e){let n=t[Oe],r=n.createComment(""),i=kt(e,t),s=hg(n,i);return tl(n,s,r,lP(n,i),!1),r}var OO=VO,kO=()=>!1;function FO(t,e,n){return kO(t,e,n)}function VO(t,e,n,r){if(t[ti])return;let i;n.type&8?i=hn(r):i=PO(e,n),t[ti]=i}function LO(t){return typeof t=="function"&&t[Ef]!==void 0}function ZD(t){return LO(t)&&typeof t.set=="function"}function jO(t){return Object.getPrototypeOf(t.prototype).constructor}function jn(t){let e=jO(t.type),n=!0,r=[t];for(;e;){let i;if(cr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Fc(t.inputs),o.inputTransforms=Fc(t.inputTransforms),o.declaredInputs=Fc(t.declaredInputs),o.outputs=Fc(t.outputs);let a=i.hostBindings;a&&HO(t,a);let u=i.viewQuery,c=i.contentQueries;if(u&&$O(t,u),c&&qO(t,c),UO(t,i),zx(t.outputs,i.outputs),cr(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===jn&&(n=!1)}}e=Object.getPrototypeOf(e)}BO(r)}function UO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function BO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wo(i.hostAttrs,n=Wo(n,i.hostAttrs))}}function Fc(t){return t===gs?{}:t===Pt?[]:t}function $O(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function qO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function HO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Cg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var lr=class{},ea=class{};var kp=class extends lr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sl(this);let i=DI(e);this._bootstrapComponents=_D(i.bootstrap),this._r3Injector=uD(e,n,[{provide:lr,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Fp=class extends ea{constructor(e){super(),this.moduleType=e}create(e){return new kp(this.moduleType,e,[])}};var ol=class extends lr{constructor(e){super(),this.componentFactoryResolver=new sl(this),this.instance=null;let n=new Ko([...e.providers,{provide:lr,useValue:this},{provide:Tl,useValue:this.componentFactoryResolver}],e.parent||Wp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Al(t,e,n=null){return new ol({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var li=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ua(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function zO(t){return(t.flags&32)===32}function GO(t,e,n,r,i,s,o,a,u){let c=e.consts,l=Dl(e,t,4,o||null,Yc(c,a));LD(e,n,l,Yc(c,u)),ng(e,l);let d=l.tView=gg(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function WO(t,e,n,r,i,s,o,a){let u=me(),c=Et(),l=t+ur,d=c.firstCreatePass?GO(l,c,u,e,n,r,i,s,o):c.data[l];sa(d,!1);let h=KO(c,u,d,t);eg()&&fg(c,u,h,d),ii(h,u);let f=BD(h,u,h,d);return u[l]=f,Cl(u,f),FO(f,d,u),Qp(d)&&kD(c,u,d),o!=null&&FD(u,d,a),WO}var KO=QO;function QO(t,e,n,r){return tg(!0),e[Oe].createComment("")}function ca(t,e,n,r){let i=me(),s=yl();if(ua(i,s,e)){let o=Et(),a=vl();jP(a,i,t,e,n,r)}return ca}function JD(t,e,n,r){return ua(t,yl(),n)?e+dl(n)+r:ui}function Vc(t,e){return t<<17|e<<2}function oi(t){return t>>17&32767}function YO(t){return(t&2)==2}function ZO(t,e){return t&131071|e<<17}function Vp(t){return t|2}function Is(t){return(t&131068)>>2}function tp(t,e){return t&-131069|e<<2}function JO(t){return(t&1)===1}function Lp(t){return t|1}function XO(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=oi(o),u=Is(o);t[r]=n;let c=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||ia(d,l)>0)&&(c=!0)}else l=n;if(i)if(u!==0){let h=oi(t[a+1]);t[r+1]=Vc(h,a),h!==0&&(t[h+1]=tp(t[h+1],r)),t[a+1]=ZO(t[a+1],r)}else t[r+1]=Vc(a,0),a!==0&&(t[a+1]=tp(t[a+1],r)),a=r;else t[r+1]=Vc(u,0),a===0?a=r:t[u+1]=tp(t[u+1],r),u=r;c&&(t[r+1]=Vp(t[r+1])),ZE(t,l,r,!0),ZE(t,l,r,!1),ek(e,l,t,r,s),o=Vc(a,u),s?e.classBindings=o:e.styleBindings=o}function ek(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ia(s,e)>=0&&(n[r+1]=Lp(n[r+1]))}function ZE(t,e,n,r){let i=t[n+1],s=e===null,o=r?oi(i):Is(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],c=t[o+1];tk(u,e)&&(a=!0,t[o+1]=r?Lp(c):Vp(c)),o=r?oi(c):Is(c)}a&&(t[n+1]=r?Vp(i):Lp(i))}function tk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ia(t,e)>=0:!1}function nk(t,e,n){let r=me(),i=yl();if(ua(r,i,e)){let s=Et(),o=vl();mg(s,o,r,t,e,r[Oe],n,!1)}return nk}function JE(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";yg(t,n,s[o],o,r)}function Sl(t,e){return rk(t,e,null,!0),Sl}function rk(t,e,n,r){let i=me(),s=Et(),o=uN(2);if(s.firstUpdatePass&&sk(s,t,o,r),e!==ui&&ua(i,o,e)){let a=s.data[Ts()];lk(s,a,i,i[Oe],t,i[o+1]=dk(e,n),r,o)}}function ik(t,e){return e>=t.expandoStartIndex}function sk(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ts()],o=ik(t,n);hk(s,r)&&e===null&&!o&&(e=!1),e=ok(i,s,e,r),XO(i,s,e,n,o,r)}}function ok(t,e,n,r){let i=hN(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=np(null,t,e,n,r),n=ta(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=np(i,t,e,n,r),s===null){let u=ak(t,e,r);u!==void 0&&Array.isArray(u)&&(u=np(null,t,e,u[1],r),u=ta(u,e.attrs,r),uk(t,e,r,u))}else s=ck(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function ak(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Is(r)!==0)return t[oi(r)]}function uk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[oi(i)]=r}function ck(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ta(r,o,n)}return ta(r,e.attrs,n)}function np(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ta(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ta(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),dR(t,o,n?!0:e[++s]))}return t===void 0?null:t}function lk(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,c=u[a+1],l=JO(c)?XE(u,e,n,i,Is(c),o):void 0;if(!al(l)){al(s)||YO(c)&&(s=XE(u,null,n,i,a,o));let d=LI(Ts(),n);yP(r,o,d,i,s)}}function XE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=l===null,h=n[i+1];h===ui&&(h=d?Pt:void 0);let f=d?zf(h,r):l===r?h:void 0;if(c&&!al(f)&&(f=zf(u,r)),al(f)&&(a=f,o))return a;let v=t[i+1];i=o?oi(v):Is(v)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=zf(u,r))}return a}function al(t){return t!==void 0}function dk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ft(oa(t)))),t}function hk(t,e){return(t.flags&(e?8:16))!==0}function fk(t,e,n,r,i,s){let o=e.consts,a=Yc(o,i),u=Dl(e,t,2,r,a);return LD(e,n,u,Yc(o,s)),u.attrs!==null&&Np(u,u.attrs,!1),u.mergedAttrs!==null&&Np(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function XD(t,e,n,r){let i=me(),s=Et(),o=ur+t,a=i[Oe],u=s.firstCreatePass?fk(o,s,i,e,n,r):s.data[o],c=pk(s,i,u,a,e,t);i[o]=c;let l=Qp(u);return sa(u,!0),SD(a,c,u),!zO(u)&&eg()&&fg(s,i,c,u),XR()===0&&ii(c,i),eN(),l&&(kD(s,i,u),OD(s,u,i)),r!==null&&FD(i,u),XD}function eC(){let t=It();HI()?oN():(t=t.parent,sa(t,!1));let e=t;rN(e)&&iN(),tN();let n=Et();return n.firstCreatePass&&(ng(n,t),PI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&wN(e)&&JE(n,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&_N(e)&&JE(n,e,me(),e.stylesWithoutHost,!1),eC}function Tg(t,e,n,r){return XD(t,e,n,r),eC(),Tg}var pk=(t,e,n,r,i,s)=>(tg(!0),ED(r,i,gN()));function V9(){return me()}var ul="en-US";var gk=ul;function mk(t){typeof t=="string"&&(gk=t.toLowerCase().replace(/_/g,"-"))}function As(t,e,n,r){let i=me(),s=Et(),o=It();return tC(s,i,i[Oe],o,t,e,r),As}function yk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Qo],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function tC(t,e,n,r,i,s,o){let a=Qp(r),c=t.firstCreatePass&&HP(t),l=e[Gt],d=qP(e),h=!0;if(r.type&3||o){let w=kt(r,e),m=o?o(w):w,E=d.length,P=o?N=>o(hn(N[r.index])):r.index,C=null;if(!o&&a&&(C=yk(t,e,i,r.index)),C!==null){let N=C.__ngLastListenerFn__||C;N.__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,h=!1}else{s=tI(r,e,l,s,!1);let N=n.listen(m,i,s);d.push(s,N),c&&c.push(i,P,E,E+1)}}else s=tI(r,e,l,s,!1);let f=r.outputs,v;if(h&&f!==null&&(v=f[i])){let w=v.length;if(w)for(let m=0;m<w;m+=2){let E=v[m],P=v[m+1],U=e[E][P].subscribe(s),B=d.length;d.push(s,U),c&&c.push(i,r.index,B,-(B+1))}}}function eI(t,e,n,r){let i=oe(null);try{return un(6,e,n),n(r)!==!1}catch(s){return qD(t,s),!1}finally{un(7,e,n),oe(i)}}function tI(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?hr(t.index,e):e;wg(a);let u=eI(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=eI(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function L9(t=1){return pN(t)}function vk(t,e,n){return nC(t,"",e,"",n),vk}function nC(t,e,n,r,i){let s=me(),o=JD(s,e,n,r);if(o!==ui){let a=Et(),u=vl();mg(a,u,s,t,o,s[Oe],i,!1)}return nC}function j9(t,e=""){let n=me(),r=Et(),i=t+ur,s=r.firstCreatePass?Dl(r,i,1,e,null):r.data[i],o=wk(r,n,s,e,t);n[i]=o,eg()&&fg(r,n,o,s),sa(s,!1)}var wk=(t,e,n,r,i)=>(tg(!0),JN(e[Oe],r));function _k(t){return rC("",t,""),_k}function rC(t,e,n){let r=me(),i=JD(r,t,e,n);return i!==ui&&zP(r,Ts(),i),rC}function Ek(t,e,n){ZD(e)&&(e=e());let r=me(),i=yl();if(ua(r,i,e)){let s=Et(),o=vl();mg(s,o,r,t,e,r[Oe],n,!1)}return Ek}function U9(t,e){let n=ZD(t);return n&&t.set(e),n}function Ik(t,e){let n=me(),r=Et(),i=It();return tC(r,n,n[Oe],i,t,e),Ik}function Dk(t,e,n){let r=Et();if(r.firstCreatePass){let i=cr(t);jp(n,r.data,r.blueprint,i,!0),jp(e,r.data,r.blueprint,i,!1)}}function jp(t,e,n,r,i){if(t=ht(t),Array.isArray(t))for(let s=0;s<t.length;s++)jp(t[s],e,n,r,i);else{let s=Et(),o=me(),a=It(),u=ys(t)?t:ht(t.provide),c=MI(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ys(t)||!t.multi){let f=new ri(c,i,le),v=ip(u,e,i?l:l+h,d);v===-1?(yp(Xc(a,o),s,u),rp(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[v]=f,o[v]=f)}else{let f=ip(u,e,l+h,d),v=ip(u,e,l,l+h),w=f>=0&&n[f],m=v>=0&&n[v];if(i&&!m||!i&&!w){yp(Xc(a,o),s,u);let E=bk(i?Tk:Ck,n.length,i,r,c);!i&&m&&(n[v].providerFactory=E),rp(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=iC(n[i?v:f],c,!i&&r);rp(s,t,f>-1?f:v,E)}!i&&r&&m&&n[v].componentProviders++}}}function rp(t,e,n,r){let i=ys(e),s=NR(e);if(i||s){let u=(s?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=c.indexOf(n);l===-1?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function iC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ip(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ck(t,e,n,r){return Up(this.multi,[])}function Tk(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=_s(n,n[te],this.providerFactory.index,r);s=a.slice(0,o),Up(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Up(i,s);return s}function Up(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function bk(t,e,n,r,i){let s=new ri(t,n,le);return s.multi=[],s.index=e,s.componentProviders=0,iC(s,i,r&&!n),s}function la(t,e=[]){return n=>{n.providersResolver=(r,i)=>Dk(r,i?i(t):t,e)}}var Ak=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=bI(!1,r.type),s=i.length>0?Al([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(D(pt))});let t=e;return t})();function sC(t){bl("NgStandalone"),t.getStandaloneInjector=e=>e.get(Ak).getOrCreateStandaloneInjector(t)}var kn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},oC=new kn("17.3.5"),Ml=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var aC=new x("");function di(t){return!!t&&typeof t.then=="function"}function uC(t){return!!t&&typeof t.subscribe=="function"}var xl=new x(""),cC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=T(xl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(di(o))r.push(o);else if(uC(o)){let a=new Promise((u,c)=>{o.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),da=new x("");function Sk(){X_(()=>{throw new j(600,!1)})}function Mk(t){return t.isBoundToModule}function xk(t,e,n){try{let r=n();return di(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ss=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=T(cD),this.afterRenderEffectManager=T(Dg),this.externalTestViews=new Set,this.beforeRender=new Ce,this.afterTick=new Ce,this.componentTypes=[],this.components=[],this.isStable=T(li).hasPendingTasks.pipe(V(r=>!r)),this._injector=T(pt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof il;if(!this._injector.get(cC).done){let f=!s&&II(r),v=!1;throw new j(405,v)}let a;s?a=r:a=this._injector.get(Tl).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=Mk(a)?void 0:this._injector.get(lr),c=i||a.selector,l=a.create(Ln.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(aC,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),sp(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new j(101,!1);let i=oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,oe(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===zD)throw new j(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)Rk(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Bp(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Bp(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;sp(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(da,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>sp(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sp(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Rk(t,e,n){!e&&!Bp(t)||Nk(t,n,e)}function Bp(t){return Zp(t)}function Nk(t,e,n){let r;n?(r=0,t[$]|=1024):t[$]&64?r=0:r=1,GD(t,e,r)}var $p=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Rl=(()=>{let e=class e{compileModuleSync(r){return new Fp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=DI(r),o=_D(s.declarations).reduce((a,u)=>{let c=ar(u);return c&&a.push(new Es(c)),a},[]);return new $p(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Pk=(()=>{let e=class e{constructor(){this.zone=T(se),this.applicationRef=T(Ss)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ok(t){return[{provide:se,useFactory:t},{provide:ms,multi:!0,useFactory:()=>{let e=T(Pk,{optional:!0});return()=>e.initialize()}},{provide:ms,multi:!0,useFactory:()=>{let e=T(Lk);return()=>{e.initialize()}}},{provide:cD,useFactory:kk}]}function kk(){let t=T(se),e=T(fn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Fk(t){let e=Ok(()=>new se(Vk(t)));return Ds([[],e])}function Vk(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Lk=(()=>{let e=class e{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=T(se),this.pendingTasks=T(li)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jk(){return typeof $localize<"u"&&$localize.locale||ul}var bg=new x("",{providedIn:"root",factory:()=>T(bg,Z.Optional|Z.SkipSelf)||jk()});var lC=new x("");var $c=null;function Uk(t=[],e){return Ln.create({name:e,providers:[{provide:fl,useValue:"platform"},{provide:lC,useValue:new Set([()=>$c=null])},...t]})}function Bk(t=[]){if($c)return $c;let e=Uk(t);return $c=e,Sk(),$k(e),e}function $k(t){t.get(ag,null)?.forEach(n=>n())}function Ag(){return!1}var hi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qk;let t=e;return t})();function qk(t){return Hk(It(),me(),(t&16)===16)}function Hk(t,e,n){if(ml(t)&&!n){let r=hr(t.index,e);return new si(r,r)}else if(t.type&47){let r=e[dn];return new si(r,e)}return null}function dC(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Bk(r),s=[Fk(),...n||[]],a=new ol({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(se);return u.run(()=>{a.resolveInjectorInitializers();let c=a.get(fn,null),l;u.runOutsideAngular(()=>{l=u.onError.subscribe({next:f=>{c.handleError(f)}})});let d=()=>a.destroy(),h=i.get(lC);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),xk(c,u,()=>{let f=a.get(cC);return f.runInitializers(),f.donePromise.then(()=>{let v=a.get(bg,ul);mk(v||ul);let w=a.get(Ss);return e!==void 0&&w.bootstrap(e),w})})})}catch(e){return Promise.reject(e)}}function pr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function hC(t){let e=ar(t);if(!e)return null;let n=new Es(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var mC=null;function Bn(){return mC}function yC(t){mC??=t}var Nl=class{};var st=new x(""),Rg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>T(zk),providedIn:"platform"});let t=e;return t})(),vC=new x(""),zk=(()=>{let e=class e extends Rg{constructor(){super(),this._doc=T(st),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bn().getBaseHref(this._doc)}onPopState(r){let i=Bn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Bn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Ng(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function fC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Un(t){return t&&t[0]!=="?"?"?"+t:t}var $n=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>T(Pg),providedIn:"root"});let t=e;return t})(),wC=new x(""),Pg=(()=>{let e=class e extends $n{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??T(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Ng(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Un(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Un(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Un(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Rg),D(wC,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_C=(()=>{let e=class e extends $n{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Ng(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Un(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Un(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Rg),D(wC,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),xs=(()=>{let e=class e{constructor(r){this._subject=new Je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Kk(fC(pC(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Un(i))}normalize(r){return e.stripTrailingSlash(Wk(this._basePath,pC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Un(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Un(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Un,e.joinWithSlash=Ng,e.stripTrailingSlash=fC,e.\u0275fac=function(i){return new(i||e)(D($n))},e.\u0275prov=O({token:e,factory:()=>Gk(),providedIn:"root"});let t=e;return t})();function Gk(){return new xs(D($n))}function Wk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function pC(t){return t.replace(/\/index.html$/,"")}function Kk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Pl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var f3=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Sg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){gC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){gC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(le(aa),le(_g))},e.\u0275dir=rt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Sg=class{constructor(){this.$implicit=null,this.ngIf=null}};function gC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ft(e)}'.`)}var Qk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({});let t=e;return t})(),Og="browser",Yk="server";function Zk(t){return t===Og}function gr(t){return t===Yk}var EC=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>Zk(T(it))?new Mg(T(st),window):new xg});let t=e;return t})(),Mg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=Jk(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function Jk(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var xg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ms=class{};var fa=class{},kl=class{},fi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Fg=class{encodeKey(e){return DC(e)}encodeValue(e){return DC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function tF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var nF=/%(\d[a-f0-9])/gi,rF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function DC(t){return encodeURIComponent(t).replace(nF,(e,n)=>rF[n]??e)}function Ol(t){return`${t}`}var mr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Fg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=tF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Ol):[Ol(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ol(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ol(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Vg=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function iF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function CC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function TC(t){return typeof Blob<"u"&&t instanceof Blob}function bC(t){return typeof FormData<"u"&&t instanceof FormData}function sF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ha=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(iF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new fi,this.context??=new Vg,!this.params)this.params=new mr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||CC(this.body)||TC(this.body)||bC(this.body)||sF(this.body)?this.body:this.body instanceof mr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||bC(this.body)?null:TC(this.body)?this.body.type||null:CC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof mr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),l)),new t(n,r,o,{params:l,headers:c,context:d,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},Rs=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Rs||{}),pa=class{constructor(e,n=Ll.Ok,r="OK"){this.headers=e.headers||new fi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Lg=class t extends pa{constructor(e={}){super(e),this.type=Rs.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fl=class t extends pa{constructor(e={}){super(e),this.type=Rs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Vl=class extends pa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Ll=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Ll||{});function kg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var oF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof ha)o=r;else{let c;s.headers instanceof fi?c=s.headers:c=new fi(s.headers);let l;s.params&&(s.params instanceof mr?l=s.params:l=new mr({fromObject:s.params})),o=new ha(r,i,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=F(o).pipe(Pn(c=>this.handler.handle(c)));if(r instanceof ha||s.observe==="events")return a;let u=a.pipe(Ue(c=>c instanceof Fl));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(V(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(V(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(V(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(V(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new mr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,kg(s,i))}post(r,i,s={}){return this.request("POST",r,kg(s,i))}put(r,i,s={}){return this.request("PUT",r,kg(s,i))}};e.\u0275fac=function(i){return new(i||e)(D(fa))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function xC(t,e){return e(t)}function aF(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function uF(t,e,n){return(r,i)=>Kt(n,()=>e(r,s=>t(s,i)))}var cF=new x(""),jg=new x(""),lF=new x(""),dF=new x("");function hF(){let t=null;return(e,n)=>{t===null&&(t=(T(cF,{optional:!0})??[]).reduceRight(aF,xC));let r=T(li),i=r.add();return t(e,n).pipe(ir(()=>r.remove(i)))}}var AC=(()=>{let e=class e extends fa{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=T(li);let s=T(dF,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(jg),...this.injector.get(lF,[])]));this.chain=s.reduceRight((o,a)=>uF(o,a,this.injector),xC)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(ir(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(D(kl),D(pt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var fF=/^\)\]\}',?\n/;function pF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var SC=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new j(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ee(i.\u0275loadImpl()):F(null)).pipe(ve(()=>new Y(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,E)=>a.setRequestHeader(m,E.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let u=r.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=a.statusText||"OK",E=new fi(a.getAllResponseHeaders()),P=pF(a)||r.url;return c=new Lg({headers:E,status:a.status,statusText:m,url:P}),c},d=()=>{let{headers:m,status:E,statusText:P,url:C}=l(),N=null;E!==Ll.NoContent&&(N=typeof a.response>"u"?a.responseText:a.response),E===0&&(E=N?Ll.Ok:0);let U=E>=200&&E<300;if(r.responseType==="json"&&typeof N=="string"){let B=N;N=N.replace(fF,"");try{N=N!==""?JSON.parse(N):null}catch(ue){N=B,U&&(U=!1,N={error:ue,text:N})}}U?(o.next(new Fl({body:N,headers:m,status:E,statusText:P,url:C||void 0})),o.complete()):o.error(new Vl({error:N,headers:m,status:E,statusText:P,url:C||void 0}))},h=m=>{let{url:E}=l(),P=new Vl({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:E||void 0});o.error(P)},f=!1,v=m=>{f||(o.next(l()),f=!0);let E={type:Rs.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(E.total=m.total),r.responseType==="text"&&a.responseText&&(E.partialText=a.responseText),o.next(E)},w=m=>{let E={type:Rs.UploadProgress,loaded:m.loaded};m.lengthComputable&&(E.total=m.total),o.next(E)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",v),u!==null&&a.upload&&a.upload.addEventListener("progress",w)),a.send(u),o.next({type:Rs.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",v),u!==null&&a.upload&&a.upload.removeEventListener("progress",w)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(Ms))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),RC=new x(""),gF="XSRF-TOKEN",mF=new x("",{providedIn:"root",factory:()=>gF}),yF="X-XSRF-TOKEN",vF=new x("",{providedIn:"root",factory:()=>yF}),jl=class{},wF=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pl(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(st),D(it),D(mF))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function _F(t,e){let n=t.url.toLowerCase();if(!T(RC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=T(jl).getToken(),i=T(vF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var NC=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(NC||{});function EF(t,e){return{\u0275kind:t,\u0275providers:e}}function IF(...t){let e=[oF,SC,AC,{provide:fa,useExisting:AC},{provide:kl,useExisting:SC},{provide:jg,useValue:_F,multi:!0},{provide:RC,useValue:!0},{provide:jl,useClass:wF}];for(let n of t)e.push(...n.\u0275providers);return Ds(e)}var MC=new x("");function DF(){return EF(NC.LegacyInterceptors,[{provide:MC,useFactory:hF},{provide:jg,useExisting:MC,multi:!0}])}var b3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({providers:[IF(DF())]});let t=e;return t})();var $g=class extends Nl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},qg=class t extends $g{static makeCurrent(){yC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=CF();return n==null?null:TF(n)}resetBaseElement(){ga=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pl(document.cookie,e)}},ga=null;function CF(){return ga=ga||document.querySelector("base"),ga?ga.getAttribute("href"):null}function TF(t){return new URL(t,document.baseURI).pathname}var bF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Hg=new x(""),FC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(Hg),D(se))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Ul=class{constructor(e){this._doc=e}},Ug="ng-app-id",VC=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gr(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ug}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Ug),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ug,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(st),D(og),D(ug,8),D(it))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Bg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gg=/%COMP%/g,LC="%COMP%",AF=`_nghost-${LC}`,SF=`_ngcontent-${LC}`,MF=!0,xF=new x("",{providedIn:"root",factory:()=>MF});function RF(t){return SF.replace(Gg,t)}function NF(t){return AF.replace(Gg,t)}function jC(t,e){return e.map(n=>n.replace(Gg,t))}var PC=(()=>{let e=class e{constructor(r,i,s,o,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=gr(u),this.defaultRenderer=new ma(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ln.ShadowDom&&(i=ce(M({},i),{encapsulation:ln.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Bl?s.applyToHost(r):s instanceof ya&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case ln.Emulated:o=new Bl(c,l,i,this.appId,d,a,u,h);break;case ln.ShadowDom:return new zg(c,l,r,i,a,u,this.nonce,h);default:o=new ya(c,l,i,d,a,u,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(FC),D(VC),D(og),D(xF),D(st),D(it),D(se),D(ug))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),ma=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Bg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(OC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(OC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Bg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Bg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(On.DashCase|On.Important)?e.style.setProperty(n,r,i&On.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&On.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Bn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function OC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var zg=class extends ma{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=jC(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ya=class extends ma{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?jC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bl=class extends ya{constructor(e,n,r,i,s,o,a,u){let c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=RF(c),this.hostAttr=NF(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},PF=(()=>{let e=class e extends Ul{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(D(st))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),kC=["alt","control","meta","shift"],OF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},FF=(()=>{let e=class e extends Ul{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),kC.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=OF[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),kC.forEach(a=>{if(a!==s){let u=kF[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(st))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function Y3(t,e){return dC(M({rootComponent:t},VF(e)))}function VF(t){return{appProviders:[...$F,...t?.providers??[]],platformProviders:BF}}function LF(){qg.makeCurrent()}function jF(){return new fn}function UF(){return gD(document),document}var BF=[{provide:it,useValue:Og},{provide:ag,useValue:LF,multi:!0},{provide:st,useFactory:UF,deps:[]}];var $F=[{provide:fl,useValue:"root"},{provide:fn,useFactory:jF,deps:[]},{provide:Hg,useClass:PF,multi:!0,deps:[st,se,it]},{provide:Hg,useClass:FF,multi:!0,deps:[st]},PC,VC,FC,{provide:Xo,useExisting:PC},{provide:Ms,useClass:bF,deps:[]},[]];var UC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(st))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var QC=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(le(ci),le(fr))},e.\u0275dir=rt({type:e});let t=e;return t})(),HF=(()=>{let e=class e extends QC{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bs(e)))(s||e)}})(),e.\u0275dir=rt({type:e,features:[jn]});let t=e;return t})(),YC=new x("");var zF={provide:YC,useExisting:ai(()=>ZC),multi:!0};function GF(){let t=Bn()?Bn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var WF=new x(""),ZC=(()=>{let e=class e extends QC{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!GF())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(le(ci),le(fr),le(WF,8))},e.\u0275dir=rt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&As("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[la([zF]),jn]});let t=e;return t})();function KF(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var Kg=new x(""),JC=new x("");function QF(t){return KF(t.value)?{required:!0}:null}function BC(t){return null}function XC(t){return t!=null}function eT(t){return di(t)?ee(t):t}function tT(t){let e={};return t.forEach(n=>{e=n!=null?M(M({},e),n):e}),Object.keys(e).length===0?null:e}function nT(t,e){return e.map(n=>n(t))}function YF(t){return!t.validate}function rT(t){return t.map(e=>YF(e)?e:n=>e.validate(n))}function ZF(t){if(!t)return null;let e=t.filter(XC);return e.length==0?null:function(n){return tT(nT(n,e))}}function Qg(t){return t!=null?ZF(rT(t)):null}function JF(t){if(!t)return null;let e=t.filter(XC);return e.length==0?null:function(n){let r=nT(n,e).map(eT);return Vf(r).pipe(V(tT))}}function Yg(t){return t!=null?JF(rT(t)):null}function $C(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function XF(t){return t._rawValidators}function e1(t){return t._rawAsyncValidators}function Wg(t){return t?Array.isArray(t)?t:[t]:[]}function ql(t,e){return Array.isArray(t)?t.includes(e):t===e}function qC(t,e){let n=Wg(e);return Wg(t).forEach(i=>{ql(n,i)||n.push(i)}),n}function HC(t,e){return Wg(e).filter(n=>!ql(t,n))}var Hl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Yg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ps=class extends Hl{get formDirective(){return null}get path(){return null}},Ea=class extends Hl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},zl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},t1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},f5=ce(M({},t1),{"[class.ng-submitted]":"isSubmitted"}),p5=(()=>{let e=class e extends zl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(le(Ea,2))},e.\u0275dir=rt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Sl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[jn]});let t=e;return t})(),g5=(()=>{let e=class e extends zl{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(le(Ps,10))},e.\u0275dir=rt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Sl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[jn]});let t=e;return t})();var va="VALID",$l="INVALID",Ns="PENDING",wa="DISABLED";function iT(t){return(Kl(t)?t.validators:t)||null}function n1(t){return Array.isArray(t)?Qg(t):t||null}function sT(t,e){return(Kl(e)?e.asyncValidators:t)||null}function r1(t){return Array.isArray(t)?Yg(t):t||null}function Kl(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function i1(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")}function s1(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new j(1002,"")})}var Gl=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===va}get invalid(){return this.status===$l}get pending(){return this.status==Ns}get disabled(){return this.status===wa}get enabled(){return this.status!==wa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(HC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(HC(e,this._rawAsyncValidators))}hasValidator(e){return ql(this._rawValidators,e)}hasAsyncValidator(e){return ql(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ns,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=wa,this.errors=null,this._forEachChild(r=>{r.disable(ce(M({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=va,this._forEachChild(r=>{r.enable(ce(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===va||this.status===Ns)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wa:va}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ns,this._hasOwnPendingAsyncValidator=!0;let n=eT(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?wa:this.errors?$l:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ns)?Ns:this._anyControlsHaveStatus($l)?$l:va}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=n1(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=r1(this._rawAsyncValidators)}},Wl=class extends Gl{constructor(e,n,r){super(iT(n),sT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){s1(this,!0,e),Object.keys(e).forEach(r=>{i1(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Zg=new x("CallSetDisabledState",{providedIn:"root",factory:()=>Jg}),Jg="always";function o1(t,e){return[...e.path,t]}function oT(t,e,n=Jg){aT(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),u1(t,e),l1(t,e),c1(t,e),a1(t,e)}function zC(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function a1(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function aT(t,e){let n=XF(t);e.validator!==null?t.setValidators($C(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=e1(t);e.asyncValidator!==null?t.setAsyncValidators($C(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();zC(e._rawValidators,i),zC(e._rawAsyncValidators,i)}function u1(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&uT(t,e)})}function c1(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&uT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function uT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function l1(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function d1(t,e){t==null,aT(t,e)}function h1(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function f1(t){return Object.getPrototypeOf(t.constructor)===HF}function p1(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function g1(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===ZC?n=s:f1(s)?r=s:i=s}),i||r||n||null}var m1={provide:Ps,useExisting:ai(()=>y1)},_a=Promise.resolve(),y1=(()=>{let e=class e extends Ps{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Je,this.form=new Wl({},Qg(r),Yg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){_a.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),oT(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){_a.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){_a.then(()=>{let i=this._findContainer(r.path),s=new Wl({});d1(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){_a.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){_a.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,p1(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(le(Kg,10),le(JC,10),le(Zg,8))},e.\u0275dir=rt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&As("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[Xe.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[la([m1]),jn]});let t=e;return t})();function GC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function WC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var v1=class extends Gl{constructor(e=null,n,r){super(iT(n),sT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(WC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){WC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var w1={provide:Ea,useExisting:ai(()=>_1)},KC=Promise.resolve(),_1=(()=>{let e=class e extends Ea{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new v1,this._registered=!1,this.name="",this.update=new Je,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=g1(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),h1(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){oT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){KC.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&pr(i);KC.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?o1(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(le(Ps,9),le(Kg,10),le(JC,10),le(YC,10),le(hi,8),le(Zg,8))},e.\u0275dir=rt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Xe.None,"disabled","isDisabled"],model:[Xe.None,"ngModel","model"],options:[Xe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[la([w1]),jn,dr]});let t=e;return t})(),y5=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=rt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var E1=(()=>{let e=class e{constructor(){this._validator=BC}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):BC,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=rt({type:e,features:[dr]});let t=e;return t})();var I1={provide:Kg,useExisting:ai(()=>D1),multi:!0};var D1=(()=>{let e=class e extends E1{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=pr,this.createValidator=r=>QF}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bs(e)))(s||e)}})(),e.\u0275dir=rt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&ca("required",s._enabled?"":null)},inputs:{required:"required"},features:[la([I1]),jn]});let t=e;return t})();var C1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({});let t=e;return t})();var v5=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Zg,useValue:r.callSetDisabledState??Jg}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({imports:[C1]});let t=e;return t})();var Q="primary",Va=Symbol("RouteTitle"),rm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ls(t){return new rm(t)}function T1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function b1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!gn(t[n],e[n]))return!1;return!0}function gn(t,e){let n=t?im(t):void 0,r=e?im(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!yT(t[i],e[i]))return!1;return!0}function im(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function yT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function vT(t){return t.length>0?t[t.length-1]:null}function Er(t){return Ff(t)?t:di(t)?ee(Promise.resolve(t)):F(t)}var A1={exact:_T,subset:ET},wT={exact:S1,subset:M1,ignored:()=>!0};function cT(t,e,n){return A1[n.paths](t.root,e.root,n.matrixParams)&&wT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function S1(t,e){return gn(t,e)}function _T(t,e,n){if(!gi(t.segments,e.segments)||!Zl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!_T(t.children[r],e.children[r],n))return!1;return!0}function M1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yT(t[n],e[n]))}function ET(t,e,n){return IT(t,e,e.segments,n)}function IT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!gi(i,n)||e.hasChildren()||!Zl(i,n,r))}else if(t.segments.length===n.length){if(!gi(t.segments,n)||!Zl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!ET(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!gi(t.segments,i)||!Zl(t.segments,i,r)||!t.children[Q]?!1:IT(t.children[Q],e,s,r)}}function Zl(t,e,n){return e.every((r,i)=>wT[n](t[i].parameters,r.parameters))}var yr=class{constructor(e=new ae([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ls(this.queryParams),this._queryParamMap}toString(){return N1.serialize(this)}},ae=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jl(this)}},pi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ls(this.parameters),this._parameterMap}toString(){return CT(this)}};function x1(t,e){return gi(t,e)&&t.every((n,r)=>gn(n.parameters,e[r].parameters))}function gi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function R1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Q&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Q&&(n=n.concat(e(i,r)))}),n}var La=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new Sa,providedIn:"root"});let t=e;return t})(),Sa=class{parse(e){let n=new om(e);return new yr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ia(e.root,!0)}`,r=k1(e.queryParams),i=typeof e.fragment=="string"?`#${P1(e.fragment)}`:"";return`${n}${r}${i}`}},N1=new Sa;function Jl(t){return t.segments.map(e=>CT(e)).join("/")}function Ia(t,e){if(!t.hasChildren())return Jl(t);if(e){let n=t.children[Q]?Ia(t.children[Q],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Q&&r.push(`${i}:${Ia(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=R1(t,(r,i)=>i===Q?[Ia(t.children[Q],!1)]:[`${i}:${Ia(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Q]!=null?`${Jl(t)}/${n[0]}`:`${Jl(t)}/(${n.join("//")})`}}function DT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ql(t){return DT(t).replace(/%3B/gi,";")}function P1(t){return encodeURI(t)}function sm(t){return DT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xl(t){return decodeURIComponent(t)}function lT(t){return Xl(t.replace(/\+/g,"%20"))}function CT(t){return`${sm(t.path)}${O1(t.parameters)}`}function O1(t){return Object.entries(t).map(([e,n])=>`;${sm(e)}=${sm(n)}`).join("")}function k1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ql(n)}=${Ql(i)}`).join("&"):`${Ql(n)}=${Ql(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var F1=/^[^\/()?;#]+/;function Xg(t){let e=t.match(F1);return e?e[0]:""}var V1=/^[^\/()?;=#]+/;function L1(t){let e=t.match(V1);return e?e[0]:""}var j1=/^[^=?&#]+/;function U1(t){let e=t.match(j1);return e?e[0]:""}var B1=/^[^&#]+/;function $1(t){let e=t.match(B1);return e?e[0]:""}var om=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Q]=new ae(e,n)),r}parseSegment(){let e=Xg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new pi(Xl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=L1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xg(this.remaining);i&&(r=i,this.capture(r))}e[Xl(n)]=Xl(r)}parseQueryParam(e){let n=U1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=$1(this.remaining);o&&(r=o,this.capture(r))}let i=lT(n),s=lT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Q);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[Q]:new ae([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function TT(t){return t.segments.length>0?new ae([],{[Q]:t}):t}function bT(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=bT(i);if(r===Q&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ae(t.segments,e);return q1(n)}function q1(t){if(t.numberOfChildren===1&&t.children[Q]){let e=t.children[Q];return new ae(t.segments.concat(e.segments),e.children)}return t}function js(t){return t instanceof yr}function H1(t,e,n=null,r=null){let i=AT(t);return ST(i,e,n,r)}function AT(t){let e;function n(s){let o={};for(let u of s.children){let c=n(u);o[u.outlet]=c}let a=new ae(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=TT(r);return e??i}function ST(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return em(i,i,i,n,r);let s=z1(e);if(s.toRoot())return em(i,i,new ae([],{}),n,r);let o=G1(s,i,t),a=o.processChildren?Ta(o.segmentGroup,o.index,s.commands):xT(o.segmentGroup,o.index,s.commands);return em(i,o.segmentGroup,a,n,r)}function ed(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ma(t){return typeof t=="object"&&t!=null&&t.outlets}function em(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let o;t===e?o=n:o=MT(t,e,n);let a=TT(bT(o));return new yr(a,s,i)}function MT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=MT(s,e,n)}),new ae(t.segments,r)}var td=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ed(r[0]))throw new j(4003,!1);let i=r.find(Ma);if(i&&i!==vT(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function z1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new td(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new td(n,e,r)}var Fs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function G1(t,e,n){if(t.isAbsolute)return new Fs(e,!0,0);if(!n)return new Fs(e,!1,NaN);if(n.parent===null)return new Fs(n,!0,0);let r=ed(t.commands[0])?0:1,i=n.segments.length-1+r;return W1(n,i,t.numberOfDoubleDots)}function W1(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Fs(r,!1,i-s)}function K1(t){return Ma(t[0])?t[0].outlets:{[Q]:t}}function xT(t,e,n){if(t??=new ae([],{}),t.segments.length===0&&t.hasChildren())return Ta(t,e,n);let r=Q1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ae(t.segments.slice(0,r.pathIndex),{});return s.children[Q]=new ae(t.segments.slice(r.pathIndex),t.children),Ta(s,0,i)}else return r.match&&i.length===0?new ae(t.segments,{}):r.match&&!t.hasChildren()?am(t,e,n):r.match?Ta(t,0,i):am(t,e,n)}function Ta(t,e,n){if(n.length===0)return new ae(t.segments,{});{let r=K1(n),i={};if(Object.keys(r).some(s=>s!==Q)&&t.children[Q]&&t.numberOfChildren===1&&t.children[Q].segments.length===0){let s=Ta(t.children[Q],e,n);return new ae(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=xT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ae(t.segments,i)}}function Q1(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ma(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!hT(u,c,o))return s;r+=2}else{if(!hT(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function am(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ma(s)){let u=Y1(s.outlets);return new ae(r,u)}if(i===0&&ed(n[0])){let u=t.segments[e];r.push(new pi(u.path,dT(n[0]))),i++;continue}let o=Ma(s)?s.outlets[Q]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ed(a)?(r.push(new pi(o,dT(a))),i+=2):(r.push(new pi(o,{})),i++)}return new ae(r,{})}function Y1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=am(new ae([],{}),0,r))}),e}function dT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function hT(t,e,n){return t==n.path&&gn(e,n.parameters)}var ba="imperative",$e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}($e||{}),Ft=class{constructor(e,n){this.id=e,this.url=n}},Us=class extends Ft{constructor(e,n,r="imperative",i=null){super(e,n),this.type=$e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mn=class extends Ft{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=$e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(bt||{}),nd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(nd||{}),vr=class extends Ft{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wr=class extends Ft{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationSkipped}},xa=class extends Ft{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=$e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},rd=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},um=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class extends Ft{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=$e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lm=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dm=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hm=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fm=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pm=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gm=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mm=class{constructor(e){this.snapshot=e,this.type=$e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ym=class{constructor(e){this.snapshot=e,this.type=$e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=$e.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ra=class{},Na=class{constructor(e){this.url=e}};var vm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ja,this.attachRef=null}},ja=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new vm,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=wm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=wm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=_m(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _m(e,this._root).map(n=>n.value)}};function wm(t,e){if(t===e.value)return e;for(let n of e.children){let r=wm(t,n);if(r)return r}return null}function _m(t,e){if(t===e.value)return[e];for(let n of e.children){let r=_m(t,n);if(r.length)return r.unshift(e),r}return[]}var Tt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ks(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var od=class extends sd{constructor(e,n){super(e),this.snapshot=n,xm(this,e)}toString(){return this.snapshot.toString()}};function RT(t){let e=Z1(t),n=new Ke([new pi("",{})]),r=new Ke({}),i=new Ke({}),s=new Ke({}),o=new Ke(""),a=new _r(n,r,s,o,i,Q,t,e.root);return a.snapshot=e.root,new od(new Tt(a,[]),e)}function Z1(t){let e={},n={},r={},i="",s=new Pa([],e,r,i,n,Q,t,null,{});return new ad("",new Tt(s,[]))}var _r=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(V(c=>c[Va]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(e=>Ls(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(e=>Ls(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mm(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&PT(i)&&(r.resolve[Va]=i.title),r}var Pa=class{get title(){return this.data?.[Va]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ls(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ls(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ad=class extends sd{constructor(e,n){super(n),this.url=e,xm(this,n)}toString(){return NT(this._root)}};function xm(t,e){e.value._routerState=t,e.children.forEach(n=>xm(t,n))}function NT(t){let e=t.children.length>0?` { ${t.children.map(NT).join(", ")} } `:"";return`${t.value}${e}`}function tm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,gn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),gn(e.params,n.params)||t.paramsSubject.next(n.params),b1(e.url,n.url)||t.urlSubject.next(n.url),gn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Em(t,e){let n=gn(t.params,e.params)&&x1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Em(t.parent,e.parent))}function PT(t){return typeof t.title=="string"||t.title===null}var J1=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=T(ja),this.location=T(aa),this.changeDetector=T(hi),this.environmentInjector=T(pt),this.inputBinder=T(dd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Im(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=rt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[dr]});let t=e;return t})(),Im=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===_r?this.route:e===ja?this.childContexts:this.parent.get(e,n)}},dd=new x(""),fT=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=qo([i.queryParams,i.params,i.data]).pipe(ve(([o,a,u],c)=>(u=M(M(M({},o),a),u),c===0?F(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=hC(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function X1(t,e,n){let r=Oa(t,e._root,n?n._root:void 0);return new od(r,e)}function Oa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=eV(t,e,n);return new Tt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Oa(t,a)),o}}let r=tV(e.value),i=e.children.map(s=>Oa(t,s));return new Tt(r,i)}}function eV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Oa(t,r,i);return Oa(t,r)})}function tV(t){return new _r(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var OT="ngNavigationCancelingError";function kT(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=js(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FT(!1,bt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function FT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[OT]=!0,n.cancellationCode=e,n}function nV(t){return VT(t)&&js(t.url)}function VT(t){return!!t&&t[OT]}var rV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=wI({type:e,selectors:[["ng-component"]],standalone:!0,features:[sC],decls:1,vars:0,template:function(i,s){i&1&&Tg(0,"router-outlet")},dependencies:[J1],encapsulation:2});let t=e;return t})();function iV(t,e){return t.providers&&!t._injector&&(t._injector=Al(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Rm(t){let e=t.children&&t.children.map(Rm),n=e?ce(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Q&&(n.component=rV),n}function yn(t){return t.outlet||Q}function sV(t,e){let n=t.filter(r=>yn(r)===e);return n.push(...t.filter(r=>yn(r)!==e)),n}function Ua(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var oV=(t,e,n,r)=>V(i=>(new Dm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Dm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ks(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ks(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ym(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(tm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),tm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Ua(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},ud=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vs=class{constructor(e,n){this.component=e,this.route=n}};function aV(t,e,n){let r=t._root,i=e?e._root:null;return Da(r,i,n,[r.value])}function uV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function $s(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!sI(t)?t:e.get(t):r}function Da(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ks(e);return t.children.forEach(o=>{cV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Aa(a,n.getContext(o),i)),i}function cV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=lV(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ud(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Da(t,e,a?a.children:null,r,i):Da(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Vs(a.outlet.component,o))}else o&&Aa(e,a,i),i.canActivateChecks.push(new ud(r)),s.component?Da(t,null,a?a.children:null,r,i):Da(t,null,n,r,i);return i}function lV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!gi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!gi(t.url,e.url)||!gn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Em(t,e)||!gn(t.queryParams,e.queryParams);case"paramsChange":default:return!Em(t,e)}}function Aa(t,e,n){let r=ks(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Aa(o,e.children.getContext(s),n):Aa(o,null,n):Aa(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vs(e.outlet.component,i)):n.canDeactivateChecks.push(new Vs(null,i)):n.canDeactivateChecks.push(new Vs(null,i))}function Ba(t){return typeof t=="function"}function dV(t){return typeof t=="boolean"}function hV(t){return t&&Ba(t.canLoad)}function fV(t){return t&&Ba(t.canActivate)}function pV(t){return t&&Ba(t.canActivateChild)}function gV(t){return t&&Ba(t.canDeactivate)}function mV(t){return t&&Ba(t.canMatch)}function LT(t){return t instanceof Nn||t?.name==="EmptyError"}var Yl=Symbol("INITIAL_VALUE");function Bs(){return ve(t=>qo(t.map(e=>e.pipe(an(1),Yr(Yl)))).pipe(V(e=>{for(let n of e)if(n!==!0){if(n===Yl)return Yl;if(n===!1||n instanceof yr)return n}return!0}),Ue(e=>e!==Yl),an(1)))}function yV(t,e){return Ne(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?F(ce(M({},n),{guardsResult:!0})):vV(o,r,i,t).pipe(Ne(a=>a&&dV(a)?wV(r,s,t,e):F(a)),V(a=>ce(M({},n),{guardsResult:a})))})}function vV(t,e,n,r){return ee(t).pipe(Ne(i=>CV(i.component,i.route,n,e,r)),Rt(i=>i!==!0,!0))}function wV(t,e,n,r){return ee(e).pipe(Pn(i=>os(EV(i.route.parent,r),_V(i.route,r),DV(t,i.path,n),IV(t,i.route,n))),Rt(i=>i!==!0,!0))}function _V(t,e){return t!==null&&e&&e(new mm(t)),F(!0)}function EV(t,e){return t!==null&&e&&e(new pm(t)),F(!0)}function IV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(s=>xc(()=>{let o=Ua(e)??n,a=$s(s,o),u=fV(a)?a.canActivate(e,t):Kt(o,()=>a(e,t));return Er(u).pipe(Rt())}));return F(i).pipe(Bs())}function DV(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>uV(o)).filter(o=>o!==null).map(o=>xc(()=>{let a=o.guards.map(u=>{let c=Ua(o.node)??n,l=$s(u,c),d=pV(l)?l.canActivateChild(r,t):Kt(c,()=>l(r,t));return Er(d).pipe(Rt())});return F(a).pipe(Bs())}));return F(s).pipe(Bs())}function CV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(a=>{let u=Ua(e)??i,c=$s(a,u),l=gV(c)?c.canDeactivate(t,e,n,r):Kt(u,()=>c(t,e,n,r));return Er(l).pipe(Rt())});return F(o).pipe(Bs())}function TV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(o=>{let a=$s(o,t),u=hV(a)?a.canLoad(e,n):Kt(t,()=>a(e,n));return Er(u)});return F(s).pipe(Bs(),jT(r))}function jT(t){return xf(Pe(e=>{if(js(e))throw kT(t,e)}),V(e=>e===!0))}function bV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(o=>{let a=$s(o,t),u=mV(a)?a.canMatch(e,n):Kt(t,()=>a(e,n));return Er(u)});return F(s).pipe(Bs(),jT(r))}var ka=class{constructor(e){this.segmentGroup=e||null}},cd=class extends Error{constructor(e){super(),this.urlTree=e}};function Os(t){return ss(new ka(t))}function AV(t){return ss(new j(4e3,!1))}function SV(t){return ss(FT(!1,bt.GuardRejected))}var Cm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[Q])return AV(e.redirectTo);i=i.children[Q]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new cd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new yr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ae(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Tm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MV(t,e,n,r,i){let s=Nm(t,e,n);return s.matched?(r=iV(e,r),bV(r,e,n,i).pipe(V(o=>o===!0?s:M({},Tm)))):F(s)}function Nm(t,e,n){if(e.path==="**")return xV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},Tm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||T1)(n,t,e);if(!i)return M({},Tm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xV(t){return{matched:!0,parameters:t.length>0?vT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function pT(t,e,n,r){return n.length>0&&PV(t,n,r)?{segmentGroup:new ae(e,NV(r,new ae(n,t.children))),slicedSegments:[]}:n.length===0&&OV(t,n,r)?{segmentGroup:new ae(t.segments,RV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ae(t.segments,t.children),slicedSegments:n}}function RV(t,e,n,r){let i={};for(let s of n)if(hd(t,e,s)&&!r[yn(s)]){let o=new ae([],{});i[yn(s)]=o}return M(M({},r),i)}function NV(t,e){let n={};n[Q]=e;for(let r of t)if(r.path===""&&yn(r)!==Q){let i=new ae([],{});n[yn(r)]=i}return n}function PV(t,e,n){return n.some(r=>hd(t,e,r)&&yn(r)!==Q)}function OV(t,e,n){return n.some(r=>hd(t,e,r))}function hd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function kV(t,e,n,r){return yn(t)!==r&&(r===Q||!hd(e,n,t))?!1:Nm(e,t,n).matched}function FV(t,e,n){return e.length===0&&!t.children[n]}var bm=class{};function VV(t,e,n,r,i,s,o="emptyOnly"){return new Am(t,e,n,r,i,o,s).recognize()}var LV=31,Am=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Cm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=pT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(V(n=>{let r=new Pa([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,{},Q,this.rootComponentType,null,{}),i=new Tt(r,n),s=new ad("",i),o=H1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Q).pipe(nr(r=>{if(r instanceof cd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ka?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Mm(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(V(s=>s instanceof Tt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ee(i).pipe(Pn(s=>{let o=r.children[s],a=sV(n,s);return this.processSegmentGroup(e,a,o,s)}),Qr((s,o)=>(s.push(...o),s)),rr(null),Bf(),Ne(s=>{if(s===null)return Os(r);let o=UT(s);return jV(o),F(o)}))}processSegment(e,n,r,i,s,o){return ee(n).pipe(Pn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(nr(u=>{if(u instanceof ka)return F(null);throw u}))),Rt(a=>!!a),nr(a=>{if(LT(a))return FV(r,i,s)?F(new bm):Os(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return kV(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Os(i):Os(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Nm(n,i,s);if(!a)return Os(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LV&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ne(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=MV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(ve(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ve(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Pa(l,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,BV(r),yn(r),r.component??r._loadedComponent??null,r,$V(r)),{segmentGroup:v,slicedSegments:w}=pT(n,l,d,u);if(w.length===0&&v.hasChildren())return this.processChildren(c,u,v).pipe(V(E=>E===null?null:new Tt(f,E)));if(u.length===0&&w.length===0)return F(new Tt(f,[]));let m=yn(r)===s;return this.processSegment(c,u,v,w,m?Q:s,!0).pipe(V(E=>new Tt(f,E instanceof Tt?[E]:[])))}))):Os(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):TV(e,n,r,this.urlSerializer).pipe(Ne(i=>i?this.configLoader.loadChildren(e,n).pipe(Pe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):SV(n))):F({routes:[],injector:e})}};function jV(t){t.sort((e,n)=>e.value.outlet===Q?-1:n.value.outlet===Q?1:e.value.outlet.localeCompare(n.value.outlet))}function UV(t){let e=t.value.routeConfig;return e&&e.path===""}function UT(t){let e=[],n=new Set;for(let r of t){if(!UV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=UT(r.children);e.push(new Tt(r.value,i))}return e.filter(r=>!n.has(r))}function BV(t){return t.data||{}}function $V(t){return t.resolve||{}}function qV(t,e,n,r,i,s){return Ne(o=>VV(t,e,n,r,o.extractedUrl,i,s).pipe(V(({state:a,tree:u})=>ce(M({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function HV(t,e){return Ne(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of BT(u))o.add(c);let a=0;return ee(o).pipe(Pn(u=>s.has(u)?zV(u,r,t,e):(u.data=Mm(u,u.parent,t).resolve,F(void 0))),Pe(()=>a++),as(1),Ne(u=>a===o.size?F(n):dt))})}function BT(t){let e=t.children.map(n=>BT(n)).flat();return[t,...e]}function zV(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!PT(i)&&(s[Va]=i.title),GV(s,t,e,r).pipe(V(o=>(t._resolvedData=o,t.data=Mm(t,t.parent,n).resolve,null)))}function GV(t,e,n,r){let i=im(t);if(i.length===0)return F({});let s={};return ee(i).pipe(Ne(o=>WV(t[o],e,n,r).pipe(Rt(),Pe(a=>{s[o]=a}))),as(1),jf(s),nr(o=>LT(o)?dt:ss(o)))}function WV(t,e,n,r){let i=Ua(e)??r,s=$s(t,i),o=s.resolve?s.resolve(e,n):Kt(i,()=>s(e,n));return Er(o)}function nm(t){return ve(e=>{let n=t(e);return n?ee(n).pipe(V(()=>e)):F(e)})}var $T=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Q);return i}getResolvedTitleForRoute(r){return r.data[Va]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>T(KV),providedIn:"root"});let t=e;return t})(),KV=(()=>{let e=class e extends $T{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(UC))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$a=new x("",{providedIn:"root",factory:()=>({})}),Fa=new x(""),Pm=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=T(Rl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Er(r.loadComponent()).pipe(V(qT),Pe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),ir(()=>{this.componentLoaders.delete(r)})),s=new es(i,()=>new Ce).pipe(Xi());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=QV(i,this.compiler,r,this.onLoadEndListener).pipe(ir(()=>{this.childrenLoaders.delete(i)})),a=new es(o,()=>new Ce).pipe(Xi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function QV(t,e,n,r){return Er(t.loadChildren()).pipe(V(qT),Ne(i=>i instanceof ea||Array.isArray(i)?F(i):ee(e.compileModuleAsync(i))),V(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Fa,[],{optional:!0,self:!0}).flat()),{routes:o.map(Rm),injector:s}}))}function YV(t){return t&&typeof t=="object"&&"default"in t}function qT(t){return YV(t)?t.default:t}var Om=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>T(ZV),providedIn:"root"});let t=e;return t})(),ZV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),HT=new x(""),zT=new x("");function JV(t,e,n){let r=t.get(zT),i=t.get(st);return t.get(se).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),XV(t))),{onViewTransitionCreated:u}=r;return u&&Kt(t,()=>u({transition:a,from:e,to:n})),o})}function XV(t){return new Promise(e=>{Ig(e,{injector:t})})}var km=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ce,this.transitionAbortSubject=new Ce,this.configLoader=T(Pm),this.environmentInjector=T(pt),this.urlSerializer=T(La),this.rootContexts=T(ja),this.location=T(xs),this.inputBindingEnabled=T(dd,{optional:!0})!==null,this.titleStrategy=T($T),this.options=T($a,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=T(Om),this.createViewTransition=T(HT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=s=>this.events.next(new hm(s)),i=s=>this.events.next(new fm(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ce(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ke({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ba,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(o=>o.id!==0),V(o=>ce(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ve(o=>{let a=!1,u=!1;return F(o).pipe(ve(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",bt.SupersededByNewNavigation),dt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ce(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new wr(c.id,this.urlSerializer.serialize(c.rawUrl),h,nd.IgnoredSameUrlNavigation)),c.resolve(null),dt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(ve(h=>{let f=this.transitions?.getValue();return this.events.next(new Us(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?dt:Promise.resolve(h)}),qV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Pe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ce(M({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new rd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:v,restoredState:w,extras:m}=c,E=new Us(h,this.urlSerializer.serialize(f),v,w);this.events.next(E);let P=RT(this.rootComponentType).snapshot;return this.currentTransition=o=ce(M({},c),{targetSnapshot:P,urlAfterRedirects:f,extras:ce(M({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(o)}else{let h="";return this.events.next(new wr(c.id,this.urlSerializer.serialize(c.extractedUrl),h,nd.IgnoredByUrlHandlingStrategy)),c.resolve(null),dt}}),Pe(c=>{let l=new um(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),V(c=>(this.currentTransition=o=ce(M({},c),{guards:aV(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),yV(this.environmentInjector,c=>this.events.next(c)),Pe(c=>{if(o.guardsResult=c.guardsResult,js(c.guardsResult))throw kT(this.urlSerializer,c.guardsResult);let l=new cm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ue(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",bt.GuardRejected),!1)),nm(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Pe(l=>{let d=new lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ve(l=>{let d=!1;return F(l).pipe(HV(this.paramsInheritanceStrategy,this.environmentInjector),Pe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",bt.NoDataFromResolver)}}))}),Pe(l=>{let d=new dm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),nm(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Pe(f=>{d.component=f}),V(()=>{})));for(let f of d.children)h.push(...l(f));return h};return qo(l(c.targetSnapshot.root)).pipe(rr(null),an(1))}),nm(()=>this.afterPreactivation()),ve(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ee(d).pipe(V(()=>o)):F(o)}),V(c=>{let l=X1(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ce(M({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Pe(()=>{this.events.next(new Ra)}),oV(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),an(1),Pe({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Hf(this.transitionAbortSubject.pipe(Pe(c=>{throw c}))),ir(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",bt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),nr(c=>{if(u=!0,VT(c))this.events.next(new vr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),nV(c)?this.events.next(new Na(c.url)):o.resolve(!1);else{this.events.next(new xa(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return dt}))}))}cancelNavigationTransition(r,i,s){let o=new vr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eL(t){return t!==ba}var tL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>T(nL),providedIn:"root"});let t=e;return t})(),Sm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},nL=(()=>{let e=class e extends Sm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bs(e)))(s||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),GT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>T(rL),providedIn:"root"});let t=e;return t})(),rL=(()=>{let e=class e extends GT{constructor(){super(...arguments),this.location=T(xs),this.urlSerializer=T(La),this.options=T($a,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=T(Om),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=RT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Us)this.stateMemento=this.createStateMemento();else if(r instanceof wr)this.rawUrlTree=i.initialUrl;else if(r instanceof rd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Ra?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof vr&&(r.code===bt.GuardRejected||r.code===bt.NoDataFromResolver)?this.restoreHistory(i):r instanceof xa?this.restoreHistory(i,!0):r instanceof mn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bs(e)))(s||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ca=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ca||{});function WT(t,e){t.events.pipe(Ue(n=>n instanceof mn||n instanceof vr||n instanceof xa||n instanceof wr),V(n=>n instanceof mn||n instanceof wr?Ca.COMPLETE:(n instanceof vr?n.code===bt.Redirect||n.code===bt.SupersededByNewNavigation:!1)?Ca.REDIRECTING:Ca.FAILED),Ue(n=>n!==Ca.REDIRECTING),an(1)).subscribe(()=>{e()})}function iL(t){throw t}var sL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Yt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=T(Ml),this.stateManager=T(GT),this.options=T($a,{optional:!0})||{},this.pendingTasks=T(li),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=T(km),this.urlSerializer=T(La),this.location=T(xs),this.urlHandlingStrategy=T(Om),this._events=new Ce,this.errorHandler=this.options.errorHandler||iL,this.navigated=!1,this.routeReuseStrategy=T(tL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=T(Fa,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!T(dd,{optional:!0}),this.eventsSubscription=new Se,this.isNgZoneEnabled=T(se)instanceof se&&se.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof vr&&i.code!==bt.Redirect&&i.code!==bt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof mn)this.navigated=!0;else if(i instanceof Na){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||eL(s.source)};this.scheduleNavigation(a,ba,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}uL(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ba,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=M({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Rm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=AT(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return ST(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=js(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ba,null,i)}navigate(r,i={skipLocationChange:!1}){return aL(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=M({},sL):i===!1?s=M({},oL):s=i,js(r))return cT(this.currentUrlTree,r,s);let o=this.parseUrl(r);return cT(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return WT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function uL(t){return!(t instanceof Ra)&&!(t instanceof Na)}var U5=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Ce,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof mn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:vD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(le(Yt),le(_r),ig("tabindex"),le(ci),le(fr),le($n))},e.\u0275dir=rt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&As("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ca("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Xe.HasDecoratorInputTransform,"preserveFragment","preserveFragment",pr],skipLocationChange:[Xe.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",pr],replaceUrl:[Xe.HasDecoratorInputTransform,"replaceUrl","replaceUrl",pr],routerLink:"routerLink"},standalone:!0,features:[Cg,dr]});let t=e;return t})();var ld=class{};var cL=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(r=>r instanceof mn),Pn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Al(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return ee(s).pipe(tr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=F(null);let o=s.pipe(Ne(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ee([o,a]).pipe(tr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(D(Yt),D(Rl),D(pt),D(ld),D(Pm))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),KT=new x(""),lL=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Us?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof mn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof wr&&r.code===nd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof id&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new id(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){xD()},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function B5(t,...e){return Ds([{provide:Fa,multi:!0,useValue:t},[],{provide:_r,useFactory:QT,deps:[Yt]},{provide:da,multi:!0,useFactory:YT},e.map(n=>n.\u0275providers)])}function QT(t){return t.routerState.root}function qa(t,e){return{\u0275kind:t,\u0275providers:e}}function YT(){let t=T(Ln);return e=>{let n=t.get(Ss);if(e!==n.components[0])return;let r=t.get(Yt),i=t.get(ZT);t.get(Fm)===1&&r.initialNavigation(),t.get(JT,null,Z.Optional)?.setUpPreloading(),t.get(KT,null,Z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZT=new x("",{factory:()=>new Ce}),Fm=new x("",{providedIn:"root",factory:()=>1});function dL(){return qa(2,[{provide:Fm,useValue:0},{provide:xl,multi:!0,deps:[Ln],useFactory:e=>{let n=e.get(vC,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Yt),s=e.get(ZT);WT(i,()=>{r(!0)}),e.get(km).afterPreactivation=()=>(r(!0),s.closed?F(void 0):s),i.initialNavigation()}))}}])}function hL(){return qa(3,[{provide:xl,multi:!0,useFactory:()=>{let e=T(Yt);return()=>{e.setUpLocationChangeListener()}}},{provide:Fm,useValue:2}])}var JT=new x("");function fL(t){return qa(0,[{provide:JT,useExisting:cL},{provide:ld,useExisting:t}])}function pL(){return qa(8,[fT,{provide:dd,useExisting:fT}])}function gL(t){let e=[{provide:HT,useValue:JV},{provide:zT,useValue:M({skipNextTransition:!!t?.skipInitialTransition},t)}];return qa(9,e)}var gT=new x("ROUTER_FORROOT_GUARD"),mL=[xs,{provide:La,useClass:Sa},Yt,ja,{provide:_r,useFactory:QT,deps:[Yt]},Pm,[]],$5=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[mL,[],{provide:Fa,multi:!0,useValue:r},{provide:gT,useFactory:_L,deps:[[Yt,new ra,new hI]]},{provide:$a,useValue:i||{}},i?.useHash?vL():wL(),yL(),i?.preloadingStrategy?fL(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?EL(i):[],i?.bindToComponentInputs?pL().\u0275providers:[],i?.enableViewTransitions?gL().\u0275providers:[],IL()]}}static forChild(r){return{ngModule:e,providers:[{provide:Fa,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(gT,8))},e.\u0275mod=nt({type:e}),e.\u0275inj=tt({});let t=e;return t})();function yL(){return{provide:KT,useFactory:()=>{let t=T(EC),e=T(se),n=T($a),r=T(km),i=T(La);return n.scrollOffset&&t.setOffset(n.scrollOffset),new lL(i,r,t,e,n)}}}function vL(){return{provide:$n,useClass:_C}}function wL(){return{provide:$n,useClass:Pg}}function _L(t){return"guarded"}function EL(t){return[t.initialNavigation==="disabled"?hL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?dL().\u0275providers:[]]}var mT=new x("");function IL(){return[{provide:mT,useFactory:YT},{provide:da,multi:!0,useExisting:mT}]}var CL="firebase",TL="10.11.1";er(CL,TL,"app");var yi=new kn("ANGULARFIRE2_VERSION");var bL=(t,e)=>{let n=e?[e]:W_(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},mi=class{constructor(){return bL(AL)}},AL="app-check";function Vm(){}var fd=class{zone;delegate;constructor(e,n=Of){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Lm=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vm,{},Vm,Vm)),n.pipe(Pe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},pd=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new fd(Zone.current)),this.insideAngular=n.run(()=>new fd(Zone.current,$o)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(se))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function SL(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Dt(t){return ML(SL())(t)}function ML(t){return function(n){return n=n.lift(new Lm(t.ngZone)),n.pipe(qt(t.outsideAngular),xt(t.insideAngular))}}var xL="firebase",RL="10.11.1";lt.registerVersion(xL,RL,"app-compat");var NL=["ngOnDestroy"],t0=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(NL.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let u=a?.[s];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,c)=>o.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,d),d})})})});var gd=class{constructor(e){return e}},qs=new x("angularfire2.app.options"),Hs=new x("angularfire2.app.name");function Ha(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=lt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>lt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;PL("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new gd(o)}var PL=(t,...e)=>{Ag()&&typeof console<"u"&&console[t](...e)},OL={provide:gd,useFactory:Ha,deps:[qs,se,[new ra,Hs]]},o6=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:qs,useValue:n},{provide:Hs,useValue:r}]}}constructor(n){lt.registerVersion("angularfire",yi.full,"core"),lt.registerVersion("angularfire",yi.full,"app-compat"),lt.registerVersion("angular",oC.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(it))};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[OL]})}return t})();function md(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return kL(i,o)||(e0("error",`${e} was already initialized on the ${n} Firebase App with different settings.${FL?" You may need to reload as Firebase is not HMR aware.":""}`),e0("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function kL(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var FL=typeof module<"u"&&!!module.hot,e0=(t,...e)=>{Ag()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var jL=new Map,UL={activated:!1,tokenObservers:[]},BL={initialized:!1,enabled:!1};function Zt(t){return jL.get(t)||Object.assign({},UL)}function o0(){return BL}var $L="https://content-firebaseappcheck.googleapis.com/v1";var qL="exchangeDebugToken",n0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},m6=24*60*60*1e3;var Um=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new yf,this.pending.promise.catch(n=>{}),yield HL(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new yf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function HL(t){return new Promise(e=>{setTimeout(e,t)})}var zL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ir=new z_("appCheck","AppCheck",zL);function a0(t){if(!Zt(t).activated)throw Ir.create("use-before-activation",{appName:t.name})}function u0(r,i){return y(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},u;try{u=yield fetch(t,a)}catch(f){throw Ir.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw Ir.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw Ir.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function c0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$L}/projects/${n}/apps/${r}:${qL}?key=${i}`,body:{debug_token:e}}}var GL="firebase-app-check-database",WL=1,Bm="firebase-app-check-store";var yd=null;function KL(){return yd||(yd=new Promise((t,e)=>{try{let n=indexedDB.open(GL,WL);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ir.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Bm,{keyPath:"compositeKey"})}}}catch(n){e(Ir.create("storage-open",{originalErrorMessage:n?.message}))}}),yd)}function QL(t,e){return YL(ZL(t),e)}function YL(t,e){return y(this,null,function*(){let r=(yield KL()).transaction(Bm,"readwrite"),s=r.objectStore(Bm).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Ir.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function ZL(t){return`${t.options.appId}-${t.name}`}var $m=new oc("@firebase/app-check");function jm(t,e){return sc()?QL(t,e).catch(n=>{$m.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function l0(){return o0().enabled}function d0(){return y(this,null,function*(){let t=o0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var JL={error:"UNKNOWN_ERROR"};function XL(t){return $_.encodeString(JSON.stringify(t),!1)}function qm(t,e=!1){return y(this,null,function*(){let n=t.app;a0(n);let r=Zt(n),i=r.token,s;if(i&&!za(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(za(u)?i=u:yield jm(n,void 0))}if(!e&&i&&za(i))return{token:i.token};let o=!1;if(l0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=u0(c0(n,yield d0()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let u=yield r.exchangeTokenPromise;return yield jm(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Zt(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?$m.warn(u.message):$m.error(u),s=u}let a;return i?s?za(i)?a={token:i.token,internalError:s}:a=i0(s):(a={token:i.token},r.token=i,yield jm(n,i)):a=i0(s),o&&rj(n,a),a})}function ej(t){return y(this,null,function*(){let e=t.app;a0(e);let{provider:n}=Zt(e);if(l0()){let r=yield d0(),{token:i}=yield u0(c0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function tj(t,e,n,r){let{app:i}=t,s=Zt(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&za(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),r0(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>r0(t))}function h0(t,e){let n=Zt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function r0(t){let{app:e}=t,n=Zt(e),r=n.tokenRefresher;r||(r=nj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function nj(t){let{app:e}=t;return new Um(()=>y(this,null,function*(){let n=Zt(e),r;if(n.token?r=yield qm(t,!0):r=yield qm(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Zt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},n0.RETRIAL_MIN_WAIT,n0.RETRIAL_MAX_WAIT)}function rj(t,e){let n=Zt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function za(t){return t.expireTimeMillis-Date.now()>0}function i0(t){return{token:XL(JL),error:t}}var Hm=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Zt(this.app);for(let n of e)h0(this.app,n.next);return Promise.resolve()}};function ij(t,e){return new Hm(t,e)}function sj(t){return{getToken:e=>qm(t,e),getLimitedUseToken:()=>ej(t),addTokenListener:e=>tj(t,"INTERNAL",e),removeTokenListener:e=>h0(t.app,e)}}var oj="@firebase/app-check",aj="0.8.3";var uj="app-check",s0="app-check-internal";function cj(){jo(new Hr(uj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return ij(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(s0).initialize()})),jo(new Hr(s0,t=>{let e=t.getProvider("app-check").getImmediate();return sj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),er(oj,aj)}cj();var lj=["localhost","0.0.0.0","127.0.0.1"],S6=typeof window<"u"&&lj.includes(window.location.hostname);var zm=new x("angularfire2.auth.use-emulator"),Gm=new x("angularfire2.auth.settings"),Wm=new x("angularfire2.auth.tenant-id"),Km=new x("angularfire2.auth.langugage-code"),Qm=new x("angularfire2.auth.use-device-language"),Ym=new x("angularfire.auth.persistence"),Zm=(t,e,n,r,i,s,o,a)=>md(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(let[c,l]of Object.entries(o))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]),Ga=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,c,l,d,h,f){let v=new Ce,w=F(void 0).pipe(xt(o.outsideAngular),ve(()=>s.runOutsideAngular(()=>import("./chunk-2X4LOZNH.js"))),V(()=>Ha(n,s,r)),V(m=>Zm(m,s,a,c,l,d,u,h)),Nc({bufferSize:1,refCount:!1}));if(gr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{w.pipe(Rt()).subscribe();let m=w.pipe(ve(C=>C.getRedirectResult().then(N=>N,()=>null)),Dt,Nc({bufferSize:1,refCount:!1})),E=w.pipe(ve(C=>new Y(N=>({unsubscribe:s.runOutsideAngular(()=>C.onAuthStateChanged(U=>N.next(U),U=>N.error(U),()=>N.complete()))})))),P=w.pipe(ve(C=>new Y(N=>({unsubscribe:s.runOutsideAngular(()=>C.onIdTokenChanged(U=>N.next(U),U=>N.error(U),()=>N.complete()))}))));this.authState=m.pipe(Pc(E),qt(o.outsideAngular),xt(o.insideAngular)),this.user=m.pipe(Pc(P),qt(o.outsideAngular),xt(o.insideAngular)),this.idToken=this.user.pipe(ve(C=>C?ee(C.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(ve(C=>C?ee(C.getIdTokenResult()):F(null))),this.credential=Lf(m,v,this.authState.pipe(Ue(C=>!C))).pipe(V(C=>C?.user?C:null),qt(o.outsideAngular),xt(o.insideAngular))}return t0(this,w,s,{spy:{apply:(m,E,P)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&P.then(C=>v.next(C))}}})}static \u0275fac=function(r){return new(r||t)(D(qs),D(Hs,8),D(it),D(se),D(pd),D(zm,8),D(Gm,8),D(Wm,8),D(Km,8),D(Qm,8),D(Ym,8),D(mi,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),H6=(()=>{class t{constructor(){lt.registerVersion("angularfire",yi.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[Ga]})}return t})();var dj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xt={},S,wy=wy||{},z=dj||self;function Rd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ou(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function hj(t){return Object.prototype.hasOwnProperty.call(t,Jm)&&t[Jm]||(t[Jm]=++fj)}var Jm="closure_uid_"+(1e9*Math.random()>>>0),fj=0;function pj(t,e,n){return t.call.apply(t.bind,arguments)}function gj(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ot(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ot=pj:ot=gj,ot.apply(null,arguments)}function vd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function He(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Dr(){this.s=this.s,this.o=this.o}var mj=0;Dr.prototype.s=!1;Dr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),mj!=0)&&hj(this)};Dr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var A0=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function _y(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function g0(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Rd(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function at(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var yj=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};z.addEventListener("test",n,e),z.removeEventListener("test",n,e)}catch{}return t}();function Ja(t){return/^[\s\xa0]*$/.test(t)}function Nd(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function vn(t){return Nd().indexOf(t)!=-1}function Ey(t){return Ey[" "](t),t}Ey[" "]=function(){};function vj(t,e){var n=o2;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var wj=vn("Opera"),Ks=vn("Trident")||vn("MSIE"),S0=vn("Edge"),ry=S0||Ks,M0=vn("Gecko")&&!(Nd().toLowerCase().indexOf("webkit")!=-1&&!vn("Edge"))&&!(vn("Trident")||vn("MSIE"))&&!vn("Edge"),_j=Nd().toLowerCase().indexOf("webkit")!=-1&&!vn("Edge");function x0(){var t=z.document;return t?t.documentMode:void 0}var iy;e:{if(wd="",_d=function(){var t=Nd();if(M0)return/rv:([^\);]+)(\)|;)/.exec(t);if(S0)return/Edge\/([\d\.]+)/.exec(t);if(Ks)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(_j)return/WebKit\/(\S+)/.exec(t);if(wj)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),_d&&(wd=_d?_d[1]:""),Ks&&(Ed=x0(),Ed!=null&&Ed>parseFloat(wd))){iy=String(Ed);break e}iy=wd}var wd,_d,Ed,sy;z.document&&Ks?(Xm=x0(),sy=Xm||parseInt(iy,10)||void 0):sy=void 0;var Xm,Ej=sy;function Xa(t,e){if(at.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(M0){e:{try{Ey(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Ij[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xa.$.h.call(this)}}He(Xa,at);var Ij={2:"touch",3:"pen",4:"mouse"};Xa.prototype.h=function(){Xa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var au="closure_listenable_"+(1e6*Math.random()|0),Dj=0;function Cj(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Dj,this.fa=this.ia=!1}function Pd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Iy(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Tj(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function R0(t){let e={};for(let n in t)e[n]=t[n];return e}var m0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N0(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<m0.length;s++)n=m0[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Od(t){this.src=t,this.g={},this.h=0}Od.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=ay(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Cj(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function oy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=A0(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Pd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ay(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Dy="closure_lm_"+(1e6*Math.random()|0),ey={};function P0(t,e,n,r,i){if(r&&r.once)return k0(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)P0(t,e[s],n,r,i);return null}return n=by(n),t&&t[au]?t.O(e,n,ou(r)?!!r.capture:!!r,i):O0(t,e,n,!1,r,i)}function O0(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ou(i)?!!i.capture:!!i,a=Ty(t);if(a||(t[Dy]=a=new Od(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=bj(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yj||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(V0(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function bj(){function t(n){return e.call(t.src,t.listener,n)}let e=Aj;return t}function k0(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)k0(t,e[s],n,r,i);return null}return n=by(n),t&&t[au]?t.P(e,n,ou(r)?!!r.capture:!!r,i):O0(t,e,n,!0,r,i)}function F0(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)F0(t,e[s],n,r,i);else r=ou(r)?!!r.capture:!!r,n=by(n),t&&t[au]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=ay(s,n,r,i),-1<n&&(Pd(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ty(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ay(e,n,r,i)),(n=-1<t?e[t]:null)&&Cy(n))}function Cy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[au])oy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(V0(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ty(e))?(oy(n,t),n.h==0&&(n.src=null,e[Dy]=null)):Pd(t)}}}function V0(t){return t in ey?ey[t]:ey[t]="on"+t}function Aj(t,e){if(t.fa)t=!0;else{e=new Xa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Cy(t),t=n.call(r,e)}return t}function Ty(t){return t=t[Dy],t instanceof Od?t:null}var ty="__closure_events_fn_"+(1e9*Math.random()>>>0);function by(t){return typeof t=="function"?t:(t[ty]||(t[ty]=function(e){return t.handleEvent(e)}),t[ty])}function qe(){Dr.call(this),this.i=new Od(this),this.S=this,this.J=null}He(qe,Dr);qe.prototype[au]=!0;qe.prototype.removeEventListener=function(t,e,n,r){F0(this,t,e,n,r)};function Ye(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new at(e,t);else if(e instanceof at)e.target=e.target||t;else{var i=e;e=new at(r,t),N0(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Id(o,r,!0,e)&&i}if(o=e.g=t,i=Id(o,r,!0,e)&&i,i=Id(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Id(o,r,!1,e)&&i}qe.prototype.N=function(){if(qe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pd(n[r]);delete t.g[e],t.h--}}this.J=null};qe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};qe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Id(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&oy(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ay=z.JSON.stringify,uy=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Sj(){var t=Sy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var cy=class{constructor(){this.h=this.g=null}add(e,n){let r=L0.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},L0=new uy(()=>new ly,t=>t.reset()),ly=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Mj(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function xj(t){z.setTimeout(()=>{throw t},0)}var eu,tu=!1,Sy=new cy,j0=()=>{let t=z.Promise.resolve(void 0);eu=()=>{t.then(Rj)}},Rj=()=>{for(var t;t=Sj();){try{t.h.call(t.g)}catch(n){xj(n)}var e=L0;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}tu=!1};function kd(t,e){qe.call(this),this.h=t||1,this.g=e||z,this.j=ot(this.qb,this),this.l=Date.now()}He(kd,qe);S=kd.prototype;S.ga=!1;S.T=null;S.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ye(this,"tick"),this.ga&&(My(this),this.start()))}};S.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function My(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}S.N=function(){kd.$.N.call(this),My(this),delete this.g};function xy(t,e,n){if(typeof t=="function")n&&(t=ot(t,n));else if(t&&typeof t.handleEvent=="function")t=ot(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function U0(t){t.g=xy(()=>{t.g=null,t.i&&(t.i=!1,U0(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var dy=class extends Dr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:U0(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function nu(t){Dr.call(this),this.h=t,this.g={}}He(nu,Dr);var y0=[];function B0(t,e,n,r){Array.isArray(n)||(n&&(y0[0]=n.toString()),n=y0);for(var i=0;i<n.length;i++){var s=P0(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function $0(t){Iy(t.g,function(e,n){this.g.hasOwnProperty(n)&&Cy(e)},t),t.g={}}nu.prototype.N=function(){nu.$.N.call(this),$0(this)};nu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Fd(){this.g=!0}Fd.prototype.Ea=function(){this.g=!1};function Nj(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+c+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Pj(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Gs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kj(t,n)+(r?" "+r:"")})}function Oj(t,e){t.info(function(){return"TIMEOUT: "+e})}Fd.prototype.info=function(){};function kj(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ay(n)}catch{return e}}var Ei={},v0=null;function Vd(){return v0=v0||new qe}Ei.Ta="serverreachability";function q0(t){at.call(this,Ei.Ta,t)}He(q0,at);function ru(t){let e=Vd();Ye(e,new q0(e))}Ei.STAT_EVENT="statevent";function H0(t,e){at.call(this,Ei.STAT_EVENT,t),this.stat=e}He(H0,at);function gt(t){let e=Vd();Ye(e,new H0(e,t))}Ei.Ua="timingevent";function z0(t,e){at.call(this,Ei.Ua,t),this.size=e}He(z0,at);function uu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var Ld={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},G0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ry(){}Ry.prototype.h=null;function w0(t){return t.h||(t.h=t.i())}function W0(){}var cu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ny(){at.call(this,"d")}He(Ny,at);function Py(){at.call(this,"c")}He(Py,at);var hy;function jd(){}He(jd,Ry);jd.prototype.g=function(){return new XMLHttpRequest};jd.prototype.i=function(){return{}};hy=new jd;function lu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new nu(this),this.P=Fj,t=ry?125:void 0,this.V=new kd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new K0}function K0(){this.i=null,this.g="",this.h=!1}var Fj=45e3,Q0={},fy={};S=lu.prototype;S.setTimeout=function(t){this.P=t};function py(t,e,n){t.L=1,t.A=Bd(Hn(e)),t.u=n,t.S=!0,Y0(t,null)}function Y0(t,e){t.G=Date.now(),du(t),t.B=Hn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),ib(n.i,"t",r),t.o=0,n=t.l.J,t.h=new K0,t.g=Tb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new dy(ot(t.Pa,t,t.g),t.O)),B0(t.U,t.g,"readystatechange",t.nb),e=t.I?R0(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ru(),Nj(t.j,t.v,t.B,t.m,t.W,t.u)}S.nb=function(t){t=t.target;let e=this.M;e&&wn(t)==3?e.l():this.Pa(t)};S.Pa=function(t){try{if(t==this.g)e:{let l=wn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||ry||this.g&&(this.h.h||this.g.ja()||D0(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?ru(3):ru(2)),Ud(this);var n=this.g.da();this.ca=n;t:if(Z0(this)){var r=D0(this.g);t="";var i=r.length,s=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Za(this);var o="";break t}this.h.i=new z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Pj(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ja(a)){var c=a;break t}}c=null}if(n=c)Gs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gy(this,n);else{this.i=!1,this.s=3,gt(12),vi(this),Za(this);break e}}this.S?(J0(this,l,o),ry&&this.i&&l==3&&(B0(this.U,this.V,"tick",this.mb),this.V.start())):(Gs(this.j,this.m,o,null),gy(this,o)),l==4&&vi(this),this.i&&!this.J&&(l==4?Eb(this.l,this):(this.i=!1,du(this)))}else r2(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),vi(this),Za(this)}}}catch{}finally{}};function Z0(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function J0(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=Vj(t,n),i==fy){e==4&&(t.s=4,gt(14),r=!1),Gs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Q0){t.s=4,gt(15),Gs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Gs(t.j,t.m,i,null),gy(t,i);Z0(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jy(e),e.M=!0,gt(11))):(Gs(t.j,t.m,n,"[Invalid Chunked Response]"),vi(t),Za(t))}S.mb=function(){if(this.g){var t=wn(this.g),e=this.g.ja();this.o<e.length&&(Ud(this),J0(this,t,e),this.i&&t!=4&&du(this))}};function Vj(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?fy:(n=Number(e.substring(n,r)),isNaN(n)?Q0:(r+=1,r+n>e.length?fy:(e=e.slice(r,r+n),t.o=r+n,e)))}S.cancel=function(){this.J=!0,vi(this)};function du(t){t.Y=Date.now()+t.P,X0(t,t.P)}function X0(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=uu(ot(t.lb,t),e)}function Ud(t){t.C&&(z.clearTimeout(t.C),t.C=null)}S.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Oj(this.j,this.B),this.L!=2&&(ru(),gt(17)),vi(this),this.s=2,Za(this)):X0(this,this.Y-t)};function Za(t){t.l.H==0||t.J||Eb(t.l,t)}function vi(t){Ud(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,My(t.V),$0(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function gy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||my(n.i,t))){if(!t.K&&my(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ad(n),Hd(n);else break e;Ly(n),gt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=uu(ot(n.ib,n),6e3));if(1>=ab(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else wi(n,11)}else if((t.K||n.g==t)&&Ad(n),!Ja(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let v=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Oy(s,s.h),s.h=null))}if(r.F){let w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,we(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Cb(r,r.J?r.pa:null,r.Y),o.K){ub(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(Ud(a),du(a)),r.g=o}else wb(r);0<n.j.length&&zd(n)}else c[0]!="stop"&&c[0]!="close"||wi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?wi(n,7):Vy(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ru(4)}catch{}}function Lj(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Rd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function jj(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Rd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function eb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Rd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=jj(t),r=Lj(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var tb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uj(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function _i(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof _i){this.h=t.h,Td(this,t.j),this.s=t.s,this.g=t.g,bd(this,t.m),this.l=t.l;var e=t.i,n=new iu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),_0(this,n),this.o=t.o}else t&&(e=String(t).match(tb))?(this.h=!1,Td(this,e[1]||"",!0),this.s=Qa(e[2]||""),this.g=Qa(e[3]||"",!0),bd(this,e[4]),this.l=Qa(e[5]||"",!0),_0(this,e[6]||"",!0),this.o=Qa(e[7]||"")):(this.h=!1,this.i=new iu(null,this.h))}_i.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ya(e,E0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ya(e,E0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ya(n,n.charAt(0)=="/"?qj:$j,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ya(n,zj)),t.join("")};function Hn(t){return new _i(t)}function Td(t,e,n){t.j=n?Qa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function bd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _0(t,e,n){e instanceof iu?(t.i=e,Gj(t.i,t.h)):(n||(e=Ya(e,Hj)),t.i=new iu(e,t.h))}function we(t,e,n){t.i.set(e,n)}function Bd(t){return we(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ya(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Bj),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bj(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var E0=/[#\/\?@]/g,$j=/[#\?:]/g,qj=/[#\?]/g,Hj=/[#\?@]/g,zj=/#/g;function iu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Cr(t){t.g||(t.g=new Map,t.h=0,t.i&&Uj(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}S=iu.prototype;S.add=function(t,e){Cr(this),this.i=null,t=Qs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nb(t,e){Cr(t),e=Qs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function rb(t,e){return Cr(t),e=Qs(t,e),t.g.has(e)}S.forEach=function(t,e){Cr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};S.ta=function(){Cr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};S.Z=function(t){Cr(this);let e=[];if(typeof t=="string")rb(this,t)&&(e=e.concat(this.g.get(Qs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};S.set=function(t,e){return Cr(this),this.i=null,t=Qs(this,t),rb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};S.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ib(t,e,n){nb(t,e),0<n.length&&(t.i=null,t.g.set(Qs(t,e),_y(n)),t.h+=n.length)}S.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Qs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Gj(t,e){e&&!t.j&&(Cr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(nb(this,r),ib(this,i,n))},t)),t.j=e}var Wj=class{constructor(t,e){this.g=t,this.map=e}};function sb(t){this.l=t||Kj,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kj=10;function ob(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ab(t){return t.h?1:t.g?t.g.size:0}function my(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Oy(t,e){t.g?t.g.add(e):t.h=e}function ub(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sb.prototype.cancel=function(){if(this.i=cb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function cb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return _y(t.i)}var Qj=class{stringify(t){return z.JSON.stringify(t,void 0)}parse(t){return z.JSON.parse(t,void 0)}};function Yj(){this.g=new Qj}function Zj(t,e,n){let r=n||"";try{eb(t,function(i,s){let o=i;ou(i)&&(o=Ay(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jj(t,e){let n=new Fd;if(z.Image){let r=new Image;r.onload=vd(Dd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vd(Dd,n,r,"TestLoadImage: error",!1,e),r.onabort=vd(Dd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vd(Dd,n,r,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Dd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function hu(t){this.l=t.ec||null,this.j=t.ob||!1}He(hu,Ry);hu.prototype.g=function(){return new $d(this.l,this.j)};hu.prototype.i=function(t){return function(){return t}}({});function $d(t,e){qe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ky,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}He($d,qe);var ky=0;S=$d.prototype;S.open=function(t,e){if(this.readyState!=ky)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,su(this)};S.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};S.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fu(this)),this.readyState=ky};S.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,su(this)),this.g&&(this.readyState=3,su(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lb(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function lb(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}S.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fu(this):su(this),this.readyState==3&&lb(this)}};S.Za=function(t){this.g&&(this.response=this.responseText=t,fu(this))};S.Ya=function(t){this.g&&(this.response=t,fu(this))};S.ka=function(){this.g&&fu(this)};function fu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,su(t)}S.setRequestHeader=function(t,e){this.v.append(t,e)};S.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};S.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function su(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty($d.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Xj=z.JSON.parse;function Te(t){qe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=db,this.L=this.M=!1}He(Te,qe);var db="",e2=/^https?$/i,t2=["POST","PUT"];S=Te.prototype;S.Oa=function(t){this.M=t};S.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hy.g(),this.C=this.u?w0(this.u):w0(hy),this.g.onreadystatechange=ot(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){I0(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=z.FormData&&t instanceof z.FormData,!(0<=A0(t2,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{pb(this),0<this.B&&((this.L=n2(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ot(this.ua,this)):this.A=xy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){I0(this,s)}};function n2(t){return Ks&&typeof t.timeout=="number"&&t.ontimeout!==void 0}S.ua=function(){typeof wy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ye(this,"timeout"),this.abort(8))};function I0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,hb(t),qd(t)}function hb(t){t.F||(t.F=!0,Ye(t,"complete"),Ye(t,"error"))}S.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ye(this,"complete"),Ye(this,"abort"),qd(this))};S.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qd(this,!0)),Te.$.N.call(this)};S.La=function(){this.s||(this.G||this.v||this.l?fb(this):this.kb())};S.kb=function(){fb(this)};function fb(t){if(t.h&&typeof wy<"u"&&(!t.C[1]||wn(t)!=4||t.da()!=2)){if(t.v&&wn(t)==4)xy(t.La,0,t);else if(Ye(t,"readystatechange"),wn(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(tb)[1]||null;!i&&z.self&&z.self.location&&(i=z.self.location.protocol.slice(0,-1)),r=!e2.test(i?i.toLowerCase():"")}n=r}if(n)Ye(t,"complete"),Ye(t,"success");else{t.m=6;try{var s=2<wn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",hb(t)}}finally{qd(t)}}}}function qd(t,e){if(t.g){pb(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ye(t,"ready");try{n.onreadystatechange=r}catch{}}}function pb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}S.isActive=function(){return!!this.g};function wn(t){return t.g?t.g.readyState:0}S.da=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}};S.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};S.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Xj(e)}};function D0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case db:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function r2(t){let e={};t=(t.g&&2<=wn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ja(t[r]))continue;var n=Mj(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}Tj(e,function(r){return r.join(", ")})}S.Ia=function(){return this.m};S.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gb(t){let e="";return Iy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Fy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):we(t,e,n))}function Wa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function mb(t){this.Ga=0,this.j=[],this.l=new Fd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wa("baseRetryDelayMs",5e3,t),this.hb=Wa("retryDelaySeedMs",1e4,t),this.eb=Wa("forwardChannelMaxRetries",2,t),this.xa=Wa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new sb(t&&t.concurrentRequestLimit),this.Ja=new Yj,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}S=mb.prototype;S.ra=8;S.H=1;function Vy(t){if(yb(t),t.H==3){var e=t.W++,n=Hn(t.I);if(we(n,"SID",t.K),we(n,"RID",e),we(n,"TYPE","terminate"),pu(t,n),e=new lu(t,t.l,e),e.L=2,e.A=Bd(Hn(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&z.Image&&(new Image().src=e.A,n=!0),n||(e.g=Tb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),du(e)}Db(t)}function Hd(t){t.g&&(jy(t),t.g.cancel(),t.g=null)}function yb(t){Hd(t),t.u&&(z.clearTimeout(t.u),t.u=null),Ad(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function zd(t){if(!ob(t.i)&&!t.m){t.m=!0;var e=t.Na;eu||j0(),tu||(eu(),tu=!0),Sy.add(e,t),t.C=0}}function i2(t,e){return ab(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=uu(ot(t.Na,t,e),Ib(t,t.C)),t.C++,!0)}S.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new lu(this,this.l,t),s=this.s;if(this.U&&(s?(s=R0(s),N0(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=vb(this,i,e),n=Hn(this.I),we(n,"RID",t),we(n,"CVER",22),this.F&&we(n,"X-HTTP-Session-Id",this.F),pu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(gb(s)))+"&"+e:this.o&&Fy(n,this.o,s)),Oy(this.i,i),this.bb&&we(n,"TYPE","init"),this.P?(we(n,"$req",e),we(n,"SID","null"),i.aa=!0,py(i,n,null)):py(i,n,e),this.H=2}}else this.H==3&&(t?C0(this,t):this.j.length==0||ob(this.i)||C0(this))};function C0(t,e){var n;e?n=e.m:n=t.W++;let r=Hn(t.I);we(r,"SID",t.K),we(r,"RID",n),we(r,"AID",t.V),pu(t,r),t.o&&t.s&&Fy(r,t.o,t.s),n=new lu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=vb(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Oy(t.i,n),py(n,r,e)}function pu(t,e){t.na&&Iy(t.na,function(n,r){we(e,r,n)}),t.h&&eb({},function(n,r){we(e,r,n)})}function vb(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ot(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{Zj(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function wb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;eu||j0(),tu||(eu(),tu=!0),Sy.add(e,t),t.A=0}}function Ly(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=uu(ot(t.Ma,t),Ib(t,t.A)),t.A++,!0)}S.Ma=function(){if(this.u=null,_b(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=uu(ot(this.jb,this),t)}};S.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gt(10),Hd(this),_b(this))};function jy(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function _b(t){t.g=new lu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Hn(t.wa);we(e,"RID","rpc"),we(e,"SID",t.K),we(e,"AID",t.V),we(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&we(e,"TO",t.qa),we(e,"TYPE","xmlhttp"),pu(t,e),t.o&&t.s&&Fy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Bd(Hn(e)),n.u=null,n.S=!0,Y0(n,t)}S.ib=function(){this.v!=null&&(this.v=null,Hd(this),Ly(this),gt(19))};function Ad(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function Eb(t,e){var n=null;if(t.g==e){Ad(t),jy(t),t.g=null;var r=2}else if(my(t.i,e))n=e.F,ub(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Vd(),Ye(r,new z0(r,n)),zd(t)}else wb(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&i2(t,e)||r==2&&Ly(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:wi(t,5);break;case 4:wi(t,10);break;case 3:wi(t,6);break;default:wi(t,2)}}}function Ib(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function wi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ot(t.pb,t);n||(n=new _i("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||Td(n,"https"),Bd(n)),Jj(n.toString(),r)}else gt(2);t.H=0,t.h&&t.h.za(e),Db(t),yb(t)}S.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gt(2)):(this.l.info("Failed to ping google.com"),gt(1))};function Db(t){if(t.H=0,t.ma=[],t.h){let e=cb(t.i);(e.length!=0||t.j.length!=0)&&(g0(t.ma,e),g0(t.ma,t.j),t.i.i.length=0,_y(t.j),t.j.length=0),t.h.ya()}}function Cb(t,e,n){var r=n instanceof _i?Hn(n):new _i(n);if(r.g!="")e&&(r.g=e+"."+r.g),bd(r,r.m);else{var i=z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new _i(null);r&&Td(s,r),e&&(s.g=e),i&&bd(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&we(r,n,e),we(r,"VER",t.ra),pu(t,r),r}function Tb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Te(new hu({ob:n})):new Te(t.va),e.Oa(t.J),e}S.isActive=function(){return!!this.h&&this.h.isActive(this)};function bb(){}S=bb.prototype;S.Ba=function(){};S.Aa=function(){};S.za=function(){};S.ya=function(){};S.isActive=function(){return!0};S.Va=function(){};function Sd(){if(Ks&&!(10<=Number(Ej)))throw Error("Environmental error: no available transport.")}Sd.prototype.g=function(t,e){return new At(t,e)};function At(t,e){qe.call(this),this.g=new mb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ja(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ja(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ys(this)}He(At,qe);At.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Cb(t,null,t.Y),zd(t)};At.prototype.close=function(){Vy(this.g)};At.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ay(t),t=n);e.j.push(new Wj(e.fb++,t)),e.H==3&&zd(e)};At.prototype.N=function(){this.g.h=null,delete this.j,Vy(this.g),delete this.g,At.$.N.call(this)};function Ab(t){Ny.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}He(Ab,Ny);function Sb(){Py.call(this),this.status=1}He(Sb,Py);function Ys(t){this.g=t}He(Ys,bb);Ys.prototype.Ba=function(){Ye(this.g,"a")};Ys.prototype.Aa=function(t){Ye(this.g,new Ab(t))};Ys.prototype.za=function(t){Ye(this.g,new Sb)};Ys.prototype.ya=function(){Ye(this.g,"b")};function s2(){this.blockSize=-1}function Jt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}He(Jt,s2);Jt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ny(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Jt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)ny(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ny(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ny(this,r),i=0;break}}this.h=i,this.i+=e};Jt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function de(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var o2={};function Uy(t){return-128<=t&&128>t?vj(t,function(e){return new de([e|0],0>e?-1:0)}):new de([t|0],0>t?-1:0)}function _n(t){if(isNaN(t)||!isFinite(t))return Ws;if(0>t)return Qe(_n(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yy;return new de(e,0)}function Mb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Qe(Mb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=_n(Math.pow(e,8)),r=Ws,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=_n(Math.pow(e,s)),r=r.R(s).add(_n(o))):(r=r.R(n),r=r.add(_n(o)))}return r}var yy=4294967296,Ws=Uy(0),vy=Uy(1),T0=Uy(16777216);S=de.prototype;S.ea=function(){if(Vt(this))return-Qe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:yy+r)*e,e*=yy}return t};S.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(qn(this))return"0";if(Vt(this))return"-"+Qe(this).toString(t);for(var e=_n(Math.pow(t,6)),n=this,r="";;){var i=xd(n,e).g;n=Md(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,qn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};S.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function qn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Vt(t){return t.h==-1}S.X=function(t){return t=Md(this,t),Vt(t)?-1:qn(t)?0:1};function Qe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new de(n,~t.h).add(vy)}S.abs=function(){return Vt(this)?Qe(this):this};S.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new de(n,n[n.length-1]&-2147483648?-1:0)};function Md(t,e){return t.add(Qe(e))}S.R=function(t){if(qn(this)||qn(t))return Ws;if(Vt(this))return Vt(t)?Qe(this).R(Qe(t)):Qe(Qe(this).R(t));if(Vt(t))return Qe(this.R(Qe(t)));if(0>this.X(T0)&&0>t.X(T0))return _n(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,Cd(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Cd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Cd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Cd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new de(n,0)};function Cd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ka(t,e){this.g=t,this.h=e}function xd(t,e){if(qn(e))throw Error("division by zero");if(qn(t))return new Ka(Ws,Ws);if(Vt(t))return e=xd(Qe(t),e),new Ka(Qe(e.g),Qe(e.h));if(Vt(e))return e=xd(t,Qe(e)),new Ka(Qe(e.g),e.h);if(30<t.g.length){if(Vt(t)||Vt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vy,r=e;0>=r.X(t);)n=b0(n),r=b0(r);var i=zs(n,1),s=zs(r,1);for(r=zs(r,2),n=zs(n,2);!qn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=zs(r,1),n=zs(n,1)}return e=Md(t,i.R(e)),new Ka(i,e)}for(i=Ws;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=_n(n),o=s.R(e);Vt(o)||0<o.X(t);)n-=r,s=_n(n),o=s.R(e);qn(s)&&(s=vy),i=i.add(s),t=Md(t,o)}return new Ka(i,t)}S.gb=function(t){return xd(this,t).h};S.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new de(n,this.h&t.h)};S.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new de(n,this.h|t.h)};S.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new de(n,this.h^t.h)};function b0(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new de(n,t.h)}function zs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new de(i,t.h)}Sd.prototype.createWebChannel=Sd.prototype.g;At.prototype.send=At.prototype.u;At.prototype.open=At.prototype.m;At.prototype.close=At.prototype.close;Ld.NO_ERROR=0;Ld.TIMEOUT=8;Ld.HTTP_ERROR=6;G0.COMPLETE="complete";W0.EventType=cu;cu.OPEN="a";cu.CLOSE="b";cu.ERROR="c";cu.MESSAGE="d";qe.prototype.listen=qe.prototype.O;Te.prototype.listenOnce=Te.prototype.P;Te.prototype.getLastError=Te.prototype.Sa;Te.prototype.getLastErrorCode=Te.prototype.Ia;Te.prototype.getStatus=Te.prototype.da;Te.prototype.getResponseJson=Te.prototype.Wa;Te.prototype.getResponseText=Te.prototype.ja;Te.prototype.send=Te.prototype.ha;Te.prototype.setWithCredentials=Te.prototype.Oa;Jt.prototype.digest=Jt.prototype.l;Jt.prototype.reset=Jt.prototype.reset;Jt.prototype.update=Jt.prototype.j;de.prototype.add=de.prototype.add;de.prototype.multiply=de.prototype.R;de.prototype.modulo=de.prototype.gb;de.prototype.compare=de.prototype.X;de.prototype.toNumber=de.prototype.ea;de.prototype.toString=de.prototype.toString;de.prototype.getBits=de.prototype.D;de.fromNumber=_n;de.fromString=Mb;var xb=Xt.createWebChannelTransport=function(){return new Sd},Rb=Xt.getStatEventTarget=function(){return Vd()},Gd=Xt.ErrorCode=Ld,Nb=Xt.EventType=G0,Pb=Xt.Event=Ei,By=Xt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ob=Xt.FetchXmlHttpFactory=hu,gu=Xt.WebChannel=W0,kb=Xt.XhrIo=Te,Fb=Xt.Md5=Jt,Ii=Xt.Integer=de;var Vb="@firebase/firestore";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var So="10.11.1";var Rr=new oc("@firebase/firestore");function to(){return Rr.logLevel}function VA(t){Rr.setLogLevel(t)}function I(t,...e){if(Rr.logLevel<=sn.DEBUG){let n=e.map(Hw);Rr.debug(`Firestore (${So}): ${t}`,...n)}}function Me(t,...e){if(Rr.logLevel<=sn.ERROR){let n=e.map(Hw);Rr.error(`Firestore (${So}): ${t}`,...n)}}function jt(t,...e){if(Rr.logLevel<=sn.WARN){let n=e.map(Hw);Rr.warn(`Firestore (${So}): ${t}`,...n)}}function Hw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function R(t="Unexpected state"){let e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+t;throw Me(e),new Error(e)}function k(t,e){t||R()}function LA(t,e){t||R()}function A(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=class extends H_{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Le=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var rh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Gy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}},Wy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ky=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Le;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Le,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Le)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new rh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Ve(e)}},Qy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Yy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Qy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Zy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Jy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,I("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new Zy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function a2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ih=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=a2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function W(t,e){return t<e?-1:t>e?1:0}function lo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function jA(t){return t+"\0"}var De=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var L=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new De(0,0))}static max(){return new t(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&R(),r===void 0?r=e.length-n:r>e.length-n&&R(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},re=class t extends sh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},u2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xe=class t extends sh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return u2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new _(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var b=class t{constructor(e){this.path=e}static fromPath(e){return new t(re.fromString(e))}static fromName(e){return new t(re.fromString(e).popFirst(5))}static empty(){return new t(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new re(e.slice()))}};var ho=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Xy(t){return t.fields.find(e=>e.kind===2)}function Ci(t){return t.fields.filter(e=>e.kind!==2)}ho.UNKNOWN_ID=-1;var ao=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Au=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ut.min())}};function UA(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=L.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new Ut(i,b.empty(),e)}function BA(t){return new Ut(t.readTime,t.key,-1)}var Ut=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(L.min(),b.empty(),-1)}static max(){return new t(L.max(),b.empty(),-1)}};function zw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:W(t.largestBatchId,e.largestBatchId))}var $A="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",oh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Br(t){return y(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==$A)throw t;I("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&R(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var ah=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Le,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new xi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Gw(r.target.error);this.V.reject(new xi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new xi(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new tv(n)}},Nr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Lo())===12.2&&Me("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),Ti(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sc())return!1;if(t.C())return!0;let e=Lo(),n=t.S(e),r=0<n&&n<10,i=qA(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return y(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new xi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new _(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new _(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new xi(e,o))},i.onupgradeneeded=s=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=ah.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&o<3;if(I("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function qA(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var ev=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ti(this.B.delete())}},xi=class extends _{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function $r(t){return t.name==="IndexedDbTransactionError"}var tv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(I("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ti(r)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),Ti(this.store.add(e))}get(e){return Ti(this.store.get(e)).next(n=>(n===void 0&&(n=null),I("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),Ti(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),Ti(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new p((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){I("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=s=>{let o=Gw(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){let r=[];return new p((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let u=new ev(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){let l=c.catch(d=>(u.done(),p.reject(d)));r.push(l)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ti(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Gw(r.target.error);n(i)}})}var Lb=!1;function Gw(t){let e=Nr.S(Lo());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new _("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lb||(Lb=!0,setTimeout(()=>{throw r},0)),r}}return t}var nv=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){I("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{I("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){$r(n)?I("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Br(n)}yield this.X(6e4)}))}},rv=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,s=!0;return p.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return I("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(I("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=BA(s);zw(o,r)>0&&(r=o)}),new Ut(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var St=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Qu(t){return t==null}function Su(t){return t===0&&1/t==-1/0}function HA(t){return typeof t=="number"&&Number.isInteger(t)&&!Su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function mt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jb(e)),e=c2(t.get(n),e);return jb(e)}function c2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function jb(t){return t+""}function En(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),re.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&R(),t.charAt(o+1)){case"":let a=t.substring(s,o),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:R()}s=o+2}return new re(r)}var Ub=["userId","batchId"];function Zd(t,e){return[t,mt(e)]}function zA(t,e,n){return[t,mt(e),n]}var l2={},d2=["prefixPath","collectionGroup","readTime","documentId"],h2=["prefixPath","collectionGroup","documentId"],f2=["collectionGroup","readTime","prefixPath","documentId"],p2=["canonicalId","targetId"],g2=["targetId","path"],m2=["path","targetId"],y2=["collectionId","parent"],v2=["indexId","uid"],w2=["uid","sequenceNumber"],_2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],E2=["indexId","uid","orderedDocumentKey"],I2=["userId","collectionPath","documentId"],D2=["userId","collectionPath","largestBatchId"],C2=["userId","collectionGroup","largestBatchId"],GA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],T2=[...GA,"documentOverlays"],WA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KA=WA,QA=[...KA,"indexConfiguration","indexState","indexEntries"],b2=QA;var Mu=class extends oh{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Ge(t,e){let n=A(t);return Nr.F(n._e,e)}function Bb(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $i(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var _e=class t{constructor(e,n){this.comparator=e,this.root=n||Dn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oo(this.root,e,this.comparator,!1)}getReverseIterator(){return new oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oo(this.root,e,this.comparator,!0)}},oo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw R();let e=this.left.check();if(e!==this.right.check())throw R();return e+(this.isRed()?0:1)}};Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw R()}get value(){throw R()}get color(){throw R()}get left(){throw R()}get right(){throw R()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ge=class t{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uh(this.data.getIterator())}getIteratorFrom(e){return new uh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},uh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Zs(t){return t.hasNext()?t.getNext():void 0}var Mt=class t{constructor(e){this.fields=e,e.sort(xe.comparator)}static empty(){return new t([])}unionWith(e){let n=new ge(xe.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ch=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function ZA(){return typeof atob<"u"}var ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ch("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ze.EMPTY_BYTE_STRING=new ze("");var A2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wn(t){if(k(!!t),typeof t=="string"){let e=0,n=A2.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?ze.fromBase64String(t):ze.fromUint8Array(t)}function Xh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ww(t){let e=t.mapValue.fields.__previous_value__;return Xh(e)?Ww(e):e}function xu(t){let e=Wn(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}var iv=class{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Or=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Mr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jd={nullValue:"NULL_VALUE"};function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xh(t)?4:JA(t)?9007199254740991:10:R()}function bn(t,e){if(t===e)return!0;let n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Wn(i.timestampValue),a=Wn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Pr(i.bytesValue).isEqual(Pr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=be(i.doubleValue),a=be(s.doubleValue);return o===a?Su(o)===Su(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Bb(o)!==Bb(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!bn(o[u],a[u])))return!1;return!0}(t,e);default:return R()}}function Ru(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function kr(t,e){if(t===e)return 0;let n=Ri(t),r=Ri(e);if(n!==r)return W(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return W(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=be(s.integerValue||s.doubleValue),u=be(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return $b(t.timestampValue,e.timestampValue);case 4:return $b(xu(t),xu(e));case 5:return W(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Pr(s),u=Pr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=W(a[c],u[c]);if(l!==0)return l}return W(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=W(be(s.latitude),be(o.latitude));return a!==0?a:W(be(s.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=kr(a[c],u[c]);if(l)return l}return W(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Mr.mapValue&&o===Mr.mapValue)return 0;if(s===Mr.mapValue)return 1;if(o===Mr.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=W(u[d],l[d]);if(h!==0)return h;let f=kr(a[u[d]],c[l[d]]);if(f!==0)return f}return W(u.length,l.length)}(t.mapValue,e.mapValue);default:throw R()}}function $b(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return W(t,e);let n=Wn(t),r=Wn(e),i=W(n.seconds,r.seconds);return i!==0?i:W(n.nanos,r.nanos)}function fo(t){return sv(t)}function sv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Wn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=sv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${sv(n.fields[o])}`;return i+"}"}(t.mapValue):R()}function Ni(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ov(t){return!!t&&"integerValue"in t}function Nu(t){return!!t&&"arrayValue"in t}function qb(t){return!!t&&"nullValue"in t}function Hb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xd(t){return!!t&&"mapValue"in t}function Iu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return $i(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Iu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Iu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function S2(t){return"nullValue"in t?Jd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ni(Or.empty(),b.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:R()}function M2(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ni(Or.empty(),b.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Mr:R()}function zb(t,e){let n=kr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Gb(t,e){let n=kr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(n)}setAll(e){let n=xe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Iu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$i(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Iu(this.value))}};function XA(t){let e=[];return $i(t.fields,(n,r)=>{let i=new xe([n]);if(Xd(r)){let s=XA(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Mt(e)}var je=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,L.min(),L.min(),L.min(),ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,L.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,L.min(),L.min(),ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,L.min(),L.min(),ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(L.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=L.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var An=class{constructor(e,n){this.position=e,this.inclusive=n}};function Wb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=b.comparator(b.fromName(o.referenceValue),n.key):r=kr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}var Pi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function x2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var lh=class{},X=class t extends lh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cv(e,n,r):n==="array-contains"?new hv(e,r):n==="in"?new dh(e,r):n==="not-in"?new fv(e,r):n==="array-contains-any"?new pv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lv(e,r):new dv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(kr(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(kr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return R()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},he=class t extends lh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return po(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function po(t){return t.op==="and"}function av(t){return t.op==="or"}function Kw(t){return eS(t)&&po(t)}function eS(t){for(let e of t.filters)if(e instanceof he)return!1;return!0}function uv(t){if(t instanceof X)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(Kw(t))return t.filters.map(e=>uv(e)).join(",");{let e=t.filters.map(n=>uv(n)).join(",");return`${t.op}(${e})`}}function tS(t,e){return t instanceof X?function(r,i){return i instanceof X&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)}(t,e):t instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tS(o,i.filters[a]),!0):!1}(t,e):void R()}function nS(t,e){let n=t.filters.concat(e);return he.create(n,t.op)}function rS(t){return t instanceof X?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof he?function(n){return n.op.toString()+" {"+n.getFilters().map(rS).join(" ,")+"}"}(t):"Filter"}var cv=class extends X{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},lv=class extends X{constructor(e,n){super(e,"in",n),this.keys=iS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},dv=class extends X{constructor(e,n){super(e,"not-in",n),this.keys=iS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function iS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}var hv=class extends X{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Nu(n)&&Ru(n.arrayValue,this.value)}},dh=class extends X{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ru(this.value.arrayValue,n)}},fv=class extends X{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ru(this.value.arrayValue,n)}},pv=class extends X{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Nu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ru(this.value.arrayValue,r))}};var gv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function mv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gv(t,e,n,r,i,s,o)}function Oi(t){let e=A(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Qu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.ue=n}return e.ue}function Yu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kb(t.startAt,e.startAt)&&Kb(t.endAt,e.endAt)}function hh(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fh(t,e){return t.filters.filter(n=>n instanceof X&&n.field.isEqual(e))}function Qb(t,e,n){let r=Jd,i=!0;for(let s of fh(t,e)){let o=Jd,a=!0;switch(s.op){case"<":case"<=":o=S2(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Jd}zb({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];zb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Yb(t,e,n){let r=Mr,i=!0;for(let s of fh(t,e)){let o=Mr,a=!0;switch(s.op){case">=":case">":o=M2(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Mr}Gb({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];Gb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var en=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sS(t,e,n,r,i,s,o,a){return new en(t,e,n,r,i,s,o,a)}function Mo(t){return new en(t)}function Zb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qw(t){return t.collectionGroup!==null}function uo(t){let e=A(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ge(xe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Pi(s,r))}),n.has(xe.keyField().canonicalString())||e.ce.push(new Pi(xe.keyField(),r))}return e.ce}function yt(t){let e=A(t);return e.le||(e.le=R2(e,uo(t))),e.le}function R2(t,e){if(t.limitType==="F")return mv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Pi(i.field,s)});let n=t.endAt?new An(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new An(t.startAt.position,t.startAt.inclusive):null;return mv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yv(t,e){let n=t.filters.concat([e]);return new en(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ph(t,e,n){return new en(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zu(t,e){return Yu(yt(t),yt(e))&&t.limitType===e.limitType}function oS(t){return`${Oi(yt(t))}|lt:${t.limitType}`}function no(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>rS(i)).join(", ")}]`),Qu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fo(i)).join(",")),`Target(${r})`}(yt(t))}; limitType=${t.limitType})`}function Ju(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):b.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of uo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let c=Wb(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,uo(r),i)||r.endAt&&!function(o,a,u){let c=Wb(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,uo(r),i))}(t,e)}function aS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uS(t){return(e,n)=>{let r=!1;for(let i of uo(t)){let s=N2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function N2(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?kr(u,c):R()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return R()}}var Sn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return YA(this.inner)}size(){return this.innerSize}};var P2=new _e(b.comparator);function Ct(){return P2}var cS=new _e(b.comparator);function _u(...t){let e=cS;for(let n of t)e=e.insert(n.key,n);return e}function lS(t){let e=cS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function In(){return Du()}function dS(){return Du()}function Du(){return new Sn(t=>t.toString(),(t,e)=>t.isEqual(e))}var O2=new _e(b.comparator),k2=new ge(b.comparator);function K(...t){let e=k2;for(let n of t)e=e.add(n);return e}var F2=new ge(W);function Yw(){return F2}function hS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(e)?"-0":e}}function fS(t){return{integerValue:""+t}}function pS(t,e){return HA(e)?fS(e):hS(t,e)}var go=class{constructor(){this._=void 0}};function V2(t,e,n){return t instanceof Fr?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Xh(s)&&(s=Ww(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Kn?mS(t,e):t instanceof Qn?yS(t,e):function(i,s){let o=gS(i,s),a=Jb(o)+Jb(i.Pe);return ov(o)&&ov(i.Pe)?fS(a):hS(i.serializer,a)}(t,e)}function L2(t,e,n){return t instanceof Kn?mS(t,e):t instanceof Qn?yS(t,e):n}function gS(t,e){return t instanceof Vr?function(r){return ov(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Fr=class extends go{},Kn=class extends go{constructor(e){super(),this.elements=e}};function mS(t,e){let n=vS(e);for(let r of t.elements)n.some(i=>bn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Qn=class extends go{constructor(e){super(),this.elements=e}};function yS(t,e){let n=vS(e);for(let r of t.elements)n=n.filter(i=>!bn(i,r));return{arrayValue:{values:n}}}var Vr=class extends go{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Jb(t){return be(t.integerValue||t.doubleValue)}function vS(t){return Nu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ki=class{constructor(e,n){this.field=e,this.transform=n}};function j2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Kn&&i instanceof Kn||r instanceof Qn&&i instanceof Qn?lo(r.elements,i.elements,bn):r instanceof Vr&&i instanceof Vr?bn(r.Pe,i.Pe):r instanceof Fr&&i instanceof Fr}(t.transform,e.transform)}var vv=class{constructor(e,n){this.version=e,this.transformResults=n}},Ae=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var mo=class{};function wS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jr(t.key,Ae.none()):new Lr(t.key,t.data,Ae.none());{let n=t.data,r=ct.empty(),i=new ge(xe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new tn(t.key,r,new Mt(i.toArray()),Ae.none())}}function U2(t,e,n){t instanceof Lr?function(i,s,o){let a=i.value.clone(),u=eA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof tn?function(i,s,o){if(!eh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=eA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(_S(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Cu(t,e,n,r){return t instanceof Lr?function(s,o,a,u){if(!eh(s.precondition,o))return a;let c=s.value.clone(),l=tA(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof tn?function(s,o,a,u){if(!eh(s.precondition,o))return a;let c=tA(s.fieldTransforms,u,o),l=o.data;return l.setAll(_S(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return eh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function B2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=gS(r.transform,i||null);s!=null&&(n===null&&(n=ct.empty()),n.set(r.field,s))}return n||null}function Xb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lo(r,i,(s,o)=>j2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Lr=class extends mo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},tn=class extends mo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function _S(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function eA(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,L2(o,a,n[i]))}return r}function tA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,V2(s,o,e))}return r}var jr=class extends mo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Pu=class extends mo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ou=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&U2(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=dS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=wS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(L.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),K())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,r)=>Xb(n,r))&&lo(this.baseMutations,e.baseMutations,(n,r)=>Xb(n,r))}},wv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return O2}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var ku=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _v=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,ne;function ES(t){switch(t){default:return R();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function IS(t){if(t===void 0)return Me("GRPC error has no .code"),g.UNKNOWN;switch(t){case ke.OK:return g.OK;case ke.CANCELLED:return g.CANCELLED;case ke.UNKNOWN:return g.UNKNOWN;case ke.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case ke.INTERNAL:return g.INTERNAL;case ke.UNAVAILABLE:return g.UNAVAILABLE;case ke.UNAUTHENTICATED:return g.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case ke.NOT_FOUND:return g.NOT_FOUND;case ke.ALREADY_EXISTS:return g.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return g.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case ke.ABORTED:return g.ABORTED;case ke.OUT_OF_RANGE:return g.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return g.UNIMPLEMENTED;case ke.DATA_LOSS:return g.DATA_LOSS;default:return R()}}(ne=ke||(ke={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";var nA=null;function DS(){return new TextEncoder}var $2=new Ii([4294967295,4294967295],0);function rA(t){let e=DS().encode(t),n=new Fb;return n.update(e),new Uint8Array(n.digest())}function iA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ii([n,r],0),new Ii([i,s],0)]}var Ev=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mi(`Invalid padding: ${n}`);if(r<0)throw new Mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ii.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ii.fromNumber(r)));return i.compare($2)===1&&(i=new Ii([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=rA(e),[r,i]=iA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=rA(e),[r,i]=iA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Mi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Fu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(L.min(),i,new _e(W),Ct(),K())}},Vu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,K(),K(),K())}};var co=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},gh=class{constructor(e,n){this.targetId=e,this.me=n}},mh=class{constructor(e,n,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},yh=class{constructor(){this.fe=0,this.ge=oA(),this.pe=ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=K(),n=K(),r=K();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:R()}}),new Vu(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=oA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,k(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Iv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ct(),this.qe=sA(),this.Qe=new _e(W)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:R()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(hh(s))if(r===0){let o=new b(s.path);this.Ue(n,o,je.newNoDocument(o,L.min()))}else k(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}nA?.et(function(l,d,h,f,v){var w,m,E,P,C,N;let U={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},B=d.unchangedNames;return B&&(U.bloomFilter={applied:v===0,hashCount:(w=B?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(P=(E=(m=B?.bits)===null||m===void 0?void 0:m.bitmap)===null||E===void 0?void 0:E.length)!==null&&P!==void 0?P:0,padding:(N=(C=B?.bits)===null||C===void 0?void 0:C.padding)!==null&&N!==void 0?N:0,mightContain:ue=>{var wt;return(wt=f?.mightContain(ue))!==null&&wt!==void 0&&wt}}),U}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Pr(r).toUint8Array()}catch(u){if(u instanceof ch)return jt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ev(o,i,s)}catch(u){return jt(u instanceof Mi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&hh(a.target)){let u=new b(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,je.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=K();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Fu(e,n,this.Qe,this.ke,r);return this.ke=Ct(),this.qe=sA(),this.Qe=new _e(W),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new yh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ge(W),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function sA(){return new _e(b.comparator)}function oA(){return new _e(b.comparator)}var q2={asc:"ASCENDING",desc:"DESCENDING"},H2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z2={and:"AND",or:"OR"},Dv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Cv(t,e){return t.useProto3Json||Qu(e)?e:{value:e}}function yo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function G2(t,e){return yo(t,e.toTimestamp())}function Re(t){return k(!!t),L.fromTimestamp(function(n){let r=Wn(n);return new De(r.seconds,r.nanos)}(t))}function Zw(t,e){return Tv(t,e).canonicalString()}function Tv(t,e){let n=function(i){return new re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TS(t){let e=re.fromString(t);return k(kS(e)),e}function Lu(t,e){return Zw(t.databaseId,e.path)}function Cn(t,e){let n=TS(e);if(n.get(1)!==t.databaseId.projectId)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(SS(n))}function bS(t,e){return Zw(t.databaseId,e)}function AS(t){let e=TS(t);return e.length===4?re.emptyPath():SS(e)}function bv(t){return new re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SS(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aA(t,e,n){return{name:Lu(t,e),fields:n.value.mapValue.fields}}function MS(t,e,n){let r=Cn(t,e.name),i=Re(e.updateTime),s=e.createTime?Re(e.createTime):L.min(),o=new ct({mapValue:{fields:e.fields}}),a=je.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function W2(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let s=Cn(r,i.found.name),o=Re(i.found.updateTime),a=i.found.createTime?Re(i.found.createTime):L.min(),u=new ct({mapValue:{fields:i.found.fields}});return je.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let s=Cn(r,i.missing),o=Re(i.readTime);return je.newNoDocument(s,o)}(t,e):R()}function K2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:R()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(k(l===void 0||typeof l=="string"),ze.fromBase64String(l||"")):(k(l===void 0||l instanceof Buffer||l instanceof Uint8Array),ze.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?g.UNKNOWN:IS(c.code);return new _(l,c.message||"")}(o);n=new mh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Cn(t,r.document.name),s=Re(r.document.updateTime),o=r.document.createTime?Re(r.document.createTime):L.min(),a=new ct({mapValue:{fields:r.document.fields}}),u=je.newFoundDocument(i,s,o,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new co(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Cn(t,r.document),s=r.readTime?Re(r.readTime):L.min(),o=je.newNoDocument(i,s),a=r.removedTargetIds||[];n=new co([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Cn(t,r.document),s=r.removedTargetIds||[];n=new co([],s,i,null)}else{if(!("filter"in e))return R();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new _v(i,s),a=r.targetId;n=new gh(a,o)}}return n}function ju(t,e){let n;if(e instanceof Lr)n={update:aA(t,e.key,e.value)};else if(e instanceof jr)n={delete:Lu(t,e.key)};else if(e instanceof tn)n={update:aA(t,e.key,e.data),updateMask:eU(e.fieldMask)};else{if(!(e instanceof Pu))return R();n={verify:Lu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Fr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Kn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vr)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw R()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:G2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:R()}(t,e.precondition)),n}function Av(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Ae.updateTime(Re(s.updateTime)):s.exists!==void 0?Ae.exists(s.exists):Ae.none()}(e.currentDocument):Ae.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),u=new Fr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new Kn(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new Qn(l)}else"increment"in a?u=new Vr(o,a.increment):R();let c=xe.fromServerFormat(a.fieldPath);return new ki(c,u)}(t,i)):[];if(e.update){e.update.name;let i=Cn(t,e.update.name),s=new ct({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(u){let c=u.fieldPaths||[];return new Mt(c.map(l=>xe.fromServerFormat(l)))}(e.updateMask);return new tn(i,s,o,n,r)}return new Lr(i,s,n,r)}if(e.delete){let i=Cn(t,e.delete);return new jr(i,n)}if(e.verify){let i=Cn(t,e.verify);return new Pu(i,n)}return R()}function Q2(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Re(i.updateTime):Re(s);return o.isEqual(L.min())&&(o=Re(s)),new vv(o,i.transformResults||[])}(n,e))):[]}function xS(t,e){return{documents:[bS(t,e.path)]}}function RS(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bS(t,i);let s=function(c){if(c.length!==0)return OS(he.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:ro(h.field),direction:Z2(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Cv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function NS(t){let e=AS(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=PS(d);return h instanceof he&&Kw(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(v){return new Pi(io(v.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Qu(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new An(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new An(f,h)}(n.endAt)),sS(e,i,o,s,a,"F",u,c)}function Y2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return R()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=io(n.unaryFilter.field);return X.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=io(n.unaryFilter.field);return X.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=io(n.unaryFilter.field);return X.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=io(n.unaryFilter.field);return X.create(o,"!=",{nullValue:"NULL_VALUE"});default:return R()}}(t):t.fieldFilter!==void 0?function(n){return X.create(io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return R()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return he.create(n.compositeFilter.filters.map(r=>PS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return R()}}(n.compositeFilter.op))}(t):R()}function Z2(t){return q2[t]}function J2(t){return H2[t]}function X2(t){return z2[t]}function ro(t){return{fieldPath:t.canonicalString()}}function io(t){return xe.fromServerFormat(t.fieldPath)}function OS(t){return t instanceof X?function(n){if(n.op==="=="){if(Hb(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(qb(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hb(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(qb(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:J2(n.op),value:n.value}}}(t):t instanceof he?function(n){let r=n.getFilters().map(i=>OS(i));return r.length===1?r[0]:{compositeFilter:{op:X2(n.op),filters:r}}}(t):R()}function eU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var vo=class t{constructor(e,n,r,i,s=L.min(),o=L.min(),a=ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vh=class{constructor(e){this.ut=e}};function tU(t,e){let n;if(e.document)n=MS(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=b.fromSegments(e.noDocument.path),i=Vi(e.noDocument.readTime);n=je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return R();{let r=b.fromSegments(e.unknownDocument.path),i=Vi(e.unknownDocument.version);n=je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new De(i[0],i[1]);return L.fromTimestamp(s)}(e.readTime)),n}function uA(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Lu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:yo(s,o.version.toTimestamp()),createTime:yo(s,o.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fi(e.version)};else{if(!e.isUnknownDocument())return R();r.unknownDocument={path:n.path.toArray(),version:Fi(e.version)}}return r}function wh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vi(t){let e=new De(t.seconds,t.nanoseconds);return L.fromTimestamp(e)}function bi(t,e){let n=(e.baseMutations||[]).map(s=>Av(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Av(t.ut,s)),i=De.fromMillis(e.localWriteTimeMs);return new Ou(e.batchId,i,n,r)}function Eu(t){let e=Vi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Vi(t.lastLimboFreeSnapshotVersion):L.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return k(s.documents.length===1),yt(Mo(AS(s.documents[0])))}(t.query):function(s){return yt(NS(s))}(t.query),new vo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ze.fromBase64String(t.resumeToken))}function FS(t,e){let n=Fi(e.snapshotVersion),r=Fi(e.lastLimboFreeSnapshotVersion),i;i=hh(e.target)?xS(t.ut,e.target):RS(t.ut,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Jw(t){let e=NS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ph(e,e.limit,"L"):e}function $y(t,e){return new ku(e.largestBatchId,Av(t.ut,e.overlayMutation))}function cA(t,e){let n=e.path.lastSegment();return[t,mt(e.path.popLast()),n]}function lA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Fi(r.readTime),documentKey:mt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Sv=class{getBundleMetadata(e,n){return dA(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Vi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return dA(e).put(function(i){return{bundleId:i.id,createTime:Fi(Re(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return hA(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Jw(s.bundledQuery),readTime:Vi(s.readTime)}}(r)})}saveNamedQuery(e,n){return hA(e).put(function(i){return{name:i.name,readTime:Fi(Re(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function dA(t){return Ge(t,"bundles")}function hA(t){return Ge(t,"namedQueries")}var _h=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return mu(e).get(cA(this.userId,n)).next(r=>r?$y(this.serializer,r):null)}getOverlays(e,n){let r=In();return p.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new ku(n,o);i.push(this.lt(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(mt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(mu(e).j("collectionPathOverlayIndex",a))}),p.waitFor(s)}getOverlaysForCollection(e,n,r){let i=In(),s=mt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return mu(e).U("collectionPathOverlayIndex",o).next(a=>{for(let u of a){let c=$y(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=In(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=$y(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):l.done()}).next(()=>s)}lt(e,n){return mu(e).put(function(i,s,o){let[a,u,c]=cA(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ju(i.ut,o.mutation)}}(this.serializer,this.userId,n))}};function mu(t){return Ge(t,"documentOverlays")}var zn=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Su(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=Wn(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Pr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?JA(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):R()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),b.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};zn.St=new zn;function nU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function fA(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=nU(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var Mv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Lt(e),r=fA(n);this.Bt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Lt(e),r=fA(n);this.Bt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},xv=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},Rv=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},Ai=class{constructor(){this.Wt=new Mv,this.Gt=new xv(this.Wt),this.zt=new Rv(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var Si=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Tr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=pA(t.arrayValue,e.arrayValue),n!==0?n:(n=pA(t.directionalValue,e.directionalValue),n!==0?n:b.comparator(t.documentKey,e.documentKey)))}function pA(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Eh=class{constructor(e){this.Jt=new ge((n,r)=>xe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(k(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Xy(e);if(n!==void 0&&!this.tn(n))return!1;let r=Ci(e),i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new ge(xe.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ao(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ao(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ao(r.field,r.dir==="asc"?0:1)));return new ho(ho.UNKNOWN_ID,this.collectionId,n,Au.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function VS(t){var e,n;if(k(t instanceof X||t instanceof he),t instanceof X){if(t instanceof dh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>X.create(t.field,"==",s)))||[];return he.create(i,"or")}return t}let r=t.filters.map(i=>VS(i));return he.create(r,t.op)}function rU(t){if(t.getFilters().length===0)return[];let e=Ov(VS(t));return k(LS(e)),Nv(e)||Pv(e)?[e]:e.getFilters()}function Nv(t){return t instanceof X}function Pv(t){return t instanceof he&&Kw(t)}function LS(t){return Nv(t)||Pv(t)||function(n){if(n instanceof he&&av(n)){for(let r of n.getFilters())if(!Nv(r)&&!Pv(r))return!1;return!0}return!1}(t)}function Ov(t){if(k(t instanceof X||t instanceof he),t instanceof X)return t;if(t.filters.length===1)return Ov(t.filters[0]);let e=t.filters.map(r=>Ov(r)),n=he.create(e,t.op);return n=Ih(n),LS(n)?n:(k(n instanceof he),k(po(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>Xw(r,i)))}function Xw(t,e){let n;return k(t instanceof X||t instanceof he),k(e instanceof X||e instanceof he),n=t instanceof X?e instanceof X?function(i,s){return he.create([i,s],"and")}(t,e):gA(t,e):e instanceof X?gA(e,t):function(i,s){if(k(i.filters.length>0&&s.filters.length>0),po(i)&&po(s))return nS(i,s.getFilters());let o=av(i)?i:s,a=av(i)?s:i,u=o.filters.map(c=>Xw(c,a));return he.create(u,"or")}(t,e),Ih(n)}function gA(t,e){if(po(e))return nS(e,t.getFilters());{let n=e.filters.map(r=>Xw(t,r));return he.create(n,"or")}}function Ih(t){if(k(t instanceof X||t instanceof he),t instanceof X)return t;let e=t.getFilters();if(e.length===1)return Ih(e[0]);if(eS(t))return t;let n=e.map(i=>Ih(i)),r=[];return n.forEach(i=>{i instanceof X?r.push(i):i instanceof he&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:he.create(r,t.op)}var kv=class{constructor(){this.on=new Uu}addToCollectionParentIndex(e,n){return this.on.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Ut.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Ut.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},Uu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ge(re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ge(re.comparator)).toArray()}};var Wd=new Uint8Array(0),Fv=class{constructor(e,n){this.databaseId=n,this._n=new Uu,this.an=new Sn(r=>Oi(r),(r,i)=>Yu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let s={collectionId:r,parent:mt(i)};return mA(e).put(s)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[jA(n),""],!1,!0);return mA(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(En(o.parent))}return r})}addFieldIndex(e,n){let r=yu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=Xs(e);return s.next(a=>{o.put(lA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=yu(e),i=Xs(e),s=Js(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=yu(e),r=Js(e),i=Xs(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return p.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Eh(r).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=Js(e),i=!0,s=new Map;return p.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=K(),a=[];return p.forEach(s,(u,c)=>{I("IndexedDbIndexManager",`Using index ${function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(u)} to execute ${Oi(n)}`);let l=function(C,N){let U=Xy(N);if(U===void 0)return null;for(let B of fh(C,U.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(c,u),d=function(C,N){let U=new Map;for(let B of Ci(N))for(let ue of fh(C,B.fieldPath))switch(ue.op){case"==":case"in":U.set(B.fieldPath.canonicalString(),ue.value);break;case"not-in":case"!=":return U.set(B.fieldPath.canonicalString(),ue.value),Array.from(U.values())}return null}(c,u),h=function(C,N){let U=[],B=!0;for(let ue of Ci(N)){let wt=ue.kind===0?Qb(C,ue.fieldPath,C.startAt):Yb(C,ue.fieldPath,C.startAt);U.push(wt.value),B&&(B=wt.inclusive)}return new An(U,B)}(c,u),f=function(C,N){let U=[],B=!0;for(let ue of Ci(N)){let wt=ue.kind===0?Yb(C,ue.fieldPath,C.endAt):Qb(C,ue.fieldPath,C.endAt);U.push(wt.value),B&&(B=wt.inclusive)}return new An(U,B)}(c,u),v=this.ln(u,c,h),w=this.ln(u,c,f),m=this.hn(u,c,d),E=this.Pn(u.indexId,l,v,h.inclusive,w,f.inclusive,m);return p.forEach(E,P=>r.G(P,n.limit).next(C=>{C.forEach(N=>{let U=b.fromSegments(N.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return p.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=rU(he.create(e.filters,"and")).map(r=>mv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){let u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.In(n[d/c]):Wd,f=this.Tn(e,h,r[d%c],i),v=this.En(e,h,s[d%c],o),w=a.map(m=>this.Tn(e,h,m,!0));l.push(...this.createRange(f,v,w))}return l}Tn(e,n,r,i){let s=new Si(e,b.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){let s=new Si(e,b.empty(),n,r);return i?s.Ht():s}cn(e,n){let r=new Eh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.un(n);return p.forEach(i,s=>this.cn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new ge(xe.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new Ai;for(let i of Ci(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.jt(i.kind);zn.St.ht(s,o)}return r.Ut()}In(e){let n=new Ai;return zn.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new Ai;return zn.St.ht(Ni(this.databaseId,n),r.jt(function(s){let o=Ci(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new Ai);let s=0;for(let o of Ci(e)){let a=r[s++];for(let u of i)if(this.Rn(n,o.fieldPath)&&Nu(a))i=this.Vn(i,o,a);else{let c=u.jt(o.kind);zn.St.ht(a,c)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let u=new Ai;u.seed(a.Ut()),zn.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof X&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=yu(e),i=Xs(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{let o=[];return p.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(l,d){let h=d?new Au(d.sequenceNumber,new Ut(Vi(d.readTime),new b(En(d.documentKey)),d.largestBatchId)):Au.empty(),f=l.fields.map(([v,w])=>new ao(xe.fromServerFormat(v),w));return new ho(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:W(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=yu(e),s=Xs(e);return this.fn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>s.put(lA(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?p.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,u=>this.gn(e,i,u).next(c=>{let l=this.pn(s,u);return c.isEqual(l)?p.resolve():this.yn(e,s,u,c,l)}))))})}wn(e,n,r,i){return Js(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Js(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=Js(e),s=new ge(Tr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Si(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new ge(Tr),i=this.dn(n,e);if(i==null)return r;let s=Xy(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Nu(o))for(let a of o.arrayValue.values||[])r=r.add(new Si(n.indexId,e.key,this.In(a),i))}else r=r.add(new Si(n.indexId,e.key,Wd,i));return r}yn(e,n,r,i,s){I("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(u,c,l,d,h){let f=u.getIterator(),v=c.getIterator(),w=Zs(f),m=Zs(v);for(;w||m;){let E=!1,P=!1;if(w&&m){let C=l(w,m);C<0?P=!0:C>0&&(E=!0)}else w!=null?P=!0:E=!0;E?(d(m),m=Zs(v)):P?(h(w),w=Zs(f)):(w=Zs(f),m=Zs(v))}}(i,s,Tr,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),p.waitFor(o)}fn(e){let n=1;return Xs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Tr(o,a)).filter((o,a,u)=>!a||Tr(o,u[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Tr(o,e),u=Tr(o,n);if(a===0)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Wd,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Wd,[]];s.push(IDBKeyRange.bound(a,u))}return s}bn(e,n){return Tr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yA)}getMinOffset(e,n){return p.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||R())).next(yA)}};function mA(t){return Ge(t,"collectionParents")}function Js(t){return Ge(t,"indexEntries")}function yu(t){return Ge(t,"indexConfiguration")}function Xs(t){return Ge(t,"indexState")}function yA(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;zw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ut(e.readTime,e.documentKey,n)}var vA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function jS(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:o},(l,d,h)=>(a++,h.delete()));s.push(u.next(()=>{k(a===1)}));let c=[];for(let l of n.mutations){let d=zA(e,l.key.path,n.batchId);s.push(i.delete(d)),c.push(l.key)}return p.waitFor(s).next(()=>c)}function Dh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw R();e=t.noDocument}return JSON.stringify(e).length}Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var Ch=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){k(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return br(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=so(e),o=br(e);return o.add({}).next(a=>{k(typeof a=="number");let u=new Ou(a,n,r,i),c=function(f,v,w){let m=w.baseMutations.map(P=>ju(f.ut,P)),E=w.mutations.map(P=>ju(f.ut,P));return{userId:v,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:m,mutations:E}}(this.serializer,this.userId,u),l=[],d=new ge((h,f)=>W(h.canonicalString(),f.canonicalString()));for(let h of i){let f=zA(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(o.put(c)),l.push(s.put(f,l2))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return br(e).get(n).next(r=>r?(k(r.userId===this.userId),bi(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?p.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return br(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(k(a.batchId>=r),s=bi(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return br(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return br(e).U("userMutationsIndex",n).next(r=>r.map(i=>bi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Zd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return so(e).J({range:i},(o,a,u)=>{let[c,l,d]=o,h=En(l);if(c===this.userId&&n.path.isEqual(h))return br(e).get(d).next(f=>{if(!f)throw R();k(f.userId===this.userId),s.push(bi(this.serializer,f))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(W),i=[];return n.forEach(s=>{let o=Zd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=so(e).J({range:a},(c,l,d)=>{let[h,f,v]=c,w=En(f);h===this.userId&&s.path.isEqual(w)?r=r.add(v):d.done()});i.push(u)}),p.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=Zd(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new ge(W);return so(e).J({range:o},(u,c,l)=>{let[d,h,f]=u,v=En(h);d===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(br(e).get(s).next(o=>{if(o===null)throw R();k(o.userId===this.userId),r.push(bi(this.serializer,o))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return jS(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return so(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let u=En(s[1]);i.push(u)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return US(e,this.userId,n)}Mn(e){return BS(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function US(t,e,n){let r=Zd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return so(t).J({range:s,H:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function br(t){return Ge(t,"mutations")}function so(t){return Ge(t,"documentMutations")}function BS(t){return Ge(t,"mutationQueues")}var wo=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Vv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new wo(n.highestTargetId);return n.highestTargetId=r.next(),this.Bn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>L.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Bn(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Bn(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>eo(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.Bn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return eo(e).J((o,a)=>{let u=Eu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(s)).next(()=>i)}forEachTarget(e,n){return eo(e).J((r,i)=>{let s=Eu(i);n(s)})}Ln(e){return wA(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}Bn(e,n){return wA(e).put("targetGlobalKey",n)}kn(e,n){return eo(e).put(FS(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Oi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return eo(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{let c=Eu(a);Yu(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Ar(e);return n.forEach(o=>{let a=mt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=Ar(e);return p.forEach(n,s=>{let o=mt(s.path);return p.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Ar(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ar(e),s=K();return i.J({range:r,H:!0},(o,a,u)=>{let c=En(o[1]),l=new b(c);s=s.add(l)}).next(()=>s)}containsKey(e,n){let r=mt(n.path),i=IDBKeyRange.bound([r],[jA(r)],!1,!0),s=0;return Ar(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return eo(e).get(n).next(r=>r?Eu(r):null)}};function eo(t){return Ge(t,"targets")}function wA(t){return Ge(t,"targetGlobal")}function Ar(t){return Ge(t,"targetDocuments")}function _A([t,e],[n,r]){let i=W(t,n);return i===0?W(e,r):i}var Lv=class{constructor(e){this.Qn=e,this.buffer=new ge(_A),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();_A(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},jv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){I("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){$r(n)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Br(n)}yield this.Gn(3e5)}))}},Uv=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(St.oe);let r=new Lv(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(I("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(vA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vA):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),to()<=sn.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function iU(t,e){return new Uv(t,e)}var Bv=class{constructor(e,n){this.db=e,this.garbageCollector=iU(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Kd(e,r)}removeReference(e,n,r){return Kd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Kd(e,n)}Xn(e,n){return function(i,s){let o=!1;return BS(i).Y(a=>US(i,a,s).next(u=>(u&&(o=!0),p.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Zn(e,(o,a)=>{if(a<=n){let u=this.Xn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,L.min()),Ar(e).delete(function(d){return[0,mt(d.path)]}(o))))});i.push(u)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Kd(e,n)}Zn(e,n){let r=Ar(e),i,s=St.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==St.oe&&n(new b(En(i)),s),s=c,i=u):s=St.oe}).next(()=>{s!==St.oe&&n(new b(En(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Kd(t,e){return Ar(t).put(function(r,i){return{targetId:0,path:mt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Th=class{constructor(){this.changes=new Sn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $v=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Di(e).put(r)}removeEntry(e,n,r){return Di(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],wh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=je.newInvalidDocument(n);return Di(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vu(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:je.newInvalidDocument(n)};return Di(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(vu(n))},(i,s)=>{r={document:this.tr(n,s),size:Dh(s)}}).next(()=>r)}getEntries(e,n){let r=Ct();return this.rr(e,n,(i,s)=>{let o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=Ct(),i=new _e(b.comparator);return this.rr(e,n,(s,o)=>{let a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,Dh(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return p.resolve();let i=new ge(DA);n.forEach(u=>i=i.add(u));let s=IDBKeyRange.bound(vu(i.first()),vu(i.last())),o=i.getIterator(),a=o.getNext();return Di(e).J({index:"documentKeyIndex",range:s},(u,c,l)=>{let d=b.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&DA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?l.$(vu(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),wh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Di(e).U(IDBKeyRange.bound(a,u,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let l=Ct();for(let d of c){let h=this.tr(b.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Ju(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let s=Ct(),o=IA(n,r),a=IA(n,Ut.max());return Di(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,l)=>{let d=this.tr(b.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new qv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return EA(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}er(e,n){return EA(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=tU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(L.min())))return r}return je.newInvalidDocument(e)}};function $S(t){return new $v(t)}var qv=class extends Th{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Sn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new ge((s,o)=>W(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){let u=uA(this._r.serializer,o);i=i.add(s.path.popLast());let c=Dh(u);r+=c-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){let u=uA(this._r.serializer,o.convertToNoDocument(L.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function EA(t){return Ge(t,"remoteDocumentGlobal")}function Di(t){return Ge(t,"remoteDocumentsV14")}function vu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IA(t,e){let n=e.documentKey.path.toArray();return[t,wh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function DA(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=W(n[s],r[s]),i)return i;return i=W(n.length,r.length),i||(i=W(n[n.length-2],r[r.length-2]),i||W(n[n.length-1],r[r.length-1]))}var Hv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var bh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cu(r.mutation,i,Mt.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,K()).next(()=>r))}getLocalViewOfDocuments(e,n,r=K()){let i=In();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=_u();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=In();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,K()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ct(),o=Du(),a=function(){return Du()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof tn)?s=s.insert(c.key,c):l!==void 0?(o.set(c.key,l.mutation.getFieldMask()),Cu(l.mutation,c,l.mutation.getFieldMask(),De.now())):o.set(c.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Hv(l,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Du(),i=new _e((o,a)=>o-a),s=K();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Mt.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||K()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=dS();l.forEach(h=>{if(!s.has(h)){let f=wS(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return p.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return b.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):p.resolve(In()),a=-1,u=s;return o.next(c=>p.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,K())).next(l=>({batchId:a,changes:lS(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=_u();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=_u();return this.indexManager.getCollectionParents(e,s).next(a=>p.forEach(a,u=>{let c=function(d,h){return new en(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{let l=c.getKey();o.get(l)===null&&(o=o.insert(l,je.newInvalidDocument(l)))});let a=_u();return o.forEach((u,c)=>{let l=s.get(u);l!==void 0&&Cu(l.mutation,c,Mt.empty(),De.now()),Ju(n,c)&&(a=a.insert(u,c))}),a})}};var zv=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return p.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Re(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:Jw(i.bundledQuery),readTime:Re(i.readTime)}}(n)),p.resolve()}};var Gv=class{constructor(){this.overlays=new _e(b.comparator),this.lr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=In();return p.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=In(),s=n.length+1,o=new b(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new _e((c,l)=>c-l),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);l===null&&(l=In(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=In(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return p.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ku(n,r));let s=this.lr.get(n);s===void 0&&(s=K(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var Bu=class{constructor(){this.hr=new ge(Fe.Pr),this.Ir=new ge(Fe.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Fe(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Fe(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new b(new re([])),r=new Fe(n,e),i=new Fe(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new b(new re([])),r=new Fe(n,e),i=new Fe(n,e+1),s=K();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Fe(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return b.comparator(e.key,n.key)||W(e.gr,n.gr)}static Tr(e,n){return W(e.gr,n.gr)||b.comparator(e.key,n.key)}};var Wv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ge(Fe.Pr)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ou(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new Fe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(o)}lookupMutationBatch(e,n){return p.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return p.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),p.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(W);return n.forEach(i=>{let s=new Fe(i,0),o=new Fe(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),p.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;b.isDocumentKey(s)||(s=s.child(""));let o=new Fe(new b(s),0),a=new ge(W);return this.yr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gr)),!0)},o),p.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return p.forEach(n.mutations,i=>{let s=new Fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Fe(n,0),i=this.yr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Kv=class{constructor(e){this.Cr=e,this.docs=function(){return new _e(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():je.newInvalidDocument(n))}getEntries(e,n){let r=Ct();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():je.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ct(),o=n.path,a=new b(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||zw(BA(l),r)<=0||(i.has(l.key)||Ju(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return p.resolve(s)}getAllFromCollectionGroup(e,n,r,i){R()}vr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qv(this)}getSize(e){return p.resolve(this.size)}},Qv=class extends Th{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var Yv=class{constructor(e){this.persistence=e,this.Fr=new Sn(n=>Oi(n),Yu),this.lastRemoteSnapshotVersion=L.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Bu,this.targetCount=0,this.Nr=wo.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),p.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new wo(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.kn(n),p.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(s).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),p.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Or.containsKey(n))}};var Ah=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new St(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Yv(this),this.indexManager=new kv,this.remoteDocumentCache=function(i){return new Kv(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new vh(n),this.Kr=new zv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Gv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Wv(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);let i=new Zv(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},Zv=class extends oh{constructor(e){super(),this.currentSequenceNumber=e}},Sh=class t{constructor(e){this.persistence=e,this.Gr=new Bu,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw R()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),p.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Hr,r=>{let i=b.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,L.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return p.or([()=>p.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var Jv=class{constructor(e){this.serializer=e}O(e,n,r,i){let s=new ah("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ub,{unique:!0}),u.createObjectStore("documentMutations")}(e),CA(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=p.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),CA(e)),o=o.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:L.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ub,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:I2});c.createIndex("collectionPathOverlayIndex",D2,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",C2,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:d2});c.createIndex("documentKeyIndex",h2),c.createIndex("collectionGroupIndex",f2)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:v2}).createIndex("sequenceNumberIndex",w2,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:_2}).createIndex("documentKeyIndex",E2,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}Xr(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Dh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>p.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>p.forEach(a,u=>{k(u.userId===s.userId);let c=bi(this.serializer,u);return jS(e,s.userId,c).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let u=new re(o),c=function(d){return[0,mt(d)]}(u);s.push(n.get(c).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:mt(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:y2});let r=n.store("collectionParents"),i=new Uu,s=o=>{if(i.add(o)){let a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:mt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let u=new re(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],c)=>{let l=En(a);return s(l.popLast())}))}ni(e){let n=e.store("targets");return n.J((r,i)=>{let s=Eu(i),o=FS(this.serializer,s);return n.put(o)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new b(re.fromString(d.document.name).popFirst(5)):d.noDocument?b.fromSegments(d.noDocument.path):d.unknownDocument?b.fromSegments(d.unknownDocument.path):R()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>p.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=$S(this.serializer),s=new Ah(Sh.jr,this.serializer.ut);return r.U().next(o=>{let a=new Map;return o.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:K();bi(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),p.forEach(a,(u,c)=>{let l=new Ve(c),d=_h.ct(this.serializer,l),h=s.getIndexManager(l),f=Ch.ct(l,this.serializer,h,s.referenceDelegate);return new bh(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Mu(n,St.oe),u).next()})})}};function CA(t){t.createObjectStore("targetDocuments",{keyPath:g2}).createIndex("documentTargetsIndex",m2,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",p2,{unique:!0}),t.createObjectStore("targetGlobal")}var qy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xv=class t{constructor(e,n,r,i,s,o,a,u,c,l,d=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=c,this._i=l,this.ai=d,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new _(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bv(this,i),this.Ii=n+"main",this.serializer=new vh(u),this.Ti=new Nr(this.Ii,this.ai,new Jv(this.serializer)),this.qr=new Vv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$S(this.serializer),this.Kr=new Sv,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,l===!1&&Me("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _(g.FAILED_PRECONDITION,qy);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Br=new St(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if($r(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return wu(e).get("owner").next(n=>p.resolve(this.wi(n)))}Si(e){return Qd(e).delete(this.clientId)}bi(){return y(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Ge(n,"clientMetadata");return r.U().next(i=>{let s=this.Ci(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return p.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?p.resolve(!0):wu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new _(g.FAILED_PRECONDITION,qy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qd(e).U().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&I("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Mu(e,St.oe);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Qd(e).U().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Ch.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fv(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return _h.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){I("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===16?b2:u===15?QA:u===14?KA:u===13?WA:u===12?T2:u===11?GA:void R()}(this.ai),o;return this.Ti.runTransaction(e,i,s,a=>(o=new Mu(a,this.Br?this.Br.next():St.oe),n==="readwrite-primary"?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw Me(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new _(g.FAILED_PRECONDITION,$A);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Bi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Bi(e){return wu(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new _(g.FAILED_PRECONDITION,qy)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wu(e).put("owner",n)}static D(){return Nr.D()}pi(e){let n=wu(e);return n.get("owner").next(r=>this.wi(r)?(I("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Me(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;vf()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return I("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Me("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Me("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function wu(t){return Ge(t,"owner")}function Qd(t){return Ge(t,"clientMetadata")}function e_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ew=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=K(),i=K();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var tw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Mh=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return vf()?8:qA(Lo())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new tw;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(to()<=sn.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),p.resolve()):(to()<=sn.DEBUG&&I("QueryEngine","Query:",no(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(to()<=sn.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yt(n))):p.resolve())}zi(e,n){if(Zb(n))return p.resolve(null);let r=yt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ph(n,null,"F"),r=yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=K(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Yi(n,a);return this.Zi(n,c,o,u.readTime)?this.zi(e,ph(n,null,"F")):this.Xi(e,c,n,u)}))})))}ji(e,n,r,i){return Zb(n)||i.isEqual(L.min())?p.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?p.resolve(null):(to()<=sn.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),no(n)),this.Xi(e,o,n,UA(i,-1)).next(a=>a))})}Yi(e,n){let r=new ge(uS(e));return n.forEach((i,s)=>{Ju(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return to()<=sn.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",no(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ut.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var nw=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new _e(W),this.ns=new Sn(s=>Oi(s),Yu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function qS(t,e,n,r){return new nw(t,e,n,r)}function HS(t,e){return y(this,null,function*(){let n=A(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=K();for(let c of i){o.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of s){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})})}function sU(t,e){let n=A(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=p.resolve();return h.forEach(v=>{f=f.next(()=>l.getEntry(u,v)).next(w=>{let m=c.docVersions.get(v);k(m!==null),w.version.compareTo(m)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),l.addEntry(w)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=K();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zS(t){let e=A(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function oU(t,e){let n=A(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ze.EMPTY_BYTE_STRING,L.min()).withLastLimboFreeSnapshotVersion(L.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(w,m,E){return w.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(s,f))});let u=Ct(),c=K();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(GS(s,o,e.documentUpdates).next(l=>{u=l.us,c=l.cs})),!r.isEqual(L.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ts=i,s))}function GS(t,e,n){let r=K(),i=K();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ct();return n.forEach((a,u)=>{let c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(L.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{us:o,cs:i}})}function aU(t,e){let n=A(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _o(t,e){let n=A(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,p.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new vo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Eo(t,e,n){return y(this,null,function*(){let r=A(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!$r(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function xh(t,e,n){let r=A(t),i=L.min(),s=K();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){let d=A(u),h=d.ns.get(l);return h!==void 0?p.resolve(d.ts.get(h)):d.qr.getTargetData(c,l)}(r,o,yt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:L.min(),n?s:K())).next(a=>(QS(r,aS(e),a),{documents:a,ls:s})))}function WS(t,e){let n=A(t),r=A(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function KS(t,e){let n=A(t),r=n.rs.get(e)||L.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,UA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(QS(n,e,i),i))}function QS(t,e,n){let r=t.rs.get(e)||L.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function uU(t,e,n,r){return y(this,null,function*(){let i=A(t),s=K(),o=Ct();for(let c of n){let l=e.hs(c.metadata.name);c.document&&(s=s.add(l));let d=e.Ps(c);d.setReadTime(e.Is(c.metadata.readTime)),o=o.insert(l,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield _o(i,function(l){return yt(Mo(re.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>GS(c,a,o).next(l=>(a.apply(c),l)).next(l=>i.qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.qr.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.us,l.cs)).next(()=>l.us)))})}function cU(r,i){return y(this,arguments,function*(t,e,n=K()){let s=yield _o(t,yt(Jw(e.bundledQuery))),o=A(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let u=Re(e.readTime);if(s.snapshotVersion.compareTo(u)>=0)return o.Kr.saveNamedQuery(a,e);let c=s.withResumeToken(ze.EMPTY_BYTE_STRING,u);return o.ts=o.ts.insert(c.targetId,c),o.qr.updateTargetData(a,c).next(()=>o.qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.qr.addMatchingKeys(a,n,s.targetId)).next(()=>o.Kr.saveNamedQuery(a,e))})})}function TA(t,e){return`firestore_clients_${t}_${e}`}function bA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Hy(t,e){return`firestore_targets_${t}_${e}`}var Rh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new _(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(Me("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Tu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new _(r.error.code,r.error.message))),s?new t(e,r.state,i):(Me("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Nh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Yw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=HA(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Me("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},rw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Me("SharedClientState",`Failed to parse online state: ${e}`),null)}},$u=class{constructor(){this.activeTargetIds=Yw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},bu=class{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new _e(W),this.started=!1,this.ps=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=TA(this.persistenceKey,this.Rs),this.ws=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new $u),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(TA(this.persistenceKey,r));if(i){let s=Nh.Ts(r,i);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Hy(this.persistenceKey,e));if(r){let i=Tu.Ts(e,r);i&&(n=i.state)}}return this.Bs.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hy(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return I("SharedClientState","READ",e,n),n}setItem(e,n){I("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(I("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void Me("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(s){let o=St.oe;if(s!=null)try{let a=JSON.parse(s);k(typeof a=="number"),o=a}catch(a){Me("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==St.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,n,r){let i=new Rh(this.currentUser,e,n,r),s=bA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Ls(e){let n=bA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=Hy(this.persistenceKey,e),s=new Tu(e,n,r);this.setItem(i,s.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return Nh.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Rh.Ts(new Ve(s),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return Tu.Ts(i,n)}Ms(e){return rw.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);I("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Yw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Ph=class{constructor(){this.eo=new $u,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new $u,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iw=class{ro(e){}shutdown(){}};var Oh=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Yd=null;function zy(){return Yd===null?Yd=function(){return 268435456+Math.round(2147483648*Math.random())}():Yd++,"0x"+Yd.toString(16)}var lU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sw=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var ut="WebChannelConnection",ow=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=zy(),u=this.Co(n,r.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,s,o),this.Fo(n,u,c,i).then(l=>(I("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw jt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=lU[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=zy();return new Promise((o,a)=>{let u=new kb;u.setWithCredentials(!0),u.listenOnce(Nb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gd.NO_ERROR:let l=u.getResponseJson();I(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Gd.TIMEOUT:I(ut,`RPC '${e}' ${s} timed out`),a(new _(g.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:let d=u.getStatus();if(I(ut,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let v=function(m){let E=m.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(E)>=0?E:g.UNKNOWN}(f.status);a(new _(v,f.message))}else a(new _(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _(g.UNAVAILABLE,"Connection failed."));break;default:R()}}finally{I(ut,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(i);I(ut,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}xo(e,n,r){let i=zy(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xb(),a=Rb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new Ob({})),this.vo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=s.join("");I(ut,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=o.createWebChannel(l,u),h=!1,f=!1,v=new sw({co:m=>{f?I(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(I(ut,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),I(ut,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},lo:()=>d.close()}),w=(m,E,P)=>{m.listen(E,C=>{try{P(C)}catch(N){setTimeout(()=>{throw N},0)}})};return w(d,gu.EventType.OPEN,()=>{f||(I(ut,`RPC '${e}' stream ${i} transport opened.`),v.Vo())}),w(d,gu.EventType.CLOSE,()=>{f||(f=!0,I(ut,`RPC '${e}' stream ${i} transport closed`),v.fo())}),w(d,gu.EventType.ERROR,m=>{f||(f=!0,jt(ut,`RPC '${e}' stream ${i} transport errored:`,m),v.fo(new _(g.UNAVAILABLE,"The operation could not be completed")))}),w(d,gu.EventType.MESSAGE,m=>{var E;if(!f){let P=m.data[0];k(!!P);let C=P,N=C.error||((E=C[0])===null||E===void 0?void 0:E.error);if(N){I(ut,`RPC '${e}' stream ${i} received error:`,N);let U=N.status,B=function(gf){let rc=ke[gf];if(rc!==void 0)return IS(rc)}(U),ue=N.message;B===void 0&&(B=g.INTERNAL,ue="Unknown error status: "+U+" with message "+N.message),f=!0,v.fo(new _(B,ue)),d.close()}else I(ut,`RPC '${e}' stream ${i} received:`,P),v.po(P)}}),w(a,Pb.STAT_EVENT,m=>{m.stat===By.PROXY?I(ut,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===By.NOPROXY&&I(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.mo()},0),v}};function YS(){return typeof window<"u"?window:null}function th(){return typeof document<"u"?document:null}function Xu(t){return new Dv(t,!0)}var qu=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var kh=class{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new qu(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return y(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return y(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return y(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Me(n.toString()),Me("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new _(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>y(this,null,function*(){this.state=0,this.start()}))}u_(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},aw=class extends kh{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=K2(this.serializer,e),r=function(s){if(!("targetChange"in s))return L.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?L.min():o.readTime?Re(o.readTime):L.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=bv(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=hh(u)?{documents:xS(s,u)}:{query:RS(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CS(s,o.resumeToken);let c=Cv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(L.min())>0){a.readTime=yo(s,o.snapshotVersion.toTimestamp());let c=Cv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=Y2(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=bv(this.serializer),n.removeTarget=e,this.r_(n)}},uw=class extends kh{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=Q2(e.writeResults,e.commitTime),r=Re(e.commitTime);return this.listener.d_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=bv(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>ju(this.serializer,r))};this.r_(n)}};var cw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,Tv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _(g.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Tv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _(g.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var lw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Me(n),this.y_=!1):I("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var dw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>y(this,null,function*(){qr(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let c=A(u);c.M_.add(4),yield xo(c),c.N_.set("Unknown"),c.M_.delete(4),yield ec(c)})}(this))}))}),this.N_=new lw(r,i)}};function ec(t){return y(this,null,function*(){if(qr(t))for(let e of t.x_)yield e(!0)})}function xo(t){return y(this,null,function*(){for(let e of t.x_)yield e(!1)})}function ef(t,e){let n=A(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),r_(n)?n_(n):No(n).Zo()&&t_(n,e))}function Io(t,e){let n=A(t),r=No(n);n.F_.delete(e),r.Zo()&&ZS(n,e),n.F_.size===0&&(r.Zo()?r.t_():qr(n)&&n.N_.set("Unknown"))}function t_(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(L.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).h_(e)}function ZS(t,e){t.L_.xe(e),No(t).P_(e)}function n_(t){t.L_=new Iv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),No(t).start(),t.N_.w_()}function r_(t){return qr(t)&&!No(t).Yo()&&t.F_.size>0}function qr(t){return A(t).M_.size===0}function JS(t){t.L_=void 0}function dU(t){return y(this,null,function*(){t.N_.set("Online")})}function hU(t){return y(this,null,function*(){t.F_.forEach((e,n)=>{t_(t,e)})})}function fU(t,e){return y(this,null,function*(){JS(t),r_(t)?(t.N_.D_(e),n_(t)):t.N_.set("Unknown")})}function pU(t,e,n){return y(this,null,function*(){if(t.N_.set("Online"),e instanceof mh&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fh(t,r)}else if(e instanceof co?t.L_.Ke(e):e instanceof gh?t.L_.He(e):t.L_.We(e),!n.isEqual(L.min()))try{let r=yield zS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=s.F_.get(c);l&&s.F_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{let l=s.F_.get(u);if(!l)return;s.F_.set(u,l.withResumeToken(ze.EMPTY_BYTE_STRING,l.snapshotVersion)),ZS(s,u);let d=new vo(l.target,u,c,l.sequenceNumber);t_(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield Fh(t,r)}})}function Fh(t,e,n){return y(this,null,function*(){if(!$r(e))throw e;t.M_.add(1),yield xo(t),t.N_.set("Offline"),n||(n=()=>zS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ec(t)}))})}function XS(t,e){return e().catch(n=>Fh(t,n,e))}function Ro(t){return y(this,null,function*(){let e=A(t),n=Ur(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;gU(e);)try{let i=yield aU(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,mU(e,i)}catch(i){yield Fh(e,i)}eM(e)&&tM(e)})}function gU(t){return qr(t)&&t.v_.length<10}function mU(t,e){t.v_.push(e);let n=Ur(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function eM(t){return qr(t)&&!Ur(t).Yo()&&t.v_.length>0}function tM(t){Ur(t).start()}function yU(t){return y(this,null,function*(){Ur(t).R_()})}function vU(t){return y(this,null,function*(){let e=Ur(t);for(let n of t.v_)e.E_(n.mutations)})}function wU(t,e,n){return y(this,null,function*(){let r=t.v_.shift(),i=wv.from(r,e,n);yield XS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ro(t)})}function _U(t,e){return y(this,null,function*(){e&&Ur(t).T_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return ES(o)&&o!==g.ABORTED}(i.code)){let s=r.v_.shift();Ur(r).e_(),yield XS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ro(r)}})}(t,e)),eM(t)&&tM(t)})}function AA(t,e){return y(this,null,function*(){let n=A(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=qr(n);n.M_.add(3),yield xo(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ec(n)})}function hw(t,e){return y(this,null,function*(){let n=A(t);e?(n.M_.delete(2),yield ec(n)):e||(n.M_.add(2),yield xo(n),n.N_.set("Unknown"))})}function No(t){return t.B_||(t.B_=function(n,r,i){let s=A(n);return s.m_(),new aw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:dU.bind(null,t),Io:hU.bind(null,t),Eo:fU.bind(null,t),l_:pU.bind(null,t)}),t.x_.push(e=>y(this,null,function*(){e?(t.B_.e_(),r_(t)?n_(t):t.N_.set("Unknown")):(yield t.B_.stop(),JS(t))}))),t.B_}function Ur(t){return t.k_||(t.k_=function(n,r,i){let s=A(n);return s.m_(),new uw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:yU.bind(null,t),Eo:_U.bind(null,t),A_:vU.bind(null,t),d_:wU.bind(null,t)}),t.x_.push(e=>y(this,null,function*(){e?(t.k_.e_(),yield Ro(t)):(yield t.k_.stop(),t.v_.length>0&&(I("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var fw=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Po(t,e){if(Me("AsyncQueue",`${e}: ${t}`),$r(t))return new _(g.UNAVAILABLE,`${e}: ${t}`);throw t}var Vh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=_u(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Lh=class{constructor(){this.q_=new _e(b.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):R():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Do=class t{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Vh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var pw=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},gw=class{constructor(){this.queries=new Sn(e=>oS(e),Zu),this.onlineState="Unknown",this.z_=new Set}};function i_(t,e){return y(this,null,function*(){let n=A(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new pw,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Po(o,`Initialization of query '${no(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&o_(n)})}function s_(t,e){return y(this,null,function*(){let n=A(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function EU(t,e){let n=A(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&o_(n)}function IU(t,e,n){let r=A(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function o_(t){t.z_.forEach(e=>{e.next()})}var mw,SA;(SA=mw||(mw={})).J_="default",SA.Cache="cache";var Hu=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Do(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==mw.Cache}};var yw=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var jh=class{constructor(e){this.serializer=e}hs(e){return Cn(this.serializer,e)}Ps(e){return e.metadata.exists?MS(this.serializer,e.document,!1):je.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Re(e)}},vw=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nM(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=re.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new jh(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.hs(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||K()).add(s);n.set(o,a)}}return n}complete(){return y(this,null,function*(){let e=yield uU(this.localStore,new jh(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield cU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function nM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Uh=class{constructor(e){this.key=e}},Bh=class{constructor(e){this.key=e}},$h=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=K(),this.mutatedKeys=K(),this.Ia=uS(e),this.Ta=new Vh(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Lh,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Ju(this.query,d)?d:null,v=!!h&&this.mutatedKeys.has(h.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?v!==w&&(r.track({type:3,doc:f}),m=!0):this.Ra(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.Ia(f,u)>0||c&&this.Ia(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(o=o.add(f),s=w?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((l,d)=>function(f,v){let w=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R()}};return w(f)-w(v)}(l.type,d.type)||this.Ia(l.doc,d.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Do(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Lh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=K(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Bh(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Uh(r))}),n}pa(e){this.la=e.ls,this.Pa=K();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Do.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},ww=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},_w=class{constructor(e){this.key=e,this.wa=!1}},Ew=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Sn(a=>oS(a),Zu),this.Da=new Map,this.Ca=new Set,this.va=new _e(b.comparator),this.Fa=new Map,this.Ma=new Bu,this.xa={},this.Oa=new Map,this.Na=wo.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function DU(t,e,n=!0){return y(this,null,function*(){let r=tf(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield rM(r,e,n,!0),i})}function CU(t,e){return y(this,null,function*(){let n=tf(t);yield rM(n,e,!0,!1)})}function rM(t,e,n,r){return y(this,null,function*(){let i=yield _o(t.localStore,yt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield a_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ef(t.remoteStore,i),a})}function a_(t,e,n,r,i){return y(this,null,function*(){t.Ba=(d,h,f)=>function(w,m,E,P){return y(this,null,function*(){let C=m.view.da(E);C.Zi&&(C=yield xh(w.localStore,m.query,!1).then(({documents:ue})=>m.view.da(ue,C)));let N=P&&P.targetChanges.get(m.targetId),U=P&&P.targetMismatches.get(m.targetId)!=null,B=m.view.applyChanges(C,w.isPrimaryClient,N,U);return Iw(w,m.targetId,B.fa),B.snapshot})}(t,d,h,f);let s=yield xh(t.localStore,e,!0),o=new $h(e,s.ls),a=o.da(s.documents),u=Vu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);Iw(t,n,c.fa);let l=new ww(e,n,o);return t.ba.set(e,l),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot})}function TU(t,e,n){return y(this,null,function*(){let r=A(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Zu(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Eo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Io(r.remoteStore,i.targetId),Co(r,i.targetId)}).catch(Br))):(Co(r,i.targetId),yield Eo(r.localStore,i.targetId,!0))})}function bU(t,e){return y(this,null,function*(){let n=A(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Io(n.remoteStore,r.targetId))})}function AU(t,e,n){return y(this,null,function*(){let r=d_(t);try{let i=yield function(o,a){let u=A(o),c=De.now(),l=a.reduce((f,v)=>f.add(v.key),K()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=Ct(),w=K();return u.ss.getEntries(f,l).next(m=>{v=m,v.forEach((E,P)=>{P.isValidDocument()||(w=w.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,v)).next(m=>{d=m;let E=[];for(let P of a){let C=B2(P,d.get(P.key).overlayedDocument);C!=null&&E.push(new tn(P.key,C,XA(C.value.mapValue),Ae.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,E,a)}).next(m=>{h=m;let E=m.applyToLocalDocumentSet(d,w);return u.documentOverlayCache.saveOverlays(f,m.batchId,E)})}).then(()=>({batchId:h.batchId,changes:lS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.xa[o.currentUser.toKey()];c||(c=new _e(W)),c=c.insert(a,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),yield Jn(r,i.changes),yield Ro(r.remoteStore)}catch(i){let s=Po(i,"Failed to persist write");n.reject(s)}})}function iM(t,e){return y(this,null,function*(){let n=A(t);try{let r=yield oU(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?k(o.wa):i.removedDocuments.size>0&&(k(o.wa),o.wa=!1))}),yield Jn(n,r,e)}catch(r){yield Br(r)}})}function MA(t,e,n){let r=A(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=A(o);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.U_)h.j_(a)&&(c=!0)}),c&&o_(u)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SU(t,e,n){return y(this,null,function*(){let r=A(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new _e(b.comparator);o=o.insert(s,je.newNoDocument(s,L.min()));let a=K().add(s),u=new Fu(L.min(),new Map,new _e(W),o,a);yield iM(r,u),r.va=r.va.remove(s),r.Fa.delete(e),l_(r)}else yield Eo(r.localStore,e,!1).then(()=>Co(r,e,n)).catch(Br)})}function MU(t,e){return y(this,null,function*(){let n=A(t),r=e.batch.batchId;try{let i=yield sU(n.localStore,e);c_(n,r,null),u_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Jn(n,i)}catch(i){yield Br(i)}})}function xU(t,e,n){return y(this,null,function*(){let r=A(t);try{let i=yield function(o,a){let u=A(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(k(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);c_(r,e,n),u_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Jn(r,i)}catch(i){yield Br(i)}})}function RU(t,e){return y(this,null,function*(){let n=A(t);qr(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=A(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=Po(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function u_(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function c_(t,e,n){let r=A(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Co(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||sM(t,r)})}function sM(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Io(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),l_(t))}function Iw(t,e,n){for(let r of n)r instanceof Uh?(t.Ma.addReference(r.key,e),NU(t,r)):r instanceof Bh?(I("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||sM(t,r.key)):R()}function NU(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(I("SyncEngine","New document in limbo: "+n),t.Ca.add(r),l_(t))}function l_(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new b(re.fromString(e)),r=t.Na.next();t.Fa.set(r,new _w(n)),t.va=t.va.insert(n,r),ef(t.remoteStore,new vo(yt(Mo(n.path)),r,"TargetPurposeLimboResolution",St.oe))}}function Jn(t,e,n){return y(this,null,function*(){let r=A(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=ew.Qi(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(u,c){return y(this,null,function*(){let l=A(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(c,h=>p.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!$r(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),v=f.snapshotVersion,w=f.withLastLimboFreeSnapshotVersion(v);l.ts=l.ts.insert(h,w)}}})}(r.localStore,s))})}function PU(t,e){return y(this,null,function*(){let n=A(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield HS(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _(g.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jn(n,r._s)}})}function OU(t,e){let n=A(t),r=n.Fa.get(e);if(r&&r.wa)return K().add(r.key);{let i=K(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function kU(t,e){return y(this,null,function*(){let n=A(t),r=yield xh(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&Iw(n,e.targetId,i.fa),i})}function FU(t,e){return y(this,null,function*(){let n=A(t);return KS(n.localStore,e).then(r=>Jn(n,r))})}function VU(t,e,n,r){return y(this,null,function*(){let i=A(t),s=yield function(a,u){let c=A(a),l=A(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Cn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield Ro(i.remoteStore):n==="acknowledged"||n==="rejected"?(c_(i,e,r||null),u_(i,e),function(a,u){A(A(a).mutationQueue).Fn(u)}(i.localStore,e)):R(),yield Jn(i,s)):I("SyncEngine","Cannot apply mutation batch with id: "+e)})}function LU(t,e){return y(this,null,function*(){let n=A(t);if(tf(n),d_(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield xA(n,r.toArray());n.La=!0,yield hw(n.remoteStore,!0);for(let s of i)ef(n.remoteStore,s)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Co(n,o),Eo(n.localStore,o,!0))),Io(n.remoteStore,o)}),yield i,yield xA(n,r),function(o){let a=A(o);a.Fa.forEach((u,c)=>{Io(a.remoteStore,c)}),a.Ma.Vr(),a.Fa=new Map,a.va=new _e(b.comparator)}(n),n.La=!1,yield hw(n.remoteStore,!1)}})}function xA(t,e,n){return y(this,null,function*(){let r=A(t),i=[],s=[];for(let o of e){let a,u=r.Da.get(o);if(u&&u.length!==0){a=yield _o(r.localStore,yt(u[0]));for(let c of u){let l=r.ba.get(c),d=yield kU(r,l);d.snapshot&&s.push(d.snapshot)}}else{let c=yield WS(r.localStore,o);a=yield _o(r.localStore,c),yield a_(r,oM(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.l_(s),i})}function oM(t){return sS(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jU(t){return function(n){return A(A(n).persistence).Li()}(A(t).localStore)}function UU(t,e,n,r){return y(this,null,function*(){let i=A(t);if(i.La)return void I("SyncEngine","Ignoring unexpected query state notification.");let s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield KS(i.localStore,aS(s[0])),a=Fu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ze.EMPTY_BYTE_STRING);yield Jn(i,o,a);break}case"rejected":yield Eo(i.localStore,e,!0),Co(i,e,r);break;default:R()}})}function BU(t,e,n){return y(this,null,function*(){let r=tf(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){I("SyncEngine","Adding an already active target "+i);continue}let s=yield WS(r.localStore,i),o=yield _o(r.localStore,s);yield a_(r,oM(s),o.targetId,!1,o.resumeToken),ef(r.remoteStore,o)}for(let i of n)r.Da.has(i)&&(yield Eo(r.localStore,i,!1).then(()=>{Io(r.remoteStore,i),Co(r,i)}).catch(Br))}})}function tf(t){let e=A(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SU.bind(null,e),e.Sa.l_=EU.bind(null,e.eventManager),e.Sa.ka=IU.bind(null,e.eventManager),e}function d_(t){let e=A(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xU.bind(null,e),e}function $U(t,e,n){let r=A(t);(function(s,o,a){return y(this,null,function*(){try{let u=yield o.getMetadata();if(yield function(f,v){let w=A(f),m=Re(v.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",E=>w.Kr.getBundleMetadata(E,v.id)).then(E=>!!E&&E.createTime.compareTo(m)>=0)}(s.localStore,u))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(nM(u));let c=new vw(u,s.localStore,o.serializer),l=yield o.qa();for(;l;){let h=yield c._a(l);h&&a._updateProgress(h),l=yield o.qa()}let d=yield c.complete();return yield Jn(s,d.ca,void 0),yield function(f,v){let w=A(f);return w.persistence.runTransaction("Save bundle","readwrite",m=>w.Kr.saveBundleMetadata(m,v))}(s.localStore,u),a._completeWith(d.progress),Promise.resolve(d.ua)}catch(u){return jt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var zu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=Xu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qS(this.persistence,new Mh,e.initialUser,this.serializer)}createPersistence(e){return new Ah(Sh.jr,this.serializer)}createSharedClientState(e){return new Ph}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var qh=class t extends zu{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield mf(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield d_(this.Qa.syncEngine),yield Ro(this.Qa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return qS(this.persistence,new Mh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new jv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new rv(n,this.persistence);return new nv(e.asyncQueue,r)}createPersistence(e){let n=e_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new Xv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,YS(),th(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ph}},Dw=class t extends qh{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield mf(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof bu&&(this.sharedClientState.syncEngine={Ys:VU.bind(null,n),Zs:UU.bind(null,n),Xs:BU.bind(null,n),Li:jU.bind(null,n),Js:FU.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>y(this,null,function*(){yield LU(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=YS();if(!bu.D(n))throw new _(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=e_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Gu=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>MA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PU.bind(null,this.syncEngine),yield hw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new gw}()}createDatastore(e){let n=Xu(e.databaseInfo.databaseId),r=function(s){return new ow(s)}(e.databaseInfo);return function(s,o,a,u){return new cw(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new dw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>MA(this.syncEngine,n,0),function(){return Oh.D()?new Oh:new iw}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){let d=new Ew(i,s,o,a,u,c);return l&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let i=A(r);I("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield xo(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function RA(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var To=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Me("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Cw=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Le,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}qa(){return y(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return y(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new yw(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return y(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return y(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Tw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return y(this,null,function*(){let o=A(i),a={documents:s.map(d=>Lu(o.serializer,d))},u=yield o.Mo("BatchGetDocuments",o.serializer.databaseId,re.emptyPath(),a,s.length),c=new Map;u.forEach(d=>{let h=W2(o.serializer,d);c.set(h.key.toString(),h)});let l=[];return s.forEach(d=>{let h=c.get(d.toString());k(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=b.fromPath(r);this.mutations.push(new Pu(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let s=A(r),o={writes:i.map(a=>ju(s.serializer,a))};yield s.Do("Commit",s.serializer.databaseId,re.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw R();n=L.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new _(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(L.min())?Ae.exists(!1):Ae.updateTime(n):Ae.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(L.min()))throw new _(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ae.updateTime(n)}return Ae.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var bw=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Jo=new qu(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko(()=>y(this,null,function*(){let e=new Tw(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!Qu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ES(n)}return!1}};var Aw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=ih.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>y(this,null,function*(){I("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(I("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Po(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function nh(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield HS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Sw(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield h_(t);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>AA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>AA(e.remoteStore,i)),t._onlineComponents=e})}function aM(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function h_(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!aM(n))throw n;jt("Error using user provided cache. Falling back to memory cache: "+n),yield nh(t,new zu)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield nh(t,new zu);return t._offlineComponents})}function nf(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield Sw(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield Sw(t,new Gu))),t._onlineComponents})}function uM(t){return h_(t).then(e=>e.persistence)}function f_(t){return h_(t).then(e=>e.localStore)}function cM(t){return nf(t).then(e=>e.remoteStore)}function p_(t){return nf(t).then(e=>e.syncEngine)}function qU(t){return nf(t).then(e=>e.datastore)}function bo(t){return y(this,null,function*(){let e=yield nf(t),n=e.eventManager;return n.onListen=DU.bind(null,e.syncEngine),n.onUnlisten=TU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bU.bind(null,e.syncEngine),n})}function HU(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield uM(t),n=yield cM(t);return e.setNetworkEnabled(!0),function(i){let s=A(i);return s.M_.delete(0),ec(s)}(n)}))}function zU(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield uM(t),n=yield cM(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let s=A(i);s.M_.add(0),yield xo(s),s.N_.set("Offline")})}(n)}))}function GU(t,e){let n=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield function(c,l){let d=A(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new _(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Po(a,`Failed to get document '${s} from cache`);o.reject(u)}})}(yield f_(t),e,n)})),n.promise}function lM(t,e,n={}){let r=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,u,c){let l=new To({next:h=>{o.enqueueAndForget(()=>s_(s,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new _(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new _(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Hu(Mo(a.path),l,{includeMetadataChanges:!0,ra:!0});return i_(s,d)}(yield bo(t),t.asyncQueue,e,n,r)})),r.promise}function WU(t,e){let n=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield xh(i,s,!0),u=new $h(s,a.ls),c=u.da(a.documents),l=u.applyChanges(c,!1);o.resolve(l.snapshot)}catch(a){let u=Po(a,`Failed to execute query '${s} against cache`);o.reject(u)}})}(yield f_(t),e,n)})),n.promise}function dM(t,e,n={}){let r=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,u,c){let l=new To({next:h=>{o.enqueueAndForget(()=>s_(s,d)),h.fromCache&&u.source==="server"?c.reject(new _(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Hu(a,l,{includeMetadataChanges:!0,ra:!0});return i_(s,d)}(yield bo(t),t.asyncQueue,e,n,r)})),r.promise}function KU(t,e){let n=new To(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){A(i).z_.add(s),s.next()}(yield bo(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){A(i).z_.delete(s)}(yield bo(t),n)}))}}function QU(t,e,n,r){let i=function(o,a){let u;return u=typeof o=="string"?DS().encode(o):o,function(l,d){return new Cw(l,d)}(function(l,d){if(l instanceof Uint8Array)return RA(l,d);if(l instanceof ArrayBuffer)return RA(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Xu(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){$U(yield p_(t),i,r)}))}function YU(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let s=A(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield f_(t),e)}))}function hM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NA=new Map;function g_(t,e,n){if(!n)throw new _(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m_(t,e,n,r){if(e===!0&&r===!0)throw new _(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PA(t){if(!b.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OA(t){if(b.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":R()}function ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=rf(t);throw new _(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function fM(t,e){if(e<=0)throw new _(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Hh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Li=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gy;switch(r.type){case"firstParty":return new Yy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=NA.get(n);r&&(I("ComponentProvider","Removing Datastore"),NA.delete(n),r.terminate())}(this),Promise.resolve()}};function pM(t,e,n,r={}){var i;let s=(t=ie(t,Li))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ve.MOCK_USER;else{a=q_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new _(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ve(c)}t._authCredentials=new Wy(new rh(a,u))}}var Ze=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ye=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Tn=class t extends Ze{constructor(e,n,r){super(e,n,Mo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ye(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function y_(t,e,...n){if(t=Ie(t),g_("collection","path",e),t instanceof Li){let r=re.fromString(e,...n);return OA(r),new Tn(t,null,r)}{if(!(t instanceof ye||t instanceof Tn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(re.fromString(e,...n));return OA(r),new Tn(t.firestore,null,r)}}function gM(t,e){if(t=ie(t,Li),g_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ze(t,null,function(r){return new en(re.emptyPath(),r)}(e))}function tc(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=ih.newId()),g_("doc","path",e),t instanceof Li){let r=re.fromString(e,...n);return PA(r),new ye(t,null,new b(r))}{if(!(t instanceof ye||t instanceof Tn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(re.fromString(e,...n));return PA(r),new ye(t.firestore,t instanceof Tn?t.converter:null,new b(r))}}function v_(t,e){return t=Ie(t),e=Ie(e),(t instanceof ye||t instanceof Tn)&&(e instanceof ye||e instanceof Tn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function w_(t,e){return t=Ie(t),e=Ie(e),t instanceof Ze&&e instanceof Ze&&t.firestore===e.firestore&&Zu(t._query,e._query)&&t.converter===e.converter}var Mw=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new qu(this,"async_queue_retry"),this.hu=()=>{let n=th();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=th();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Le;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return y(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!$r(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Me("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=fw.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&R()}verifyOperationInProgress(){}du(){return y(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function xw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Rw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Le,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var mM=-1,Ee=class extends Li{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Mw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yM(this),this._firestoreClient.terminate()}};function Be(t){return t._firestoreClient||yM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yM(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,c,l){return new iv(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,hM(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Aw(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function vM(t,e){AM(t=ie(t,Ee));let n=Be(t);if(n._uninitializedComponentsProvider)throw new _(g.FAILED_PRECONDITION,"SDK cache is already specified.");jt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Gu;return _M(n,i,new qh(i,r.cacheSizeBytes,e?.forceOwnership))}function wM(t){AM(t=ie(t,Ee));let e=Be(t);if(e._uninitializedComponentsProvider)throw new _(g.FAILED_PRECONDITION,"SDK cache is already specified.");jt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Gu;return _M(e,r,new Dw(r,n.cacheSizeBytes))}function _M(t,e,n){let r=new Le;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield nh(t,n),yield Sw(t,e),r.resolve()}catch(i){let s=i;if(!aM(s))throw s;jt("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function EM(t){if(t._initialized&&!t._terminated)throw new _(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Le;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!Nr.D())return Promise.resolve();let i=r+"main";yield Nr.delete(i)})}(e_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function IM(t){return function(n){let r=new Le;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return RU(yield p_(n),r)})),r.promise}(Be(t=ie(t,Ee)))}function DM(t){return HU(Be(t=ie(t,Ee)))}function CM(t){return zU(Be(t=ie(t,Ee)))}function TM(t,e){let n=Be(t=ie(t,Ee)),r=new Rw;return QU(n,t._databaseId,e,r),r}function bM(t,e){return YU(Be(t=ie(t,Ee)),e).then(n=>n?new Ze(t,null,n.query):null)}function AM(t){if(t._initialized||t._terminated)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Mn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ze.fromBase64String(e))}catch(n){throw new _(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var nn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yn=class{constructor(e){this._methodName=e}};var ji=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}};var ZU=/^__.*__$/,Nw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lr(e,this.data,n,this.fieldTransforms)}},zh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new tn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function SM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R()}}var Gh=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Wh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(SM(this.fu)&&ZU.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Pw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xu(e)}Fu(e,n,r,i=!1){return new Gh({fu:e,methodName:n,vu:r,path:xe.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qi(t){let e=t._freezeSettings(),n=Xu(t._databaseId);return new Pw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sf(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);I_("Data must be an object, but it was:",o,r);let a=RM(r,o),u,c;if(s.merge)u=new Mt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=Lw(e,d,n);if(!o.contains(h))throw new _(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);PM(l,h)||l.push(h)}u=new Mt(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Nw(new ct(a),u,c)}var Wu=class t extends Yn{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function MM(t,e,n){return new Gh({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Ow=class t extends Yn{_toFieldTransform(e){return new ki(e.path,new Fr)}isEqual(e){return e instanceof t}},kw=class t extends Yn{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=MM(this,e,!0),r=this.Mu.map(s=>Hi(s,n)),i=new Kn(r);return new ki(e.path,i)}isEqual(e){return e instanceof t&&wf(this.Mu,e.Mu)}},Fw=class t extends Yn{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=MM(this,e,!0),r=this.Mu.map(s=>Hi(s,n)),i=new Qn(r);return new ki(e.path,i)}isEqual(e){return e instanceof t&&wf(this.Mu,e.Mu)}},Vw=class t extends Yn{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Vr(e.serializer,pS(e.serializer,this.xu));return new ki(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function __(t,e,n,r){let i=t.Fu(1,e,n);I_("Data must be an object, but it was:",i,r);let s=[],o=ct.empty();$i(r,(u,c)=>{let l=D_(e,u,n);c=Ie(c);let d=i.Su(l);if(c instanceof Wu)s.push(l);else{let h=Hi(c,d);h!=null&&(s.push(l),o.set(l,h))}});let a=new Mt(s);return new zh(o,a,i.fieldTransforms)}function E_(t,e,n,r,i,s){let o=t.Fu(1,e,n),a=[Lw(e,r,n)],u=[i];if(s.length%2!=0)throw new _(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Lw(e,s[h])),u.push(s[h+1]);let c=[],l=ct.empty();for(let h=a.length-1;h>=0;--h)if(!PM(c,a[h])){let f=a[h],v=u[h];v=Ie(v);let w=o.Su(f);if(v instanceof Wu)c.push(f);else{let m=Hi(v,w);m!=null&&(c.push(f),l.set(f,m))}}let d=new Mt(c);return new zh(l,d,o.fieldTransforms)}function xM(t,e,n,r=!1){return Hi(n,t.Fu(r?4:3,e))}function Hi(t,e){if(NM(t=Ie(t)))return I_("Unsupported field value:",e,t),RM(t,e);if(t instanceof Yn)return function(r,i){if(!SM(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Hi(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=De.fromDate(r);return{timestampValue:yo(i.serializer,s)}}if(r instanceof De){let s=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yo(i.serializer,s)}}if(r instanceof ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mn)return{bytesValue:CS(i.serializer,r._byteString)};if(r instanceof ye){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Zw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${rf(r)}`)}(t,e)}function RM(t,e){let n={};return YA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(t,(r,i)=>{let s=Hi(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function NM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof ji||t instanceof Mn||t instanceof ye||t instanceof Yn)}function I_(t,e,n){if(!NM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=rf(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Lw(t,e,n){if((e=Ie(e))instanceof nn)return e._internalPath;if(typeof e=="string")return D_(t,e);throw Wh("Field path arguments must be of type string or ",t,!1,void 0,n)}var JU=new RegExp("[~\\*/\\[\\]]");function D_(t,e,n){if(e.search(JU)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nn(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _(g.INVALID_ARGUMENT,a+t+u)}function PM(t,e){return t.some(n=>n.isEqual(e))}var Ui=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(of("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},jw=class extends Ui{data(){return super.data()}};function of(t,e){return typeof e=="string"?D_(t,e):e instanceof nn?e._internalPath:e._delegate._internalPath}function OM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ku=class{},Bi=class extends Ku{};function Xn(t,e,...n){let r=[];e instanceof Ku&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof Uw).length,a=s.filter(u=>u instanceof Kh).length;if(o>1||o>0&&a>0)throw new _(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Kh=class t extends Bi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return HM(e._query,n),new Ze(e.firestore,e.converter,yv(e._query,n))}_parse(e){let n=qi(e.firestore);return function(s,o,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new _(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){FA(d,l);let f=[];for(let v of d)f.push(kA(u,s,v));h={arrayValue:{values:f}}}else h=kA(u,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||FA(d,l),h=xM(a,o,d,l==="in"||l==="not-in");return X.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function kM(t,e,n){let r=e,i=of("where",t);return Kh._create(i,r,n)}var Uw=class t extends Ku{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:he.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)HM(o,u),o=yv(o,u)}(e._query,n),new Ze(e.firestore,e.converter,yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Bw=class t extends Bi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pi(s,o)}(e._query,this._field,this._direction);return new Ze(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new en(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function FM(t,e="asc"){let n=e,r=of("orderBy",t);return Bw._create(r,n)}var Qh=class t extends Bi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ze(e.firestore,e.converter,ph(e._query,this._limit,this._limitType))}};function VM(t){return fM("limit",t),Qh._create("limit",t,"F")}function LM(t){return fM("limitToLast",t),Qh._create("limitToLast",t,"L")}var Yh=class t extends Bi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=qM(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,s){return new en(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function jM(...t){return Yh._create("startAt",t,!0)}function UM(...t){return Yh._create("startAfter",t,!1)}var Zh=class t extends Bi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=qM(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,s){return new en(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function BM(...t){return Zh._create("endBefore",t,!1)}function $M(...t){return Zh._create("endAt",t,!0)}function qM(t,e,n,r){if(n[0]=Ie(n[0]),n[0]instanceof Ui)return function(s,o,a,u,c){if(!u)throw new _(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of uo(s))if(d.field.isKeyField())l.push(Ni(o,u.key));else{let h=u.data.field(d.field);if(Xh(h))throw new _(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new _(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new An(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=qi(t.firestore);return function(o,a,u,c,l,d){let h=o.explicitOrderBy;if(l.length>h.length)throw new _(g.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let v=0;v<l.length;v++){let w=l[v];if(h[v].field.isKeyField()){if(typeof w!="string")throw new _(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!Qw(o)&&w.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);let m=o.path.child(re.fromString(w));if(!b.isDocumentKey(m))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let E=new b(m);f.push(Ni(a,E))}else{let m=xM(u,c,w);f.push(m)}}return new An(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function kA(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new _(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qw(e)&&n.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(re.fromString(n));if(!b.isDocumentKey(r))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ni(t,new b(r))}if(n instanceof ye)return Ni(t,n._key);throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function FA(t,e){if(!Array.isArray(t)||t.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HM(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ao=class{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw R()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return $i(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ji(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ww(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){let n=Wn(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=re.fromString(e);k(kS(r));let i=new Or(r.get(1),r.get(3)),s=new b(r.popFirst(5));return i.isEqual(n)||Me(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function af(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var $w=class extends Ao{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ye(this.firestore,null,n)}};var Gn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bt=class extends Ui{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new xr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(of("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},xr=class extends Bt{data(e={}){return super.data(e)}},rn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xr(this._firestore,this._userDataWriter,r.key,r,new Gn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new xr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new xr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:XU(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function XU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R()}}function C_(t,e){return t instanceof Bt&&e instanceof Bt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof rn&&e instanceof rn&&t._firestore===e._firestore&&w_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function zM(t){t=ie(t,ye);let e=ie(t.firestore,Ee);return lM(Be(e),t._key).then(n=>S_(e,t,n))}var Zn=class extends Ao{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ye(this.firestore,null,n)}};function GM(t){t=ie(t,ye);let e=ie(t.firestore,Ee),n=Be(e),r=new Zn(e);return GU(n,t._key).then(i=>new Bt(e,r,t._key,i,new Gn(i!==null&&i.hasLocalMutations,!0),t.converter))}function WM(t){t=ie(t,ye);let e=ie(t.firestore,Ee);return lM(Be(e),t._key,{source:"server"}).then(n=>S_(e,t,n))}function KM(t){t=ie(t,Ze);let e=ie(t.firestore,Ee),n=Be(e),r=new Zn(e);return OM(t._query),dM(n,t._query).then(i=>new rn(e,r,t,i))}function QM(t){t=ie(t,Ze);let e=ie(t.firestore,Ee),n=Be(e),r=new Zn(e);return WU(n,t._query).then(i=>new rn(e,r,t,i))}function YM(t){t=ie(t,Ze);let e=ie(t.firestore,Ee),n=Be(e),r=new Zn(e);return dM(n,t._query,{source:"server"}).then(i=>new rn(e,r,t,i))}function T_(t,e,n){t=ie(t,ye);let r=ie(t.firestore,Ee),i=af(t.converter,e,n);return Oo(r,[sf(qi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ae.none())])}function b_(t,e,n,...r){t=ie(t,ye);let i=ie(t.firestore,Ee),s=qi(i),o;return o=typeof(e=Ie(e))=="string"||e instanceof nn?E_(s,"updateDoc",t._key,e,n,r):__(s,"updateDoc",t._key,e),Oo(i,[o.toMutation(t._key,Ae.exists(!0))])}function ZM(t){return Oo(ie(t.firestore,Ee),[new jr(t._key,Ae.none())])}function JM(t,e){let n=ie(t.firestore,Ee),r=tc(t),i=af(t.converter,e);return Oo(n,[sf(qi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ae.exists(!1))]).then(()=>r)}function A_(t,...e){var n,r,i;t=Ie(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||xw(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(xw(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof ye)c=ie(t.firestore,Ee),l=Mo(t._key.path),u={next:d=>{e[o]&&e[o](S_(c,t,d))},error:e[o+1],complete:e[o+2]};else{let d=ie(t,Ze);c=ie(d.firestore,Ee),l=d._query;let h=new Zn(c);u={next:f=>{e[o]&&e[o](new rn(c,h,d,f))},error:e[o+1],complete:e[o+2]},OM(t._query)}return function(h,f,v,w){let m=new To(w),E=new Hu(f,m,v);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return i_(yield bo(h),E)})),()=>{m.$a(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return s_(yield bo(h),E)}))}}(Be(c),l,a,u)}function XM(t,e){return KU(Be(t=ie(t,Ee)),xw(e)?e:{next:e})}function Oo(t,e){return function(r,i){let s=new Le;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return AU(yield p_(r),i,s)})),s.promise}(Be(t),e)}function S_(t,e,n){let r=n.docs.get(e._key),i=new Zn(t);return new Bt(t,i,e._key,r,new Gn(n.hasPendingWrites,n.fromCache),e.converter)}var eB={maxAttempts:5};var Jh=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qi(e)}set(e,n,r){this._verifyNotCommitted();let i=Sr(e,this._firestore),s=af(i.converter,n,r),o=sf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ae.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Sr(e,this._firestore),o;return o=typeof(n=Ie(n))=="string"||n instanceof nn?E_(this._dataReader,"WriteBatch.update",s._key,n,r,i):__(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ae.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Sr(e,this._firestore);return this._mutations=this._mutations.concat(new jr(n._key,Ae.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Sr(t,e){if((t=Ie(t)).firestore!==e)throw new _(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var qw=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=qi(n)}get(n){let r=Sr(n,this._firestore),i=new $w(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return R();let o=s[0];if(o.isFoundDocument())return new Ui(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ui(this._firestore,i,r._key,null,r.converter);throw R()})}set(n,r,i){let s=Sr(n,this._firestore),o=af(s.converter,r,i),a=sf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Sr(n,this._firestore),a;return a=typeof(r=Ie(r))=="string"||r instanceof nn?E_(this._dataReader,"Transaction.update",o._key,r,i,s):__(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Sr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Sr(e,this._firestore),r=new Zn(this._firestore);return super.get(e).then(i=>new Bt(this._firestore,r,n._key,i._document,new Gn(!1,!1),n.converter))}};function ex(t,e,n){t=ie(t,Ee);let r=Object.assign(Object.assign({},eB),n);return function(s){if(s.maxAttempts<1)throw new _(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let u=new Le;return s.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let c=yield qU(s);new bw(s.asyncQueue,c,a,o,u).Xa()})),u.promise}(Be(t),i=>e(new qw(t,i)),r)}function tx(){return new Wu("deleteField")}function nx(){return new Ow("serverTimestamp")}function rx(...t){return new kw("arrayUnion",t)}function ix(...t){return new Fw("arrayRemove",t)}function sx(t){return new Vw("increment",t)}(function(e,n=!0){(function(i){So=i})(G_),jo(new Hr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ee(new Ky(r.getProvider("auth-internal")),new Jy(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Or(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),er(Vb,"4.6.1",e),er(Vb,"4.6.1","esm2017")})();var tB="@firebase/firestore-compat",nB="0.3.30";function O_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new _("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function ox(){if(typeof Uint8Array>"u")throw new _("unimplemented","Uint8Arrays are not available in this environment.")}function ax(){if(!ZA())throw new _("unimplemented","Blobs are unavailable in Firestore in this environment.")}var uf=class t{constructor(e){this._delegate=e}static fromBase64String(e){return ax(),new t(Mn.fromBase64String(e))}static fromUint8Array(e){return ox(),new t(Mn.fromUint8Array(e))}toBase64(){return ax(),this._delegate.toBase64()}toUint8Array(){return ox(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function M_(t){return rB(t,["next","error","complete"])}function rB(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var x_=class{enableIndexedDbPersistence(e,n){return vM(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return wM(e._delegate)}clearIndexedDbPersistence(e){return EM(e._delegate)}},cf=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Or||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&jt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){pM(this._delegate,e,n,r)}enableNetwork(){return DM(this._delegate)}disableNetwork(){return CM(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,m_("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return IM(this._delegate)}onSnapshotsInSync(e){return XM(this._delegate,e)}get app(){if(!this._appCompat)throw new _("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vo(this,y_(this._delegate,e))}catch(n){throw vt(n,"collection()","Firestore.collection()")}}doc(e){try{return new xn(this,tc(this._delegate,e))}catch(n){throw vt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ki(this,gM(this._delegate,e))}catch(n){throw vt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ex(this._delegate,n=>e(new lf(this,n)))}batch(){return Be(this._delegate),new df(new Jh(this._delegate,e=>Oo(this._delegate,e)))}loadBundle(e){return TM(this._delegate,e)}namedQuery(e){return bM(this._delegate,e).then(n=>n?new Ki(this,n):null)}},ko=class extends Ao{constructor(e){super(),this.firestore=e}convertBytes(e){return new uf(new Mn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return xn.forKey(n,this.firestore,null)}};function iB(t){VA(t)}var lf=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ko(e)}get(e){let n=zi(e);return this._delegate.get(n).then(r=>new Gi(this._firestore,new Bt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=zi(e);return r?(O_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=zi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=zi(e);return this._delegate.delete(n),this}},df=class{constructor(e){this._delegate=e}set(e,n,r){let i=zi(e);return r?(O_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=zi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=zi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Fo=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new xr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wi(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new ko(e),n),i.set(n,s)),s}};Fo.INSTANCES=new WeakMap;var xn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ko(e)}static forPath(e,n,r){if(e.length%2!==0)throw new _("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ye(n._delegate,r,new b(e)))}static forKey(e,n,r){return new t(n,new ye(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vo(this.firestore,y_(this._delegate,e))}catch(n){throw vt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ie(e),e instanceof ye?v_(this._delegate,e):!1}set(e,n){n=O_("DocumentReference.set",n);try{return n?T_(this._delegate,e,n):T_(this._delegate,e)}catch(r){throw vt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?b_(this._delegate,e):b_(this._delegate,e,n,...r)}catch(i){throw vt(i,"updateDoc()","DocumentReference.update()")}}delete(){return ZM(this._delegate)}onSnapshot(...e){let n=ux(e),r=cx(e,i=>new Gi(this.firestore,new Bt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return A_(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=GM(this._delegate):e?.source==="server"?n=WM(this._delegate):n=zM(this._delegate),n.then(r=>new Gi(this.firestore,new Bt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Fo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function vt(t,e,n){return t.message=t.message.replace(e,n),t}function ux(t){for(let e of t)if(typeof e=="object"&&!M_(e))return e;return{}}function cx(t,e){var n,r;let i;return M_(t[0])?i=t[0]:M_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Gi=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return C_(this._delegate,e._delegate)}},Wi=class extends Gi{data(e){let n=this._delegate.data(e);return this._delegate._converter||LA(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ki=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ko(e)}where(e,n,r){try{return new t(this.firestore,Xn(this._delegate,kM(e,n,r)))}catch(i){throw vt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Xn(this._delegate,FM(e,n)))}catch(r){throw vt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Xn(this._delegate,VM(e)))}catch(n){throw vt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Xn(this._delegate,LM(e)))}catch(n){throw vt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Xn(this._delegate,jM(...e)))}catch(n){throw vt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Xn(this._delegate,UM(...e)))}catch(n){throw vt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Xn(this._delegate,BM(...e)))}catch(n){throw vt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Xn(this._delegate,$M(...e)))}catch(n){throw vt(n,"endAt()","Query.endAt()")}}isEqual(e){return w_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=QM(this._delegate):e?.source==="server"?n=YM(this._delegate):n=KM(this._delegate),n.then(r=>new nc(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=ux(e),r=cx(e,i=>new nc(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return A_(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Fo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},R_=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Wi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},nc=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ki(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new R_(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Wi(this._firestore,r))})}isEqual(e){return C_(this._delegate,e._delegate)}},Vo=class t extends Ki{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new xn(this.firestore,e):null}doc(e){try{return e===void 0?new xn(this.firestore,tc(this._delegate)):new xn(this.firestore,tc(this._delegate,e))}catch(n){throw vt(n,"doc()","CollectionReference.doc()")}}add(e){return JM(this._delegate,e).then(n=>new xn(this.firestore,n))}isEqual(e){return v_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Fo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function zi(t){return ie(t,ye)}var N_=class t{constructor(...e){this._delegate=new nn(...e)}static documentId(){return new t(xe.keyField().canonicalString())}isEqual(e){return e=Ie(e),e instanceof nn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var P_=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=nx();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=tx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=rx(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=ix(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=sx(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var sB={Firestore:cf,GeoPoint:ji,Timestamp:De,Blob:uf,Transaction:lf,WriteBatch:df,DocumentReference:xn,DocumentSnapshot:Gi,Query:Ki,QueryDocumentSnapshot:Wi,QuerySnapshot:nc,CollectionReference:Vo,FieldPath:N_,FieldValue:P_,setLogLevel:iB,CACHE_SIZE_UNLIMITED:mM};function oB(t,e){t.INTERNAL.registerComponent(new Hr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sB)))}function aB(t){oB(t,(e,n)=>new cf(e,n,new x_)),t.registerVersion(tB,nB)}aB(lt);function uB(t,e=$o){return new Y(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function lx(t,e){return uB(t,e)}function cB(t,e){return lx(t,e).pipe(Yr(void 0),Ho(),V(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function V_(t,e){return lx(t,e).pipe(V(n=>({payload:n,type:"query"})))}var hf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=gx(r,n);return new pf(i,s,this.afs)}snapshotChanges(){return cB(this.ref,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return this.snapshotChanges().pipe(V(({payload:n})=>e.idField?ce(M({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ee(this.ref.get(e)).pipe(Dt)}};function ff(t,e){return V_(t,e).pipe(Yr(void 0),Ho(),V(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=s.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function dx(t,e,n){return ff(t,n).pipe(Qr((r,i)=>lB(r,i.map(s=>s.payload),e),[]),Uf(),V(r=>r.map(i=>({type:i.type,payload:i}))))}function lB(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=dB(t,r))}),t}function k_(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function dB(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return k_(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return k_(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return k_(t,e.oldIndex,1);break}return t}function hx(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var pf=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=ff(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(V(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Yr(void 0),Ho(),Ue(([r,i])=>i.length>0||!r),V(([,r])=>r),Dt)}auditTrail(e){return this.stateChanges(e).pipe(Qr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=hx(e);return dx(this.query,n,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return V_(this.query,this.afs.schedulers.outsideAngular).pipe(V(n=>n.payload.docs.map(r=>e.idField?ce(M({},r.data()),{[e.idField]:r.id}):r.data())),Dt)}get(e){return ee(this.query.get(e)).pipe(Dt)}add(e){return this.ref.add(e)}doc(e){return new hf(this.ref.doc(e),this.afs)}},F_=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?ff(this.query,this.afs.schedulers.outsideAngular).pipe(Dt):ff(this.query,this.afs.schedulers.outsideAngular).pipe(V(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ue(n=>n.length>0),Dt)}auditTrail(e){return this.stateChanges(e).pipe(Qr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=hx(e);return dx(this.query,n,this.afs.schedulers.outsideAngular).pipe(Dt)}valueChanges(e={}){return V_(this.query,this.afs.schedulers.outsideAngular).pipe(V(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),Dt)}get(e){return ee(this.query.get(e)).pipe(Dt)}},fx=new x("angularfire2.enableFirestorePersistence"),px=new x("angularfire2.firestore.persistenceSettings"),hB=new x("angularfire2.firestore.settings"),fB=new x("angularfire2.firestore.use-emulator");function gx(t,e=n=>n){return{query:e(t),ref:t}}var L_=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,c,l,d,h,f,v,w,m,E,P){this.schedulers=u;let C=Ha(n,a,r),N=l;d&&Zm(C,a,h,v,w,m,f,E),[this.firestore,this.persistenceEnabled$]=md(`${C.name}.firestore`,"AngularFirestore",C.name,()=>{let U=a.runOutsideAngular(()=>C.firestore());if(s&&U.settings(s),N&&U.useEmulator(...N),i&&!gr(o)){let B=()=>{try{return ee(U.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(ue){return typeof console<"u"&&console.warn(ue),F(!1)}};return[U,a.runOutsideAngular(B)]}else return[U,F(!1)]},[s,N,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=gx(i,r),a=this.schedulers.ngZone.run(()=>s);return new pf(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new F_(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new hf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(qs),D(Hs,8),D(fx,8),D(hB,8),D(it),D(se),D(pd),D(px,8),D(fB,8),D(Ga,8),D(zm,8),D(Gm,8),D(Wm,8),D(Km,8),D(Qm,8),D(Ym,8),D(mi,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),A8=(()=>{class t{constructor(){lt.registerVersion("angularfire",yi.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:fx,useValue:!0},{provide:px,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=nt({type:t});static \u0275inj=tt({providers:[L_]})}return t})();var M8=(()=>{let e=class e{constructor(r,i,s){this.authF=r,this.router=i,this.firestore=s,this.userCredentials=null}register(r,i){return y(this,null,function*(){try{this.userCredentials=this.authF.createUserWithEmailAndPassword(r,i).then(s=>{this.imprimeHoraActual(),console.log("19"),this.userCredentials=s.user,this.guardar(r),this.router.navigate(["/home"])}).catch(s=>{this.imprimeHoraActual(),console.log("29 - hay un error"),s=="FirebaseError: Firebase: The supplied auth credential is incorrect, malformed or has expired. (auth/invalid-credential)."?this.mensajeError="usuario y/o contrase\xF1a incorrectos":s=="FirebaseError: Firebase: The email address is badly formatted. (auth/invalid-email)."?this.mensajeError="mail vacio o con formato incorrecto":this.mensajeError="contrase\xF1a vacia"})}catch(s){this.mensajeError=s.toString()}})}login(r,i){this.authF.signInWithEmailAndPassword(r,i).then(s=>{this.imprimeHoraActual(),console.log("19"),this.userCredentials=s.user,this.guardar(r),this.router.navigate(["/home"])}).catch(s=>{this.imprimeHoraActual(),console.log("23"),console.error(s),s=="FirebaseError: Firebase: The supplied auth credential is incorrect, malformed or has expired. (auth/invalid-credential)."?this.mensajeError="usuario y/o contrase\xF1a incorrectos":s=="FirebaseError: Firebase: The email address is badly formatted. (auth/invalid-email)."?this.mensajeError="mail vacio o con formato incorrecto":this.mensajeError="contrase\xF1a vacia"})}logout(){this.authF.signOut()}imprimeHoraActual(){let i=new Date().toLocaleTimeString();console.log(i)}guardar(r){let i=this.firestore.collection("logs");console.log("col"),i.add({Email:r,fechaYHora:new Date})}};e.\u0275fac=function(i){return new(i||e)(D(Ga),D(Yt),D(L_))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();export{Y as a,$o as b,F as c,V as d,Lf as e,an as f,Uf as g,Qr as h,qf as i,$x as j,ve as k,qx as l,O as m,tt as n,x as o,D as p,T as q,wI as r,nt as s,SR as t,R9 as u,N9 as v,it as w,WN as x,P9 as y,le as z,se as A,WO as B,nk as C,XD as D,eC as E,Tg as F,V9 as G,As as H,L9 as I,vk as J,nC as K,j9 as L,_k as M,rC as N,Ek as O,U9 as P,Ik as Q,la as R,sC as S,f3 as T,Qk as U,oF as V,IF as W,b3 as X,Y3 as Y,J1 as Z,Yt as _,U5 as $,B5 as aa,$5 as ba,ZC as ca,p5 as da,g5 as ea,y1 as fa,_1 as ga,y5 as ha,D1 as ia,v5 as ja,yi as ka,mi as la,pd as ma,Dt as na,qs as oa,Hs as pa,Ha as qa,o6 as ra,md as sa,zm as ta,Gm as ua,Wm as va,Km as wa,Qm as xa,Ym as ya,Zm as za,Ga as Aa,H6 as Ba,L_ as Ca,A8 as Da,M8 as Ea};
